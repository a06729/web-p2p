/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./src/public/js/app.js":
/*!******************************!*\
  !*** ./src/public/js/app.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _sns_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./sns.js */ \"./src/public/js/sns.js\");\n/* harmony import */ var _qrious_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./qrious.js */ \"./src/public/js/qrious.js\");\n/* harmony import */ var _qrious_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_qrious_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _darkMode_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./darkMode.js */ \"./src/public/js/darkMode.js\");\n\r\n\r\n\r\n// import reset_css from \"../css/reset.css\";\r\n//window.함수이름 으로 설정해주여야 번들링 했을때 tag의 onclick을 인식한다.\r\nwindow.shareKakao = _sns_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].shareKakao;\r\nwindow.shareTelegram = _sns_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].shareTelegram;\r\nwindow.sharUrl = _sns_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].sharUrl;\r\nwindow.handleDarkMode=_darkMode_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].handleDarkMode;\r\n// window.allowFileDownload=allowFileDownload;\r\nwindow.qr_gen=qr_ge;\r\n\r\n_darkMode_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].darkModeInit();\r\nKakao.init(KakaoApi);\r\n\r\nfunction qr_ge(){\r\n    let qr = new (_qrious_js__WEBPACK_IMPORTED_MODULE_1___default())({\r\n        element: document.getElementById('qr-code'),\r\n        size: 200,\r\n        value: `${window.location.href}`\r\n    });\r\n}\r\n\r\nconst socket=io();\r\nconst myPeer=new Peer(undefined,{\r\n    host:'custom-peerserver.herokuapp.com',\r\n    path:'/peerjs/myapp',\r\n    secure: true,\r\n    config:{'iceServers':[\r\n        { url: \"stun:stun1.l.google.com:19302\" },\r\n    ]},\r\n});\r\n\r\n// let connection = null;\r\n\r\n//peerId는 peer server의 고유값 입니다.\r\nlet peerId;\r\n\r\n//peer들이 서로 연결 됬을때 쓰기위한 변수\r\n//myPeer.connect(peerId)함수에서 연결이되면\r\n//conn.send() 함수로 연결된 peer에 값을 보낼수 있다.\r\nvar conn;\r\n\r\n//fireBase db의 고유 글 번호\r\n// let fireDocId;\r\n\r\n//파일 이름 저장 변수\r\nlet file_name;\r\n\r\n//파일이 로드가 다 되었을때 파일 크기를 저장하는 변수\r\nlet file_size;\r\n\r\n//보내진 청크 크기를 저장 하는 변수\r\nlet current_file_size=0;\r\n\r\n//현재 파일 전송이 진행된 퍼센트를 저장하는 변수\r\nlet percentComplete=0;\r\n\r\n// let arrayToStoreChunks = [];\r\n\r\n//청크 사이즈\r\nconst chunkLength = 1024*1024*1;\r\n\r\n//파일 태그를 id값으로 접근합니다.\r\n// const file_elm=document.querySelector(\"#fileUpload\");\r\n\r\n//guest_avatar_div 클래스 명을 가진 태그에 접근합니다.\r\nconst guest_avatar_div=document.querySelector(\".guest_avatar_div\");\r\n\r\nconst none_guest_div=document.querySelector(\".none_guest_div\");\r\n\r\nconst file_progress_bar=document.querySelector(\".file-progress_bar\");\r\nconst current_progress=document.querySelector(\".file-current-progress\");\r\n\r\n\r\n\r\n//아바타에 들어가는 이미지 api 주소 값 입니다.\r\nconst avatar_api_url=\"https://avatars.dicebear.com/api/bottts\";\r\n\r\nconst clickEvent=(function() {\r\n    if ('onTouchDown ' in document.documentElement === true) {\r\n      return 'onTouchDown';\r\n    } else {\r\n      return 'click';\r\n    }\r\n  })();\r\n\r\nmyPeer.on('open',(id)=>{\r\n    const avatar_img=document.getElementById(\"my_avatar_img\");\r\n    const avatar_avatar_peerId=document.querySelector(\".my_avatar_div__profile__title\");\r\n    socket.emit(\"join-room\",ROOM_ID,id);\r\n    peerId=id;\r\n    fetch(`${avatar_api_url}/${peerId}.svg`).then((res)=>{\r\n        return res.blob();\r\n    }).then((blob)=>{\r\n        const avata_url=URL.createObjectURL(blob);\r\n        avatar_img.src=avata_url;\r\n        avatar_img.title=peerId;\r\n        avatar_avatar_peerId.innerHTML=`식별값:${peerId}`;\r\n        avatar_img.onload=()=>{\r\n            avatar_img.classList.remove(\"skeleton_ani\");\r\n            URL.revokeObjectURL(avata_url);\r\n        }\r\n    });\r\n    // avatar_img.src=`${avatar_api_url}/${peerId}.svg`;\r\n    // avatar_img.title=peerId;\r\n    // avatar_avatar_peerId.innerHTML=`식별값:${peerId}`;\r\n\r\n    // guest_avatar_div.style.display=\"none\";\r\n});\r\n\r\nmyPeer.on('connection',function(dataConnection){\r\n    dataConnection.on(\"open\",function(){\r\n        let arrayToStoreChunks = [];\r\n        const pg_div=document.querySelector(\".receive_file_pg_div\");\r\n        const pg_bar=document.createElement(\"progress\");\r\n        const receive_file_name_h3=document.createElement(\"h3\");\r\n        // let receive_file_size=0;\r\n        let percentComplete=0;\r\n        dataConnection.on('data',async function(data){\r\n            let file_data = JSON.parse(data);\r\n            arrayToStoreChunks.push(file_data.message); // pushing chunks in array \r\n            \r\n            //파일 사이즈는 처음 보내는 겍체 에만 있기때문에\r\n            //처음에는 파일사이즈가 포함되어서 오기 때문에 if문을 실행한다.\r\n            //처음이 아닌때는 파일 사이즈가 없으므로 if문을 실행을 안한다.\r\n            //그러므로 if문은 한번만 실행된다.\r\n            if(file_data.file_size!=null){\r\n                pg_div.appendChild(receive_file_name_h3);\r\n                pg_div.appendChild(pg_bar);\r\n                // receive_file_size=file_data.file_size;\r\n                \r\n                pg_bar.id=file_data.file_name;\r\n                pg_bar.className=\"w-full\";\r\n                pg_bar.max=100;\r\n                \r\n                receive_file_name_h3.className=\"text-center text-slate-500 my-3 text-2xl dark:text-white dm-transition\";\r\n                receive_file_name_h3.id=`h3-${file_data.file_name}`;\r\n                receive_file_name_h3.innerText=`${file_data.file_name}파일 전송 받는중`;\r\n            }\r\n            \r\n            \r\n            percentComplete=file_data.percentComplete;\r\n            // percentComplete=await file_progress(file_data.message.length,receive_file_size);\r\n            pg_bar.value=percentComplete;\r\n            console.log(`file_data.percentComplete:${file_data.percentComplete}`);\r\n            // console.log(`receive_file_size:${receive_file_size}`);\r\n\r\n            if (file_data.last) {\r\n                // console.log(`arrayToStoreChunks:${arrayToStoreChunks}`);\r\n                pg_bar.value=0;\r\n                // receive_file_size=0;\r\n                document.getElementById(`${file_data.file_name}`).remove();\r\n                document.getElementById(`h3-${file_data.file_name}`).remove();\r\n                saveToDisk(arrayToStoreChunks.join(''),file_data.file_name);\r\n                arrayToStoreChunks = []; // resetting array\r\n                // dataConnection.close();\r\n            }\r\n\r\n            dataConnection.on(\"close\",()=>{\r\n                console.log(\"데이터 커넥션이 닫쳤습니다.\");\r\n                arrayToStoreChunks = [];\r\n                pg_bar.value=0;\r\n                document.getElementById(`${file_data.file_name}`).remove();\r\n                document.getElementById(`h3-${file_data.file_name}`).remove();\r\n            });\r\n        });\r\n\r\n    });\r\n});\r\n\r\nmyPeer.on('disconnected', function() {\r\n    console.log(\"peerjs 서버에서 연결 종료\");\r\n    //기존에 있는 게스트 img태그 전부 가져오기\r\n    const guest_avatar_div__profile_all=document.querySelectorAll(\".guest_avatar_div__profile\");\r\n    //접속할때 마다 게스트 아바타를 전부 리셋\r\n    guest_avatar_div__profile_all.forEach((guest)=>{\r\n        guest.remove();\r\n    });\r\n    guest_avatar_div.style.display=\"none\";\r\n    none_guest_div.style.display=\"\";\r\n\r\n    myPeer.reconnect();\r\n});\r\n\r\n//peerA(크롬 브라우저)\r\nsocket.on(\"user-connected\",(userlist)=>{   \r\n    console.log(`peerA:${userlist}`);\r\n    socket.emit(\"user-connected\",ROOM_ID,userlist,addGuestAvatar);\r\n    addGuestAvatar(userlist);\r\n});\r\n\r\n//peerB(브레이브 브라우저)\r\nsocket.on(\"connected-user\",(userlist)=>{\r\n    console.log(`peerB:${userlist}`);\r\n    socket.emit(\"connected-user\",ROOM_ID,userlist);\r\n    addGuestAvatar(userlist);\r\n});\r\n\r\n\r\nsocket.on(\"user-leave\",(userList)=>{\r\n    addGuestAvatar(userList);\r\n});\r\n\r\nsocket.on(\"file-allow-request\",(sender_soket_id,target_soket_id,file_name,target_peer_id)=>{\r\n    console.log(`파일 전송을 허락을 구하는 socket의 아이디${sender_soket_id}`);\r\n    console.log(`파일이름:${file_name}를 허용하겠습니까?`);\r\n    allowFileList(sender_soket_id,target_soket_id,file_name,target_peer_id);\r\n});\r\n\r\nsocket.on(\"file-download-allow\",(targetSoketId,fileName,peerId)=>{\r\n    peerFileSend(targetSoketId,fileName,peerId);\r\n});\r\n\r\nsocket.on(\"file-download-denial\",(targetSoketId)=>{\r\n    //파일 전송 취소 아이콘\r\n    const close_icons=document.querySelector(\".guest_avatar_div__profile__close-icon\");\r\n    console.log(`다운로드 거부 targetSoketId:${targetSoketId}`);\r\n    const target_file_tag=document.getElementById(targetSoketId);\r\n    const target_div_tag=target_file_tag.parentElement;\r\n    const file_upload_icon=target_div_tag.querySelector(\"span\");\r\n    target_file_tag.value=\"\";\r\n    file_upload_icon.style.display=\"\";\r\n    //파일전송 취소 아이콘 삭제\r\n    close_icons.remove();\r\n});\r\n\r\nsocket.on(\"file-cancel-request\",(close_target_soket_id,close_sender_soket_id)=>{\r\n    const ul=document.querySelector(\"#allowFileUl\");\r\n    const targetli=ul.querySelector(`li[data-li-target-soket-id='${close_target_soket_id}']`);\r\n    console.log(\"파일 요청 캔슬 도착했습니다.\");\r\n    targetli.remove();\r\n});\r\n\r\nfunction allowFileList(sender_soket_id,target_soket_id,file_name,target_peer_id){\r\n    const div=document.createElement(\"div\");\r\n    const allowUl=document.querySelector(\"#allowFileUl\");\r\n    const li=document.createElement(\"li\");\r\n    const fileName_span=document.createElement(\"span\");\r\n    const fileAllow_icon_span=document.createElement(\"span\");\r\n    const fileDenial_icon_span=document.createElement(\"span\");\r\n    \r\n    div.className=\"flex items-center justify-center\";\r\n    \r\n    fileName_span.className=\"fileName_span\";\r\n    fileAllow_icon_span.className=\"material-icons text-[50px] dark:text-blue-700\";\r\n    fileDenial_icon_span.className=\"material-icons text-[50px] text-red-500\";\r\n    \r\n    fileName_span.innerText=file_name;\r\n\r\n    fileAllow_icon_span.innerText=\"download\";\r\n    fileDenial_icon_span.innerText=\"do_not_disturb_alt\";\r\n\r\n    fileAllow_icon_span.dataset.filename=file_name;\r\n    fileAllow_icon_span.dataset.senderSoketId=sender_soket_id;\r\n    fileAllow_icon_span.dataset.targetSoketId=target_soket_id;\r\n    fileAllow_icon_span.dataset.peerid=target_peer_id;\r\n    fileAllow_icon_span.onclick=allowFileDownload;\r\n\r\n    fileDenial_icon_span.dataset.filename=file_name;\r\n    fileDenial_icon_span.dataset.senderSoketId=sender_soket_id;\r\n    fileDenial_icon_span.dataset.targetSoketId=target_soket_id;\r\n    fileDenial_icon_span.onclick=denialFileDownload;\r\n    \r\n    li.dataset.liSenderSoketId=sender_soket_id;\r\n    li.dataset.liTargetSoketId=target_soket_id;\r\n\r\n    div.append(fileName_span);\r\n    div.append(fileAllow_icon_span);\r\n    div.append(fileDenial_icon_span);\r\n    \r\n    li.append(div);\r\n\r\n    allowUl.append(li);\r\n}\r\nfunction allowFileDownload(event){\r\n    const fileName=event.target.dataset.filename;\r\n    const senderSoketId=event.target.dataset.senderSoketId;\r\n    const targetSoketId=event.target.dataset.targetSoketId;\r\n    const peerId=event.target.dataset.peerid;\r\n    console.log(`파일 다운로드 허용 클릭${event.target.dataset.filename}`);\r\n    console.log(`파일 전송해주는 소켓 ID:${event.target.dataset.senderSoketId}`);\r\n    event.target.parentElement.remove();\r\n    socket.emit(\"file-download-allow\",senderSoketId,targetSoketId,fileName,peerId);\r\n}\r\n\r\nfunction denialFileDownload(event){\r\n    const senderSoketId=event.target.dataset.senderSoketId;\r\n    const targetSoketId=event.target.dataset.targetSoketId;\r\n    event.target.parentElement.remove();\r\n    socket.emit(\"file-download-denial\",senderSoketId,targetSoketId);\r\n}\r\n\r\nfunction fileRequestCancel(event){\r\n    const fileUploadSpan=event.target.parentElement.querySelector(\"span\");\r\n    const close_target_soket_id=event.target.dataset.closeTargetSoketId;\r\n    const close_sender_soket_id=event.target.dataset.closeSenderSoketId;\r\n    const guest_avatar_file_icon=document.querySelectorAll(\".guest_avatar_div__profile__file-icon\");\r\n    guest_avatar_file_icon.forEach((file_icon)=>{\r\n        file_icon.style.display=\"\";\r\n    });\r\n    console.log(`close_target_soket_id:${close_target_soket_id}`);\r\n    console.log(`close_sender_soket_id:${close_sender_soket_id}`);\r\n\r\n    socket.emit(\"file-cancel-request\",close_target_soket_id,close_sender_soket_id);\r\n    console.log(\"파일 전송 요청 캔슬\");\r\n    event.target.remove();\r\n\r\n    fileUploadSpan.style.display=\"\";\r\n}\r\n\r\n\r\n//게스트 아바타를 생성해주는 함수\r\nfunction addGuestAvatar(userList){\r\n\r\n    //기존에 있는 게스트 img태그 전부 가져오기\r\n    const guest_avatar_div__profile_all=document.querySelectorAll(\".guest_avatar_div__profile\");\r\n    \r\n    //접속할때 마다 게스트 아바타를 전부 리셋\r\n    guest_avatar_div__profile_all.forEach((guest)=>{\r\n        guest.remove();\r\n    });\r\n\r\n    //접속되어 있는 유저들을 이미지 태그에 표시하는 기능\r\n    userList.forEach(obj => {\r\n        console.log(obj);\r\n        const img_el=document.createElement(\"img\");\r\n        const guest_avatar_profile_el=document.createElement(\"div\");\r\n        const guest_avatar_title_el=document.createElement(\"div\");\r\n        const guest_avatar_fileicon_el=document.createElement(\"span\");\r\n\r\n        const guest_avatar_file_input_el=document.createElement(\"input\");\r\n\r\n        if(obj['peerId']!=peerId){\r\n            guest_avatar_profile_el.className=\"guest_avatar_div__profile dark:bg-white dm-transition\";\r\n            \r\n            guest_avatar_title_el.className=\"guest_avatar_div__profile__title\";\r\n            guest_avatar_title_el.innerText=`식별값:${obj['peerId']}`;\r\n            \r\n            guest_avatar_fileicon_el.className=\"material-icons guest_avatar_div__profile__file-icon\";\r\n            guest_avatar_fileicon_el.innerText=\"upload_file\";\r\n            // guest_avatar_fileicon_el.title=obj['peerId'];\r\n            guest_avatar_fileicon_el.dataset.peerid=obj['peerId'];\r\n\r\n            guest_avatar_file_input_el.type=\"file\";\r\n            guest_avatar_file_input_el.id=obj['socketId'];\r\n            guest_avatar_file_input_el.dataset.socketid=obj['socketId'];\r\n            guest_avatar_file_input_el.dataset.peerId=obj['peerId'];\r\n            guest_avatar_file_input_el.style.display=\"none\";\r\n            guest_avatar_file_input_el.multiple=\"multiple\";\r\n            \r\n            guest_avatar_file_input_el.addEventListener('change',fileChange);\r\n\r\n            img_el.src=`${avatar_api_url}/${obj['peerId']}.svg `;\r\n            img_el.className=\"guest_avatar_div__profile__img\";\r\n            img_el.title=obj['peerId'];\r\n            // img_el.id=obj['socketId'];\r\n\r\n            guest_avatar_profile_el.appendChild(img_el);\r\n            guest_avatar_profile_el.appendChild(guest_avatar_title_el);\r\n            guest_avatar_profile_el.appendChild(guest_avatar_fileicon_el);\r\n            guest_avatar_profile_el.appendChild(guest_avatar_file_input_el);\r\n\r\n            guest_avatar_div.appendChild(guest_avatar_profile_el);\r\n\r\n        }\r\n    });\r\n    \r\n    //접속유저가 없으면 유저창을 안보이게 그리고 유저가 없는 창을 보이게 한다.\r\n    if(guest_avatar_div.childElementCount===0){\r\n        guest_avatar_div.style.display=\"none\";\r\n        none_guest_div.style.display=\"\";\r\n    }else{ //접속유저가 있을 경우 유저가 없는 창을 안보이게 한다.\r\n        guest_avatar_div.style.display=\"\";\r\n        none_guest_div.style.display=\"none\";\r\n    }\r\n    //접속유저 이미지 태그를 전부 가져옵니다.\r\n    // document.querySelectorAll(\".guest_avatar_div__profile__img\").forEach((elem,index)=>{\r\n    //     //각 접속유저 이미지 태그에 click시 실행되는 함수를 추가합니다.\r\n    //     elem.addEventListener(\"click\",click_guest_avatar);\r\n    // });\r\n    document.querySelectorAll(\".guest_avatar_div__profile__file-icon\").forEach((elem,index)=>{\r\n        //각 접속유저 파일 업로드 이미지 태그에 click시 실행되는 함수를 추가합니다.\r\n        elem.addEventListener(\"click\",click_file_icon);\r\n    });\r\n}\r\n\r\n\r\n//소켓 서버에 접속시 fireBase db에서 글에 고유값을 가져옵니다.\r\n//이것이 있어야 fireBase db에 있는 room에 접속된 유저를 식별하고\r\n//브라우저 종료시 삭제가 가능합니다.\r\n// function addFireDocId(userData){\r\n//     fireDocId=userData['id'];\r\n// }\r\n\r\n// //브라우저 종료시 실행되는 함수\r\n// function winClose(){\r\n//     //브라우저가 종료되면 서버에 user-leave 함수를 실행\r\n//     socket.emit('user-leave',ROOM_ID,peerId,fireDocId);\r\n// }\r\n\r\nfunction click_file_icon(event){\r\n    try{\r\n        const peer_id=event.target.dataset.peerid;\r\n        // const soket_id=event.target.id;\r\n        // socket.emit(\"file-allow\",soket_id);\r\n        console.log(`peer_id:${peer_id}`);\r\n        const file_btn=event.target.parentElement.lastChild;\r\n        conn=myPeer.connect(peer_id);\r\n        file_btn.click();\r\n    }catch(err){\r\n        console.log(err);\r\n    }\r\n\r\n}\r\n\r\n//클릭한 아바타 값을 가져온다.\r\n// function click_guest_avatar(event){\r\n//     const guest_peer_id=event.target.title;\r\n//     conn=myPeer.connect(guest_peer_id);\r\n    \r\n//     //파일태그 클릭을 방생시키는 함수\r\n//     document.getElementById('fileUpload').click();\r\n    \r\n//     console.log(guest_peer_id);\r\n\r\n// }\r\n\r\n\r\n async function onReadAsDataURL(event,text) {\r\n    let data = {}; // data object to transmit over data channel\r\n    console.log(`file_name:${file_name}`);\r\n    \r\n    //처음 함수 시작하면 초기 세팅 값을 넣는다.\r\n    //재귀함수로 할때 event 파라미터를 null로 보내서 1번만 실행된다.\r\n    //재귀함수로 불러질때 text 파라미터는 remainingDataURL 변수(자르고 남은 파일 값)을 가진다.\r\n    if (event){\r\n        text = event.target.result; // on first invocation  \r\n        //파일이 로드 되었을때 파일 크기를 file_size에 저장\r\n        file_size=text.length;\r\n        //파일 사이즈를 peer들에게 보내기위해 객체에 저장한다.\r\n        //\r\n        data.file_size=file_size;\r\n\r\n        data.file_name=file_name;\r\n        file_progress_bar.style.display=\"\";\r\n    } \r\n        \r\n    if (text.length > chunkLength) {\r\n        data.message = text.slice(0, chunkLength); // getting chunk using predefined chunk length\r\n        //파일 청크를 보내서 진행률 계산하는 함수\r\n        const percentComplete= await file_progress(data.message.length,file_size);\r\n        \r\n        //파일청크 진행률을 peer들한테도 보내서 peer들도 파일 전송 현황을 알수 있도록\r\n        //파일을 보낼때 진행률도 같이 객체에 추가해서 보낸다.\r\n        data.percentComplete=percentComplete;\r\n\r\n        current_progress.style.width=`${percentComplete}%`;\r\n        current_progress.innerText=`${percentComplete}%`;\r\n\r\n    } else {\r\n        data.message = text;\r\n        data.last = true;\r\n        data.file_name=file_name;\r\n        //파일 청크를 보내서 진행률 계산하는 함수\r\n        // const percentComplete = await file_progress(data.message.length);\r\n        \r\n        //percentComplete을 0으로 초기화를 해야 진행률을 0으로 초기화 할수 있다.\r\n        percentComplete=0;\r\n        current_file_size=0;\r\n\r\n        //파일을 보낼때 진행률도 같이 객체에 추가해서 보낸다.\r\n        data.percentComplete=percentComplete;\r\n\r\n        //전송이 완료되었으므로 파일 보내기 아이콘을 다시 보이게 변경한다.\r\n        const guest_avatar_file_icon=document.querySelectorAll(\".guest_avatar_div__profile__file-icon\");\r\n        guest_avatar_file_icon.forEach((file_icon)=>{\r\n            file_icon.style.display=\"\";\r\n        });\r\n\r\n        const close_icons=document.querySelector(\".guest_avatar_div__profile__close-icon\");\r\n        close_icons.remove();\r\n\r\n        //전송이 완료되었으므로 파일 프로그레스바를 다시 안보이게 변경한다.\r\n        file_progress_bar.style.display=\"none\";\r\n        //전송이 완료되었으므로 프로그레스바를 0%으로 만들어준다.\r\n        current_progress.style.width=\"0%\";\r\n        //전송이 완료되었으므로 프로그레스바를 0%으로 텍스트를 변경해준디.\r\n        current_progress.innerText=\"0%\";\r\n    }\r\n    // console.log(`data:${JSON.stringify(data)}`);\r\n    conn.send(JSON.stringify(data)); // use JSON.stringify for chrome!\r\n\r\n    let remainingDataURL = text.slice(data.message.length);\r\n    if (remainingDataURL.length) setTimeout(function () {\r\n        //재귀함수 방법으로 함수를 불러냄\r\n        onReadAsDataURL(null, remainingDataURL); // continue transmitting\r\n    }, 500);\r\n}\r\n//파일 겹칠수 있을때 쓰는 랜덤 이름 생성 함수\r\nfunction randomFileId() {\r\n    return Math.random().toString(36).substr(2, 16);\r\n}\r\n\r\n//파일 세이브시 ul태그에 li태그로 추가해서 파일 다운로드 만들기\r\nasync function saveToDisk(fileUrl, fileName) {\r\n    // const ul = document.getElementById(\"fileUl\");\r\n    // const li = document.createElement(\"li\");\r\n    // const none_file_div_el=document.querySelector(\".none_file_div\");\r\n\r\n    // li.className=\"flex justify-center items-center\";\r\n\r\n    // if(none_file_div_el.childElementCount>0){\r\n    //     none_file_div_el.style.display=\"none\";\r\n    // }\r\n    const url=await dataURItoBlob(fileUrl);\r\n    file_server_download(url,fileName);\r\n    // const save = document.createElement('a');\r\n    // const download_icon_span = document.createElement(\"span\");\r\n    // const delete_icon_span= document.createElement(\"span\");\r\n    // const file_name_div=document.createElement(\"div\"); \r\n    // save.href =url;\r\n    // // save.target = '_blank';\r\n    // save.className=\"text-2xl w-3/6 no-underline dm-transition text-black  mobile:w-3/6 dark:text-white\";\r\n    // // save.download = fileName || fileUrl;\r\n    // save.addEventListener(clickEvent,file_server_download);\r\n    // // save.onclick=file_server_download;\r\n\r\n    // file_name_div.className=\"truncate\";\r\n    // file_name_div.innerText=fileName;\r\n\r\n    // save.append(file_name_div);\r\n    // // save.innerText=fileName;\r\n\r\n    // download_icon_span.className=\"material-icons text-[50px] dark:text-blue-700\";\r\n    // download_icon_span.innerText=\"download\";\r\n    // download_icon_span.addEventListener(clickEvent,file_download_icon_click);\r\n    // // download_icon_span.onclick=file_download_icon_click;\r\n\r\n    // delete_icon_span.className=\"material-icons text-[50px] text-red-500\";\r\n    // delete_icon_span.innerText=\"delete_forever\";\r\n    // delete_icon_span.onclick=file_delete_icon_click;\r\n    \r\n    // li.append(save);\r\n    // li.append(download_icon_span);\r\n    // li.append(delete_icon_span);\r\n    // ul.append(li);\r\n    \r\n    // indexedDB.addValue({\"filename\":fileName,\"size\":blobData.size,\"fileBlob\":blobData});\r\n}\r\n\r\nfunction dataURItoBlob(dataURI) {\r\n    return new Promise((resolve,reject)=>{\r\n        try{\r\n            const byteString = atob(dataURI.split(',')[1]);\r\n            const mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0]\r\n    \r\n            const ab = new ArrayBuffer(byteString.length);\r\n            let ia = new Uint8Array(ab);\r\n            \r\n            for (let i = 0; i < byteString.length; i++) {\r\n              ia[i] = byteString.charCodeAt(i);\r\n            }\r\n            const blob = new Blob([ab], {type: mimeString});\r\n            // return blob;\r\n            resolve(blob);\r\n        }catch(err){\r\n            reject(err);\r\n        }\r\n    });\r\n\r\n}\r\n\r\nfunction file_server_download(blob,filename){\r\n\r\n    const fileStream = streamSaver.createWriteStream(filename, {\r\n        size: blob.size // Makes the percentage visiable in the download\r\n    });\r\n\r\n    const readableStream = blob.stream();\r\n    \r\n    if (window.WritableStream && readableStream.pipeTo) {\r\n        return readableStream.pipeTo(fileStream)\r\n          .then(() => console.log('done writing'));\r\n    }\r\n    window.writer = fileStream.getWriter();\r\n\r\n    const reader = readableStream.getReader();\r\n\r\n    const pump = () => reader.read()\r\n    .then(res => res.done\r\n      ? writer.close()\r\n      : writer.write(res.value).then(pump))\r\n\r\n    pump();\r\n}\r\n\r\n\r\n//파일 다운로드 함수\r\n// function file_server_download(event){\r\n//     event.preventDefault();\r\n\r\n//     //a 태그의 href 값을 가져오는 변수\r\n//     const a_href=event.target.parentElement.href;\r\n//     //a 태그에 있는 div가 파일명이므로 그 텍스트를 가져온다.\r\n//     const filename=event.target.innerText;\r\n//     // saveAs(a_href, filename);\r\n//     fetch(a_href).then(r => r.blob()).then((blob)=>{\r\n//         const fileStream = streamSaver.createWriteStream(filename, {\r\n//             size: blob.size // Makes the percentage visiable in the download\r\n//         });\r\n    \r\n//         const readableStream = blob.stream();\r\n        \r\n//         if (window.WritableStream && readableStream.pipeTo) {\r\n//             return readableStream.pipeTo(fileStream)\r\n//               .then(() => console.log('done writing'));\r\n//         }\r\n//         window.writer = fileStream.getWriter();\r\n    \r\n//         const reader = readableStream.getReader();\r\n    \r\n//         const pump = () => reader.read()\r\n//         .then(res => res.done\r\n//           ? writer.close()\r\n//           : writer.write(res.value).then(pump))\r\n    \r\n//         pump();\r\n//     }).catch((err)=>{\r\n//         console.log(err);\r\n//     });\r\n// }\r\n\r\n//파일 다운로드 아이콘 클릭시 사용되는 함수\r\nfunction file_download_icon_click(event){\r\n    event.preventDefault();\r\n    const file_download_tag=event.target.previousSibling.firstChild;\r\n    file_download_tag.click();\r\n}\r\n//파일 삭제 아이콘 클릭시 사용되는 함수\r\nfunction file_delete_icon_click(event){\r\n    try{\r\n        const file_li_tag=event.target.parentElement;\r\n        const file_URL=file_li_tag.querySelector(\"a\").href;\r\n        const file_ul_tag=document.querySelector(\"#fileUl\");\r\n        console.log(`del fileName:${file_name}`);\r\n        file_li_tag.remove();\r\n        URL.revokeObjectURL(file_URL);\r\n        if(file_ul_tag.childElementCount==0){\r\n            const none_file_div=document.querySelector(\".none_file_div\");\r\n            none_file_div.style.display=\"\";\r\n        }    \r\n    }catch(err){\r\n        console.log(err);\r\n    };\r\n}\r\n\r\n\r\n// 파일 전송 진행률을 계산해주는 함수\r\nfunction file_progress(current_file_chuck,file_size){\r\n    return new Promise((resolve,reject)=>{\r\n        try{\r\n            console.log(`file_size:${file_size}`);\r\n\r\n            //현재 어디 청크까지 표시하는 변수\r\n            current_file_size=current_file_size+current_file_chuck;\r\n            //현재 어디까지 파일이 파일이 보내졌는지 보여주는 퍼센트\r\n            percentComplete =Math.floor((current_file_size / file_size)*100);\r\n        \r\n            // console.log(`current_file_size:${current_file_size}`);\r\n            resolve(percentComplete);\r\n\r\n        }catch(err){\r\n            console.log(`err:${err}`);\r\n        }\r\n    });\r\n    \r\n    // console.log(`file_size:${file_size}`);\r\n\r\n    // //현재 어디 청크까지 표시하는 변수\r\n    // current_file_size=current_file_size+current_file_chuck;\r\n    // //현재 어디까지 파일이 파일이 보내졌는지 보여주는 퍼센트\r\n    // percentComplete =Math.floor((current_file_size / file_size)*100);\r\n\r\n    // // console.log(`current_file_size:${current_file_size}`);\r\n\r\n    // file_progress_bar.style.display=\"\";\r\n    // current_progress.style.width=`${percentComplete}%`;\r\n    // current_progress.innerText=`${percentComplete}%`;\r\n\r\n    // console.log(`percentComplete:${percentComplete}%`);\r\n    \r\n    \r\n}\r\n\r\n\r\n\r\nasync function fileChange(event){\r\n    const target_soket_id=event.target.dataset.socketid;\r\n    const sender_soket_id=socket.id;\r\n    const target_peer_id=event.target.dataset.peerid;\r\n    try{\r\n        const target_file_tag=document.getElementById(target_soket_id);\r\n        const file_tag_icon=target_file_tag.parentElement.querySelector(\"span\");\r\n        const cancel_icon=document.createElement(\"span\");\r\n        cancel_icon.className=\"material-icons guest_avatar_div__profile__close-icon\";\r\n        cancel_icon.innerText=\"file_download_off\";\r\n        cancel_icon.dataset.closeTargetSoketId=target_soket_id;\r\n        cancel_icon.dataset.closeSenderSoketId=sender_soket_id;\r\n\r\n        cancel_icon.onclick=fileRequestCancel;\r\n\r\n        target_file_tag.parentElement.appendChild(cancel_icon);\r\n\r\n        file_tag_icon.style.display=\"none\";\r\n        //파일 전송중에는 다른 인원에게 전송못하도록 파일 아이콘을 안보이게 변경한다.\r\n        const guest_avatar_file_icon=document.querySelectorAll(\".guest_avatar_div__profile__file-icon\");\r\n        guest_avatar_file_icon.forEach((file_icon)=>{\r\n            file_icon.style.display=\"none\";\r\n        });\r\n        if(event.target.files.length>1){\r\n            const file_name=`${uuidv4()}_${randomFileId()}.zip`;\r\n            socket.emit(\"file-allow-request\",target_soket_id,sender_soket_id,file_name,target_peer_id);\r\n            // const zip=new JSZip();\r\n            // const zip_div=document.querySelector(\".file_zip_pg_div\");\r\n            // const zip_pg=document.querySelector(\"#zip-pg\");\r\n            // const files=event.target.files;\r\n            // for(let i=0; i<files.length; i++){\r\n            //     zip.file(files[i].name,files[i],{compression: \"DEFLATE\"});\r\n            // }\r\n            // zip.generateAsync({type:\"blob\",streamFiles: true,compression: \"DEFLATE\"},\r\n            // function updateCallback(metadata) {\r\n            //     zip_div.style.display=\"\";\r\n            //     console.log(`압축률:${metadata.percent}%`);\r\n            //     zip_pg.value=metadata.percent;\r\n            // }).then((content)=>{\r\n    \r\n            //     zip_div.style.display=\"none\";\r\n            //     zip_pg.value=0;\r\n\r\n            //     const reader = new window.FileReader();\r\n            //     console.log(`압축내용:${content}`);\r\n            //     file_name=`${uuidv4()}_${randomFileId()}.zip`;\r\n            //     reader.readAsDataURL(content);\r\n            //     reader.onload = onReadAsDataURL;\r\n            //     event.target.value=\"\";\r\n            // });\r\n        }else{\r\n            const file=event.target.files[0];\r\n            const file_name=`${uuidv4()}_${file.name}.zip`\r\n            socket.emit(\"file-allow-request\",target_soket_id,sender_soket_id,file_name,target_peer_id);\r\n            // const reader = new window.FileReader();\r\n            // const file=event.target.files[0];\r\n            // file_name=`${uuidv4()}_${file.name}`;\r\n            // reader.readAsDataURL(file);\r\n            // reader.onload = onReadAsDataURL;\r\n            // event.target.value=\"\";\r\n        }\r\n    }catch(err){\r\n        const guest_avatar_file_icon=document.querySelectorAll(\".guest_avatar_div__profile__file-icon\");\r\n        guest_avatar_file_icon.forEach((file_icon)=>{\r\n            file_icon.style.display=\"\";\r\n        });\r\n    }\r\n\r\n}\r\n\r\nasync function peerFileSend(targetSoketId,fileName,peerId){\r\n    const fileTag=document.getElementById(targetSoketId);\r\n    console.log(`senderSoketId:${targetSoketId}`);\r\n    console.log(`fileTag:${fileTag.files}`);\r\n    try{\r\n        //파일 전송중에는 다른 인원에게 전송못하도록 파일 아이콘을 안보이게 변경한다.\r\n        const guest_avatar_file_icon=document.querySelectorAll(\".guest_avatar_div__profile__file-icon\");\r\n        guest_avatar_file_icon.forEach((file_icon)=>{\r\n            file_icon.style.display=\"none\";\r\n        });\r\n        if(fileTag.files.length>1){\r\n            const zip=new JSZip();\r\n            const zip_div=document.querySelector(\".file_zip_pg_div\");\r\n            const zip_pg=document.querySelector(\"#zip-pg\");\r\n            const files=fileTag.files;\r\n            for(let i=0; i<files.length; i++){\r\n                zip.file(files[i].name,files[i],{compression: \"DEFLATE\"});\r\n            }\r\n            zip.generateAsync({type:\"blob\",streamFiles: true,compression: \"DEFLATE\"},\r\n            function updateCallback(metadata) {\r\n                zip_div.style.display=\"\";\r\n                console.log(`압축률:${metadata.percent}%`);\r\n                zip_pg.value=metadata.percent;\r\n            }).then((content)=>{\r\n                zip_div.style.display=\"none\";\r\n                zip_pg.value=0;\r\n\r\n                const reader = new window.FileReader();\r\n                console.log(`압축내용:${content}`);\r\n                file_name=fileName;\r\n                reader.readAsDataURL(content);\r\n                reader.onload = onReadAsDataURL;\r\n                fileTag.value=\"\";\r\n            });\r\n        }else{\r\n            const reader = new window.FileReader();\r\n            const file=fileTag.files[0];\r\n            file_name=fileName;\r\n            reader.readAsDataURL(file);\r\n            reader.onload =onReadAsDataURL;\r\n        }\r\n\r\n    }catch(err){\r\n        console.log(err);\r\n    }\r\n}\r\n\r\n// function generatePeerConn(peerId){\r\n//     function genrate(){\r\n//         return myPeer.connect(peerId);\r\n//     }\r\n//     return genrate;\r\n// }\r\n\r\n\r\nfunction uuidv4() {\r\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\r\n      var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\r\n      return v.toString(16);\r\n    });\r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack://web-p2p/./src/public/js/app.js?");

/***/ }),

/***/ "./src/public/js/darkMode.js":
/*!***********************************!*\
  !*** ./src/public/js/darkMode.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n// function modeSwitching(){\r\n//     const teme_mode=localStorage.getItem(\"theme\");\r\n//     if(teme_mode==\"light\"){\r\n//         document.documentElement.classList.add('dark');\r\n//         localStorage.setItem(\"theme\",\"dark\");\r\n//     }else{\r\n//         document.documentElement.classList.remove('dark');\r\n//         localStorage.setItem(\"theme\",\"light\");\r\n//     }\r\n// }\r\nfunction handleDarkMode(event){\r\n    if(event.checked==true){\r\n        document.documentElement.classList.add('dark');\r\n        localStorage.setItem(\"theme\",\"dark\");\r\n    }else{\r\n        document.documentElement.classList.remove('dark');\r\n        localStorage.setItem(\"theme\",\"light\");\r\n    }\r\n\r\n}\r\n\r\nfunction darkModeInit(){\r\n    if(localStorage.getItem(\"theme\")===null){\r\n        localStorage.setItem(\"theme\", \"light\");\r\n    }else{\r\n        const teme_mode=localStorage.getItem(\"theme\");\r\n        if(teme_mode===\"light\"){\r\n            const darkMode_input=document.getElementById(\"checkbox\");\r\n            darkMode_input.checked=false;\r\n            document.documentElement.classList.remove('dark');\r\n            localStorage.setItem(\"theme\",\"light\");\r\n        }else{\r\n            const darkMode_input=document.getElementById(\"checkbox\");\r\n            darkMode_input.checked=true;\r\n            document.documentElement.classList.add('dark');\r\n            localStorage.setItem(\"theme\",\"dark\");\r\n        }\r\n    }\r\n}\r\n\r\n// darkModeInit();\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({handleDarkMode,darkModeInit});\n\n//# sourceURL=webpack://web-p2p/./src/public/js/darkMode.js?");

/***/ }),

/***/ "./src/public/js/kakao/kakao.js":
/*!**************************************!*\
  !*** ./src/public/js/kakao/kakao.js ***!
  \**************************************/
/***/ (function(module, exports, __webpack_require__) {

eval("/* module decorator */ module = __webpack_require__.nmd(module);\n/**\r\n * Kakao SDK for JavaScript - v1.40.16\r\n *\r\n * Copyright 2017 Kakao Corp.\r\n *\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * https://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n *\r\n *\r\n * OSS Notice | KakaoSDK-Javascript\r\n *\r\n * This application is Copyright © Kakao Corp. All rights reserved.\r\n * The following sets forth attribution notices for third party software that may be contained in this application.\r\n * If you have any questions or concerns, please contact us at opensource@kakaocorp.com\r\n *\r\n *\r\n * crypto-js\r\n *\r\n * https://github.com/brix/crypto-js\r\n *\r\n * Copyright 2009-2013 Jeff Mott\r\n * Copyright 2013-2016 Evan Vosberg\r\n *\r\n * MIT License\r\n *\r\n *\r\n * easyXDM\r\n *\r\n * https://github.com/oyvindkinsey/easyXDM/\r\n *\r\n * Copyright 2009-2011 Øyvind Sean Kinsey, oyvind@kinsey.no\r\n *\r\n * MIT License\r\n *\r\n *\r\n * ES6-Promise\r\n *\r\n * https://github.com/stefanpenner/es6-promise\r\n *\r\n * Copyright 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors\r\n *\r\n * MIT License\r\n *\r\n *\r\n * Kakao Web2App Library\r\n *\r\n * https://github.com/kakao/web2app\r\n *\r\n * Copyright 2015 Kakao Corp. http://www.kakaocorp.com\r\n *\r\n * MIT License\r\n *\r\n *\r\n * lodash\r\n *\r\n * https://github.com/lodash/lodash\r\n *\r\n * Copyright JS Foundation and other contributors\r\n *\r\n * MIT License\r\n *\r\n *\r\n * ua_parser\r\n *\r\n * https://github.com/html5crew/ua_parser\r\n *\r\n * Copyright HTML5 Tech. Team in Daum Communications Corp.\r\n *\r\n * MIT License\r\n *\r\n *\r\n * ``````````\r\n * MIT License\r\n *\r\n * Copyright (c)\r\n *\r\n * Permission is hereby granted, free of charge, to any person obtaining\r\n * a copy of this software and associated documentation files (the\r\n * 'Software'), to deal in the Software without restriction, including\r\n * without limitation the rights to use, copy, modify, merge, publish,\r\n * distribute, sublicense, and/or sell copies of the Software, and to\r\n * permit persons to whom the Software is furnished to do so, subject to\r\n * the following conditions:\r\n *\r\n * The above copyright notice and this permission notice shall be\r\n * included in all copies or substantial portions of the Software.\r\n *\r\n * THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND,\r\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\n * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\r\n * IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\r\n * CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\r\n * TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\r\n * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n * ``````````\r\n */\r\n\r\n(function (global, factory) {\r\n   true ? factory(exports) :\r\n  0;\r\n}(this, (function (exports) { 'use strict';\r\n\r\n  var freeGlobal = typeof __webpack_require__.g == 'object' && __webpack_require__.g && __webpack_require__.g.Object === Object && __webpack_require__.g;\r\n\r\n  var freeSelf = typeof self == 'object' && self && self.Object === Object && self;\r\n  var root = freeGlobal || freeSelf || Function('return this')();\r\n\r\n  var Symbol$1 = root.Symbol;\r\n\r\n  var objectProto$a = Object.prototype;\r\n  var hasOwnProperty$8 = objectProto$a.hasOwnProperty;\r\n  var nativeObjectToString$1 = objectProto$a.toString;\r\n  var symToStringTag$1 = Symbol$1 ? Symbol$1.toStringTag : undefined;\r\n  function getRawTag(value) {\r\n    var isOwn = hasOwnProperty$8.call(value, symToStringTag$1),\r\n        tag = value[symToStringTag$1];\r\n    try {\r\n      value[symToStringTag$1] = undefined;\r\n      var unmasked = true;\r\n    } catch (e) {}\r\n    var result = nativeObjectToString$1.call(value);\r\n    if (unmasked) {\r\n      if (isOwn) {\r\n        value[symToStringTag$1] = tag;\r\n      } else {\r\n        delete value[symToStringTag$1];\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  var objectProto$9 = Object.prototype;\r\n  var nativeObjectToString = objectProto$9.toString;\r\n  function objectToString(value) {\r\n    return nativeObjectToString.call(value);\r\n  }\r\n\r\n  var nullTag = '[object Null]',\r\n      undefinedTag = '[object Undefined]';\r\n  var symToStringTag = Symbol$1 ? Symbol$1.toStringTag : undefined;\r\n  function baseGetTag(value) {\r\n    if (value == null) {\r\n      return value === undefined ? undefinedTag : nullTag;\r\n    }\r\n    return symToStringTag && symToStringTag in Object(value) ? getRawTag(value) : objectToString(value);\r\n  }\r\n\r\n  function isObjectLike(value) {\r\n    return value != null && typeof value == 'object';\r\n  }\r\n\r\n  var symbolTag = '[object Symbol]';\r\n  function isSymbol(value) {\r\n    return typeof value == 'symbol' || isObjectLike(value) && baseGetTag(value) == symbolTag;\r\n  }\r\n\r\n  var isArray = Array.isArray;\r\n\r\n  var reWhitespace = /\\s/;\r\n  function trimmedEndIndex(string) {\r\n    var index = string.length;\r\n    while (index-- && reWhitespace.test(string.charAt(index))) {}\r\n    return index;\r\n  }\r\n\r\n  var reTrimStart = /^\\s+/;\r\n  function baseTrim(string) {\r\n    return string ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '') : string;\r\n  }\r\n\r\n  function isObject(value) {\r\n    var type = typeof value;\r\n    return value != null && (type == 'object' || type == 'function');\r\n  }\r\n\r\n  var NAN = 0 / 0;\r\n  var reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\r\n  var reIsBinary = /^0b[01]+$/i;\r\n  var reIsOctal = /^0o[0-7]+$/i;\r\n  var freeParseInt = parseInt;\r\n  function toNumber(value) {\r\n    if (typeof value == 'number') {\r\n      return value;\r\n    }\r\n    if (isSymbol(value)) {\r\n      return NAN;\r\n    }\r\n    if (isObject(value)) {\r\n      var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\r\n      value = isObject(other) ? other + '' : other;\r\n    }\r\n    if (typeof value != 'string') {\r\n      return value === 0 ? value : +value;\r\n    }\r\n    value = baseTrim(value);\r\n    var isBinary = reIsBinary.test(value);\r\n    return isBinary || reIsOctal.test(value) ? freeParseInt(value.slice(2), isBinary ? 2 : 8) : reIsBadHex.test(value) ? NAN : +value;\r\n  }\r\n\r\n  var INFINITY = 1 / 0,\r\n      MAX_INTEGER = 1.7976931348623157e+308;\r\n  function toFinite(value) {\r\n    if (!value) {\r\n      return value === 0 ? value : 0;\r\n    }\r\n    value = toNumber(value);\r\n    if (value === INFINITY || value === -INFINITY) {\r\n      var sign = value < 0 ? -1 : 1;\r\n      return sign * MAX_INTEGER;\r\n    }\r\n    return value === value ? value : 0;\r\n  }\r\n\r\n  function toInteger(value) {\r\n    var result = toFinite(value),\r\n        remainder = result % 1;\r\n    return result === result ? remainder ? result - remainder : result : 0;\r\n  }\r\n\r\n  function identity(value) {\r\n    return value;\r\n  }\r\n\r\n  var asyncTag = '[object AsyncFunction]',\r\n      funcTag$1 = '[object Function]',\r\n      genTag = '[object GeneratorFunction]',\r\n      proxyTag = '[object Proxy]';\r\n  function isFunction(value) {\r\n    if (!isObject(value)) {\r\n      return false;\r\n    }\r\n    var tag = baseGetTag(value);\r\n    return tag == funcTag$1 || tag == genTag || tag == asyncTag || tag == proxyTag;\r\n  }\r\n\r\n  var coreJsData = root['__core-js_shared__'];\r\n\r\n  var maskSrcKey = function () {\r\n    var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\r\n    return uid ? 'Symbol(src)_1.' + uid : '';\r\n  }();\r\n  function isMasked(func) {\r\n    return !!maskSrcKey && maskSrcKey in func;\r\n  }\r\n\r\n  var funcProto$2 = Function.prototype;\r\n  var funcToString$2 = funcProto$2.toString;\r\n  function toSource(func) {\r\n    if (func != null) {\r\n      try {\r\n        return funcToString$2.call(func);\r\n      } catch (e) {}\r\n      try {\r\n        return func + '';\r\n      } catch (e) {}\r\n    }\r\n    return '';\r\n  }\r\n\r\n  var reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\r\n  var reIsHostCtor = /^\\[object .+?Constructor\\]$/;\r\n  var funcProto$1 = Function.prototype,\r\n      objectProto$8 = Object.prototype;\r\n  var funcToString$1 = funcProto$1.toString;\r\n  var hasOwnProperty$7 = objectProto$8.hasOwnProperty;\r\n  var reIsNative = RegExp('^' + funcToString$1.call(hasOwnProperty$7).replace(reRegExpChar, '\\\\$&').replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$');\r\n  function baseIsNative(value) {\r\n    if (!isObject(value) || isMasked(value)) {\r\n      return false;\r\n    }\r\n    var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\r\n    return pattern.test(toSource(value));\r\n  }\r\n\r\n  function getValue(object, key) {\r\n    return object == null ? undefined : object[key];\r\n  }\r\n\r\n  function getNative(object, key) {\r\n    var value = getValue(object, key);\r\n    return baseIsNative(value) ? value : undefined;\r\n  }\r\n\r\n  function apply(func, thisArg, args) {\r\n    switch (args.length) {\r\n      case 0:\r\n        return func.call(thisArg);\r\n      case 1:\r\n        return func.call(thisArg, args[0]);\r\n      case 2:\r\n        return func.call(thisArg, args[0], args[1]);\r\n      case 3:\r\n        return func.call(thisArg, args[0], args[1], args[2]);\r\n    }\r\n    return func.apply(thisArg, args);\r\n  }\r\n\r\n  var HOT_COUNT = 800,\r\n      HOT_SPAN = 16;\r\n  var nativeNow = Date.now;\r\n  function shortOut(func) {\r\n    var count = 0,\r\n        lastCalled = 0;\r\n    return function () {\r\n      var stamp = nativeNow(),\r\n          remaining = HOT_SPAN - (stamp - lastCalled);\r\n      lastCalled = stamp;\r\n      if (remaining > 0) {\r\n        if (++count >= HOT_COUNT) {\r\n          return arguments[0];\r\n        }\r\n      } else {\r\n        count = 0;\r\n      }\r\n      return func.apply(undefined, arguments);\r\n    };\r\n  }\r\n\r\n  function constant(value) {\r\n    return function () {\r\n      return value;\r\n    };\r\n  }\r\n\r\n  var defineProperty = function () {\r\n    try {\r\n      var func = getNative(Object, 'defineProperty');\r\n      func({}, '', {});\r\n      return func;\r\n    } catch (e) {}\r\n  }();\r\n\r\n  var baseSetToString = !defineProperty ? identity : function (func, string) {\r\n    return defineProperty(func, 'toString', {\r\n      'configurable': true,\r\n      'enumerable': false,\r\n      'value': constant(string),\r\n      'writable': true\r\n    });\r\n  };\r\n\r\n  var setToString = shortOut(baseSetToString);\r\n\r\n  function arrayEach(array, iteratee) {\r\n    var index = -1,\r\n        length = array == null ? 0 : array.length;\r\n    while (++index < length) {\r\n      if (iteratee(array[index], index, array) === false) {\r\n        break;\r\n      }\r\n    }\r\n    return array;\r\n  }\r\n\r\n  var MAX_SAFE_INTEGER$1 = 9007199254740991;\r\n  var reIsUint = /^(?:0|[1-9]\\d*)$/;\r\n  function isIndex(value, length) {\r\n    var type = typeof value;\r\n    length = length == null ? MAX_SAFE_INTEGER$1 : length;\r\n    return !!length && (type == 'number' || type != 'symbol' && reIsUint.test(value)) && value > -1 && value % 1 == 0 && value < length;\r\n  }\r\n\r\n  function baseAssignValue(object, key, value) {\r\n    if (key == '__proto__' && defineProperty) {\r\n      defineProperty(object, key, {\r\n        'configurable': true,\r\n        'enumerable': true,\r\n        'value': value,\r\n        'writable': true\r\n      });\r\n    } else {\r\n      object[key] = value;\r\n    }\r\n  }\r\n\r\n  function eq(value, other) {\r\n    return value === other || value !== value && other !== other;\r\n  }\r\n\r\n  var objectProto$7 = Object.prototype;\r\n  var hasOwnProperty$6 = objectProto$7.hasOwnProperty;\r\n  function assignValue(object, key, value) {\r\n    var objValue = object[key];\r\n    if (!(hasOwnProperty$6.call(object, key) && eq(objValue, value)) || value === undefined && !(key in object)) {\r\n      baseAssignValue(object, key, value);\r\n    }\r\n  }\r\n\r\n  function copyObject(source, props, object, customizer) {\r\n    var isNew = !object;\r\n    object || (object = {});\r\n    var index = -1,\r\n        length = props.length;\r\n    while (++index < length) {\r\n      var key = props[index];\r\n      var newValue = customizer ? customizer(object[key], source[key], key, object, source) : undefined;\r\n      if (newValue === undefined) {\r\n        newValue = source[key];\r\n      }\r\n      if (isNew) {\r\n        baseAssignValue(object, key, newValue);\r\n      } else {\r\n        assignValue(object, key, newValue);\r\n      }\r\n    }\r\n    return object;\r\n  }\r\n\r\n  var nativeMax = Math.max;\r\n  function overRest(func, start, transform) {\r\n    start = nativeMax(start === undefined ? func.length - 1 : start, 0);\r\n    return function () {\r\n      var args = arguments,\r\n          index = -1,\r\n          length = nativeMax(args.length - start, 0),\r\n          array = Array(length);\r\n      while (++index < length) {\r\n        array[index] = args[start + index];\r\n      }\r\n      index = -1;\r\n      var otherArgs = Array(start + 1);\r\n      while (++index < start) {\r\n        otherArgs[index] = args[index];\r\n      }\r\n      otherArgs[start] = transform(array);\r\n      return apply(func, this, otherArgs);\r\n    };\r\n  }\r\n\r\n  function baseRest(func, start) {\r\n    return setToString(overRest(func, start, identity), func + '');\r\n  }\r\n\r\n  var MAX_SAFE_INTEGER = 9007199254740991;\r\n  function isLength(value) {\r\n    return typeof value == 'number' && value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\r\n  }\r\n\r\n  function isArrayLike(value) {\r\n    return value != null && isLength(value.length) && !isFunction(value);\r\n  }\r\n\r\n  function isIterateeCall(value, index, object) {\r\n    if (!isObject(object)) {\r\n      return false;\r\n    }\r\n    var type = typeof index;\r\n    if (type == 'number' ? isArrayLike(object) && isIndex(index, object.length) : type == 'string' && index in object) {\r\n      return eq(object[index], value);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  function createAssigner(assigner) {\r\n    return baseRest(function (object, sources) {\r\n      var index = -1,\r\n          length = sources.length,\r\n          customizer = length > 1 ? sources[length - 1] : undefined,\r\n          guard = length > 2 ? sources[2] : undefined;\r\n      customizer = assigner.length > 3 && typeof customizer == 'function' ? (length--, customizer) : undefined;\r\n      if (guard && isIterateeCall(sources[0], sources[1], guard)) {\r\n        customizer = length < 3 ? undefined : customizer;\r\n        length = 1;\r\n      }\r\n      object = Object(object);\r\n      while (++index < length) {\r\n        var source = sources[index];\r\n        if (source) {\r\n          assigner(object, source, index, customizer);\r\n        }\r\n      }\r\n      return object;\r\n    });\r\n  }\r\n\r\n  var objectProto$6 = Object.prototype;\r\n  function isPrototype(value) {\r\n    var Ctor = value && value.constructor,\r\n        proto = typeof Ctor == 'function' && Ctor.prototype || objectProto$6;\r\n    return value === proto;\r\n  }\r\n\r\n  function baseTimes(n, iteratee) {\r\n    var index = -1,\r\n        result = Array(n);\r\n    while (++index < n) {\r\n      result[index] = iteratee(index);\r\n    }\r\n    return result;\r\n  }\r\n\r\n  var argsTag$1 = '[object Arguments]';\r\n  function baseIsArguments(value) {\r\n    return isObjectLike(value) && baseGetTag(value) == argsTag$1;\r\n  }\r\n\r\n  var objectProto$5 = Object.prototype;\r\n  var hasOwnProperty$5 = objectProto$5.hasOwnProperty;\r\n  var propertyIsEnumerable = objectProto$5.propertyIsEnumerable;\r\n  var isArguments = baseIsArguments(function () {\r\n    return arguments;\r\n  }()) ? baseIsArguments : function (value) {\r\n    return isObjectLike(value) && hasOwnProperty$5.call(value, 'callee') && !propertyIsEnumerable.call(value, 'callee');\r\n  };\r\n\r\n  function stubFalse() {\r\n    return false;\r\n  }\r\n\r\n  var freeExports$1 = typeof exports == 'object' && exports && !exports.nodeType && exports;\r\n  var freeModule$1 = freeExports$1 && \"object\" == 'object' && module && !module.nodeType && module;\r\n  var moduleExports$1 = freeModule$1 && freeModule$1.exports === freeExports$1;\r\n  var Buffer = moduleExports$1 ? root.Buffer : undefined;\r\n  var nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\r\n  var isBuffer = nativeIsBuffer || stubFalse;\r\n\r\n  var argsTag = '[object Arguments]',\r\n      arrayTag = '[object Array]',\r\n      boolTag$1 = '[object Boolean]',\r\n      dateTag = '[object Date]',\r\n      errorTag = '[object Error]',\r\n      funcTag = '[object Function]',\r\n      mapTag = '[object Map]',\r\n      numberTag$1 = '[object Number]',\r\n      objectTag$1 = '[object Object]',\r\n      regexpTag = '[object RegExp]',\r\n      setTag = '[object Set]',\r\n      stringTag$1 = '[object String]',\r\n      weakMapTag = '[object WeakMap]';\r\n  var arrayBufferTag = '[object ArrayBuffer]',\r\n      dataViewTag = '[object DataView]',\r\n      float32Tag = '[object Float32Array]',\r\n      float64Tag = '[object Float64Array]',\r\n      int8Tag = '[object Int8Array]',\r\n      int16Tag = '[object Int16Array]',\r\n      int32Tag = '[object Int32Array]',\r\n      uint8Tag = '[object Uint8Array]',\r\n      uint8ClampedTag = '[object Uint8ClampedArray]',\r\n      uint16Tag = '[object Uint16Array]',\r\n      uint32Tag = '[object Uint32Array]';\r\n  var typedArrayTags = {};\r\n  typedArrayTags[float32Tag] = typedArrayTags[float64Tag] = typedArrayTags[int8Tag] = typedArrayTags[int16Tag] = typedArrayTags[int32Tag] = typedArrayTags[uint8Tag] = typedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] = typedArrayTags[uint32Tag] = true;\r\n  typedArrayTags[argsTag] = typedArrayTags[arrayTag] = typedArrayTags[arrayBufferTag] = typedArrayTags[boolTag$1] = typedArrayTags[dataViewTag] = typedArrayTags[dateTag] = typedArrayTags[errorTag] = typedArrayTags[funcTag] = typedArrayTags[mapTag] = typedArrayTags[numberTag$1] = typedArrayTags[objectTag$1] = typedArrayTags[regexpTag] = typedArrayTags[setTag] = typedArrayTags[stringTag$1] = typedArrayTags[weakMapTag] = false;\r\n  function baseIsTypedArray(value) {\r\n    return isObjectLike(value) && isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\r\n  }\r\n\r\n  function baseUnary(func) {\r\n    return function (value) {\r\n      return func(value);\r\n    };\r\n  }\r\n\r\n  var freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\r\n  var freeModule = freeExports && \"object\" == 'object' && module && !module.nodeType && module;\r\n  var moduleExports = freeModule && freeModule.exports === freeExports;\r\n  var freeProcess = moduleExports && freeGlobal.process;\r\n  var nodeUtil = function () {\r\n    try {\r\n      var types = freeModule && freeModule.require && freeModule.require('util').types;\r\n      if (types) {\r\n        return types;\r\n      }\r\n      return freeProcess && freeProcess.binding && freeProcess.binding('util');\r\n    } catch (e) {}\r\n  }();\r\n\r\n  var nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\r\n  var isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\r\n\r\n  var objectProto$4 = Object.prototype;\r\n  var hasOwnProperty$4 = objectProto$4.hasOwnProperty;\r\n  function arrayLikeKeys(value, inherited) {\r\n    var isArr = isArray(value),\r\n        isArg = !isArr && isArguments(value),\r\n        isBuff = !isArr && !isArg && isBuffer(value),\r\n        isType = !isArr && !isArg && !isBuff && isTypedArray(value),\r\n        skipIndexes = isArr || isArg || isBuff || isType,\r\n        result = skipIndexes ? baseTimes(value.length, String) : [],\r\n        length = result.length;\r\n    for (var key in value) {\r\n      if ((inherited || hasOwnProperty$4.call(value, key)) && !(skipIndexes && (\r\n      key == 'length' ||\r\n      isBuff && (key == 'offset' || key == 'parent') ||\r\n      isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset') ||\r\n      isIndex(key, length)))) {\r\n        result.push(key);\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  function overArg(func, transform) {\r\n    return function (arg) {\r\n      return func(transform(arg));\r\n    };\r\n  }\r\n\r\n  var nativeKeys = overArg(Object.keys, Object);\r\n\r\n  var objectProto$3 = Object.prototype;\r\n  var hasOwnProperty$3 = objectProto$3.hasOwnProperty;\r\n  function baseKeys(object) {\r\n    if (!isPrototype(object)) {\r\n      return nativeKeys(object);\r\n    }\r\n    var result = [];\r\n    for (var key in Object(object)) {\r\n      if (hasOwnProperty$3.call(object, key) && key != 'constructor') {\r\n        result.push(key);\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  function keys$1(object) {\r\n    return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\r\n  }\r\n\r\n  function nativeKeysIn(object) {\r\n    var result = [];\r\n    if (object != null) {\r\n      for (var key in Object(object)) {\r\n        result.push(key);\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  var objectProto$2 = Object.prototype;\r\n  var hasOwnProperty$2 = objectProto$2.hasOwnProperty;\r\n  function baseKeysIn(object) {\r\n    if (!isObject(object)) {\r\n      return nativeKeysIn(object);\r\n    }\r\n    var isProto = isPrototype(object),\r\n        result = [];\r\n    for (var key in object) {\r\n      if (!(key == 'constructor' && (isProto || !hasOwnProperty$2.call(object, key)))) {\r\n        result.push(key);\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  function keysIn(object) {\r\n    return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\r\n  }\r\n\r\n  var assignIn = createAssigner(function (object, source) {\r\n    copyObject(source, keysIn(source), object);\r\n  });\r\n\r\n  var getPrototype = overArg(Object.getPrototypeOf, Object);\r\n\r\n  var objectTag = '[object Object]';\r\n  var funcProto = Function.prototype,\r\n      objectProto$1 = Object.prototype;\r\n  var funcToString = funcProto.toString;\r\n  var hasOwnProperty$1 = objectProto$1.hasOwnProperty;\r\n  var objectCtorString = funcToString.call(Object);\r\n  function isPlainObject(value) {\r\n    if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\r\n      return false;\r\n    }\r\n    var proto = getPrototype(value);\r\n    if (proto === null) {\r\n      return true;\r\n    }\r\n    var Ctor = hasOwnProperty$1.call(proto, 'constructor') && proto.constructor;\r\n    return typeof Ctor == 'function' && Ctor instanceof Ctor && funcToString.call(Ctor) == objectCtorString;\r\n  }\r\n\r\n  function createBaseFor(fromRight) {\r\n    return function (object, iteratee, keysFunc) {\r\n      var index = -1,\r\n          iterable = Object(object),\r\n          props = keysFunc(object),\r\n          length = props.length;\r\n      while (length--) {\r\n        var key = props[fromRight ? length : ++index];\r\n        if (iteratee(iterable[key], key, iterable) === false) {\r\n          break;\r\n        }\r\n      }\r\n      return object;\r\n    };\r\n  }\r\n\r\n  var baseFor = createBaseFor();\r\n\r\n  function baseForOwn(object, iteratee) {\r\n    return object && baseFor(object, iteratee, keys$1);\r\n  }\r\n\r\n  function createBaseEach(eachFunc, fromRight) {\r\n    return function (collection, iteratee) {\r\n      if (collection == null) {\r\n        return collection;\r\n      }\r\n      if (!isArrayLike(collection)) {\r\n        return eachFunc(collection, iteratee);\r\n      }\r\n      var length = collection.length,\r\n          index = fromRight ? length : -1,\r\n          iterable = Object(collection);\r\n      while (fromRight ? index-- : ++index < length) {\r\n        if (iteratee(iterable[index], index, iterable) === false) {\r\n          break;\r\n        }\r\n      }\r\n      return collection;\r\n    };\r\n  }\r\n\r\n  var baseEach = createBaseEach(baseForOwn);\r\n\r\n  var objectProto = Object.prototype;\r\n  var hasOwnProperty = objectProto.hasOwnProperty;\r\n  var defaults = baseRest(function (object, sources) {\r\n    object = Object(object);\r\n    var index = -1;\r\n    var length = sources.length;\r\n    var guard = length > 2 ? sources[2] : undefined;\r\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\r\n      length = 1;\r\n    }\r\n    while (++index < length) {\r\n      var source = sources[index];\r\n      var props = keysIn(source);\r\n      var propsIndex = -1;\r\n      var propsLength = props.length;\r\n      while (++propsIndex < propsLength) {\r\n        var key = props[propsIndex];\r\n        var value = object[key];\r\n        if (value === undefined || eq(value, objectProto[key]) && !hasOwnProperty.call(object, key)) {\r\n          object[key] = source[key];\r\n        }\r\n      }\r\n    }\r\n    return object;\r\n  });\r\n\r\n  function castFunction(value) {\r\n    return typeof value == 'function' ? value : identity;\r\n  }\r\n\r\n  function forEach(collection, iteratee) {\r\n    var func = isArray(collection) ? arrayEach : baseEach;\r\n    return func(collection, castFunction(iteratee));\r\n  }\r\n\r\n  var stringTag = '[object String]';\r\n  function isString(value) {\r\n    return typeof value == 'string' || !isArray(value) && isObjectLike(value) && baseGetTag(value) == stringTag;\r\n  }\r\n\r\n  var boolTag = '[object Boolean]';\r\n  function isBoolean(value) {\r\n    return value === true || value === false || isObjectLike(value) && baseGetTag(value) == boolTag;\r\n  }\r\n\r\n  function isElement(value) {\r\n    return isObjectLike(value) && value.nodeType === 1 && !isPlainObject(value);\r\n  }\r\n\r\n  function isInteger(value) {\r\n    return typeof value == 'number' && value == toInteger(value);\r\n  }\r\n\r\n  var numberTag = '[object Number]';\r\n  function isNumber(value) {\r\n    return typeof value == 'number' || isObjectLike(value) && baseGetTag(value) == numberTag;\r\n  }\r\n\r\n  function checkObjType(type) {\r\n    return function (e) {\r\n      return Object.prototype.toString.call(e) === \"[object \".concat(type, \"]\");\r\n    };\r\n  }\r\n  function isBlob(b) {\r\n    return checkObjType('Blob')(b);\r\n  }\r\n  function isFile(f) {\r\n    return checkObjType('File')(f);\r\n  }\r\n  function isFileList(fl) {\r\n    return checkObjType('FileList')(fl);\r\n  }\r\n  function isURL(u) {\r\n    var urlRegex = /(http|ftp|https):\\/\\/[\\w-]+(\\.[\\w-]+)+([\\w.,@?^=%&amp;:\\/~+#-]*[\\w@?^=%&amp;\\/~+#-])?/;\r\n    return urlRegex.test(u);\r\n  }\r\n  function isJSONString(s) {\r\n    try {\r\n      JSON.parse(s);\r\n    } catch (e) {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n  function map(arr, fn) {\r\n    return Array.prototype.slice.call(arr).map(fn);\r\n  }\r\n  function every(arr, fn) {\r\n    return Array.prototype.slice.call(arr).every(fn);\r\n  }\r\n  function difference(a0, a1) {\r\n    var arrays = [a0, a1];\r\n    return arrays.reduce(function (a, b) {\r\n      return a.filter(function (c) {\r\n        return b.indexOf(c) === -1;\r\n      });\r\n    });\r\n  }\r\n  function keys(e) {\r\n    return Object.keys(e || {});\r\n  }\r\n  function emptyFunc() {\r\n  }\r\n  function getRandomString() {\r\n    return Math.random().toString(36).slice(2);\r\n  }\r\n  function getElement(e) {\r\n    if (isElement(e)) {\r\n      return e;\r\n    } else if (isString(e)) {\r\n      return document.querySelector(e);\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n  function addEvent(target, type, callback) {\r\n    if (target.addEventListener) {\r\n      target.addEventListener(type, callback, false);\r\n    }\r\n  }\r\n  function removeEvent(target, type, callback) {\r\n    if (target.removeEventListener) {\r\n      target.removeEventListener(type, callback, false);\r\n    }\r\n  }\r\n  function buildQueryString(params) {\r\n    var encode = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\r\n    var esc = encode ? encodeURIComponent : function (e) {\r\n      return e;\r\n    };\r\n    var ret = map(keys(params), function (k) {\r\n      var v = params[k];\r\n      return esc(k) + '=' + esc(isObject(v) ? JSON.stringify(v) : v);\r\n    });\r\n    return ret.join('&');\r\n  }\r\n  function ab2str(buf) {\r\n    var bytes = Array.prototype.slice.call(new Uint8Array(buf));\r\n    return bytes.reduce(function (acc, b) {\r\n      return acc + String.fromCharCode.apply(null, [b]);\r\n    }, '');\r\n  }\r\n  function isOneOf(elements) {\r\n    if (!isArray(elements)) {\r\n      throw new Error('elements should be an Array');\r\n    }\r\n    return function (e) {\r\n      return elements.indexOf(e) > -1;\r\n    };\r\n  }\r\n  function passesOneOf(validators) {\r\n    if (!isArray(validators)) {\r\n      throw new Error('validators should be an Array');\r\n    }\r\n    return function (e) {\r\n      return validators.some(function (v) {\r\n        return v(e);\r\n      });\r\n    };\r\n  }\r\n  var localStorage = function () {\r\n    var polyfill = {\r\n      _data: {},\r\n      setItem: function setItem(id, val) {\r\n        return this._data[id] = String(val);\r\n      },\r\n      getItem: function getItem(id) {\r\n        return this._data.hasOwnProperty(id) ? this._data[id] : null;\r\n      },\r\n      removeItem: function removeItem(id) {\r\n        return delete this._data[id];\r\n      },\r\n      clear: function clear() {\r\n        return this._data = {};\r\n      }\r\n    };\r\n    try {\r\n      if ('localStorage' in window && window['localStorage'] !== null) {\r\n        window.localStorage.setItem('store', '');\r\n        window.localStorage.removeItem('store');\r\n        return window.localStorage;\r\n      } else {\r\n        return polyfill;\r\n      }\r\n    } catch (e) {\r\n      return polyfill;\r\n    }\r\n  }();\r\n\r\n  function ownKeys(object, enumerableOnly) {\r\n    var keys = Object.keys(object);\r\n\r\n    if (Object.getOwnPropertySymbols) {\r\n      var symbols = Object.getOwnPropertySymbols(object);\r\n\r\n      if (enumerableOnly) {\r\n        symbols = symbols.filter(function (sym) {\r\n          return Object.getOwnPropertyDescriptor(object, sym).enumerable;\r\n        });\r\n      }\r\n\r\n      keys.push.apply(keys, symbols);\r\n    }\r\n\r\n    return keys;\r\n  }\r\n\r\n  function _objectSpread2(target) {\r\n    for (var i = 1; i < arguments.length; i++) {\r\n      var source = arguments[i] != null ? arguments[i] : {};\r\n\r\n      if (i % 2) {\r\n        ownKeys(Object(source), true).forEach(function (key) {\r\n          _defineProperty(target, key, source[key]);\r\n        });\r\n      } else if (Object.getOwnPropertyDescriptors) {\r\n        Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\r\n      } else {\r\n        ownKeys(Object(source)).forEach(function (key) {\r\n          Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\r\n        });\r\n      }\r\n    }\r\n\r\n    return target;\r\n  }\r\n\r\n  function _typeof(obj) {\r\n    \"@babel/helpers - typeof\";\r\n\r\n    if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\r\n      _typeof = function (obj) {\r\n        return typeof obj;\r\n      };\r\n    } else {\r\n      _typeof = function (obj) {\r\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\r\n      };\r\n    }\r\n\r\n    return _typeof(obj);\r\n  }\r\n\r\n  function _classCallCheck(instance, Constructor) {\r\n    if (!(instance instanceof Constructor)) {\r\n      throw new TypeError(\"Cannot call a class as a function\");\r\n    }\r\n  }\r\n\r\n  function _defineProperties(target, props) {\r\n    for (var i = 0; i < props.length; i++) {\r\n      var descriptor = props[i];\r\n      descriptor.enumerable = descriptor.enumerable || false;\r\n      descriptor.configurable = true;\r\n      if (\"value\" in descriptor) descriptor.writable = true;\r\n      Object.defineProperty(target, descriptor.key, descriptor);\r\n    }\r\n  }\r\n\r\n  function _createClass(Constructor, protoProps, staticProps) {\r\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\r\n    if (staticProps) _defineProperties(Constructor, staticProps);\r\n    return Constructor;\r\n  }\r\n\r\n  function _defineProperty(obj, key, value) {\r\n    if (key in obj) {\r\n      Object.defineProperty(obj, key, {\r\n        value: value,\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true\r\n      });\r\n    } else {\r\n      obj[key] = value;\r\n    }\r\n\r\n    return obj;\r\n  }\r\n\r\n  function _inherits(subClass, superClass) {\r\n    if (typeof superClass !== \"function\" && superClass !== null) {\r\n      throw new TypeError(\"Super expression must either be null or a function\");\r\n    }\r\n\r\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\r\n      constructor: {\r\n        value: subClass,\r\n        writable: true,\r\n        configurable: true\r\n      }\r\n    });\r\n    if (superClass) _setPrototypeOf(subClass, superClass);\r\n  }\r\n\r\n  function _getPrototypeOf(o) {\r\n    _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\r\n      return o.__proto__ || Object.getPrototypeOf(o);\r\n    };\r\n    return _getPrototypeOf(o);\r\n  }\r\n\r\n  function _setPrototypeOf(o, p) {\r\n    _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\r\n      o.__proto__ = p;\r\n      return o;\r\n    };\r\n\r\n    return _setPrototypeOf(o, p);\r\n  }\r\n\r\n  function _isNativeReflectConstruct() {\r\n    if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\r\n    if (Reflect.construct.sham) return false;\r\n    if (typeof Proxy === \"function\") return true;\r\n\r\n    try {\r\n      Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\r\n      return true;\r\n    } catch (e) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  function _assertThisInitialized(self) {\r\n    if (self === void 0) {\r\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\r\n    }\r\n\r\n    return self;\r\n  }\r\n\r\n  function _possibleConstructorReturn(self, call) {\r\n    if (call && (typeof call === \"object\" || typeof call === \"function\")) {\r\n      return call;\r\n    }\r\n\r\n    return _assertThisInitialized(self);\r\n  }\r\n\r\n  function _createSuper(Derived) {\r\n    var hasNativeReflectConstruct = _isNativeReflectConstruct();\r\n\r\n    return function _createSuperInternal() {\r\n      var Super = _getPrototypeOf(Derived),\r\n          result;\r\n\r\n      if (hasNativeReflectConstruct) {\r\n        var NewTarget = _getPrototypeOf(this).constructor;\r\n\r\n        result = Reflect.construct(Super, arguments, NewTarget);\r\n      } else {\r\n        result = Super.apply(this, arguments);\r\n      }\r\n\r\n      return _possibleConstructorReturn(this, result);\r\n    };\r\n  }\r\n\r\n  function _slicedToArray(arr, i) {\r\n    return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\r\n  }\r\n\r\n  function _toConsumableArray(arr) {\r\n    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\r\n  }\r\n\r\n  function _arrayWithoutHoles(arr) {\r\n    if (Array.isArray(arr)) return _arrayLikeToArray(arr);\r\n  }\r\n\r\n  function _arrayWithHoles(arr) {\r\n    if (Array.isArray(arr)) return arr;\r\n  }\r\n\r\n  function _iterableToArray(iter) {\r\n    if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\r\n  }\r\n\r\n  function _iterableToArrayLimit(arr, i) {\r\n    var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\r\n\r\n    if (_i == null) return;\r\n    var _arr = [];\r\n    var _n = true;\r\n    var _d = false;\r\n\r\n    var _s, _e;\r\n\r\n    try {\r\n      for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\r\n        _arr.push(_s.value);\r\n\r\n        if (i && _arr.length === i) break;\r\n      }\r\n    } catch (err) {\r\n      _d = true;\r\n      _e = err;\r\n    } finally {\r\n      try {\r\n        if (!_n && _i[\"return\"] != null) _i[\"return\"]();\r\n      } finally {\r\n        if (_d) throw _e;\r\n      }\r\n    }\r\n\r\n    return _arr;\r\n  }\r\n\r\n  function _unsupportedIterableToArray(o, minLen) {\r\n    if (!o) return;\r\n    if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\r\n    var n = Object.prototype.toString.call(o).slice(8, -1);\r\n    if (n === \"Object\" && o.constructor) n = o.constructor.name;\r\n    if (n === \"Map\" || n === \"Set\") return Array.from(o);\r\n    if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\r\n  }\r\n\r\n  function _arrayLikeToArray(arr, len) {\r\n    if (len == null || len > arr.length) len = arr.length;\r\n\r\n    for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\r\n\r\n    return arr2;\r\n  }\r\n\r\n  function _nonIterableSpread() {\r\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\r\n  }\r\n\r\n  function _nonIterableRest() {\r\n    throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\r\n  }\r\n\r\n  var ua_parser = function () {\r\n    if (!Array.isArray) {\r\n      Array.isArray = function (arg) {\r\n        return Object.prototype.toString.call(arg) === '[object Array]';\r\n      };\r\n    }\r\n    function checkUserAgent(ua) {\r\n      var browser = {};\r\n      var match = /(dolfin)[ \\/]([\\w.]+)/.exec(ua) || /(edge)[ \\/]([\\w.]+)/.exec(ua) || /(chrome)[ \\/]([\\w.]+)/.exec(ua) || /(tizen)[ \\/]([\\w.]+)/.exec(ua) || /(opera)(?:.*version)?[ \\/]([\\w.]+)/.exec(ua) || /(webkit)(?:.*version)?[ \\/]([\\w.]+)/.exec(ua) || /(msie) ([\\w.]+)/.exec(ua) || ua.indexOf(\"compatible\") < 0 && /(mozilla)(?:.*? rv:([\\w.]+))?/.exec(ua) || [\"\", \"unknown\"];\r\n      if (match[1] === \"webkit\") {\r\n        match = /(iphone|ipad|ipod)[\\S\\s]*os ([\\w._\\-]+) like/.exec(ua) || /(android)[ \\/]([\\w._\\-]+);/.exec(ua) || [match[0], \"safari\", match[2]];\r\n      } else if (match[1] === \"mozilla\") {\r\n        if (/trident/.test(ua)) {\r\n          match[1] = \"msie\";\r\n        } else {\r\n          match[1] = \"firefox\";\r\n        }\r\n      } else if (/polaris|natebrowser|([010|011|016|017|018|019]{3}\\d{3,4}\\d{4}$)/.test(ua)) {\r\n        match[1] = \"polaris\";\r\n      }\r\n      browser[match[1]] = true;\r\n      browser.name = match[1];\r\n      browser.version = setVersion(match[2]);\r\n      return browser;\r\n    }\r\n    function setVersion(versionString) {\r\n      var version = {};\r\n      var versions = versionString ? versionString.split(/\\.|-|_/) : [\"0\", \"0\", \"0\"];\r\n      version.info = versions.join(\".\");\r\n      version.major = versions[0] || \"0\";\r\n      version.minor = versions[1] || \"0\";\r\n      version.patch = versions[2] || \"0\";\r\n      return version;\r\n    }\r\n    function checkPlatform(ua) {\r\n      if (isTablet(ua)) {\r\n        return \"tablet\";\r\n      } else if (isPc(ua)) {\r\n        return \"pc\";\r\n      } else if (isMobile(ua)) {\r\n        return \"mobile\";\r\n      } else {\r\n        return \"\";\r\n      }\r\n    }\r\n    function isPc(ua) {\r\n      if (ua.match(/linux|windows (nt|98)|macintosh|cros/) && !ua.match(/android|mobile|polaris|lgtelecom|uzard|natebrowser|ktf;|skt;/)) {\r\n        return true;\r\n      }\r\n      return false;\r\n    }\r\n    function isTablet(ua) {\r\n      if (ua.match(/ipad/) || ua.match(/android/) && !ua.match(/mobi|mini|fennec/) || ua.match(/macintosh/) && window.navigator.maxTouchPoints > 1) {\r\n        return true;\r\n      }\r\n      return false;\r\n    }\r\n    function isMobile(ua) {\r\n      if (!!ua.match(/ip(hone|od)|android.+mobile|windows (ce|phone)|blackberry|bb10|symbian|webos|firefox.+fennec|opera m(ob|in)i|tizen.+mobile|polaris|iemobile|lgtelecom|nokia|sonyericsson|dolfin|uzard|natebrowser|ktf;|skt;/)) {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    }\r\n    function checkOs(ua) {\r\n      var os = {},\r\n          match = /(iphone|ipad|ipod)[\\S\\s]*os ([\\w._\\-]+) like/.exec(ua) || (/polaris|natebrowser|([010|011|016|017|018|019]{3}\\d{3,4}\\d{4}$)/.test(ua) ? [\"\", \"polaris\", \"0.0.0\"] : false) || /(windows)(?: nt | phone(?: os){0,1} | )([\\w._\\-]+)/.exec(ua) || /(android)[ \\/]([\\w._\\-]+);/.exec(ua) || (/android/.test(ua) ? [\"\", \"android\", \"0.0.0\"] : false) || (/(windows)/.test(ua) ? [\"\", \"windows\", \"0.0.0\"] : false) || /(mac) os x ([\\w._\\-]+)/.exec(ua) || /(tizen)[ \\/]([\\w._\\-]+);/.exec(ua) || (/(linux)/.test(ua) ? [\"\", \"linux\", \"0.0.0\"] : false) || (/webos/.test(ua) ? [\"\", \"webos\", \"0.0.0\"] : false) || /(cros)(?:\\s[\\w]+\\s)([\\d._\\-]+)/.exec(ua) || /(bada)[ \\/]([\\w._\\-]+)/.exec(ua) || (/bada/.test(ua) ? [\"\", \"bada\", \"0.0.0\"] : false) || (/(rim|blackberry|bb10)/.test(ua) ? [\"\", \"blackberry\", \"0.0.0\"] : false) || [\"\", \"unknown\", \"0.0.0\"];\r\n      if (match[1] === \"iphone\" || match[1] === \"ipad\" || match[1] === \"ipod\") {\r\n        match[1] = \"ios\";\r\n      } else if (match[1] === \"windows\" && match[2] === \"98\") {\r\n        match[2] = \"0.98.0\";\r\n      }\r\n      if (match[1] === \"mac\" && typeof window !== 'undefined' && window.navigator.maxTouchPoints > 1) {\r\n        match[1] = \"ios\";\r\n      }\r\n      if (match[1] === 'cros') {\r\n        match[1] = \"chrome\";\r\n      }\r\n      os[match[1]] = true;\r\n      os.name = match[1];\r\n      os.version = setVersion(match[2]);\r\n      return os;\r\n    }\r\n    var baseAppList = ['crios', 'fxios', 'daumapps'];\r\n    function checkApp(ua, customAppList) {\r\n      var app = {},\r\n          match = null,\r\n          checkAppList = baseAppList;\r\n      if (Array.isArray(customAppList)) {\r\n        checkAppList = baseAppList.concat(customAppList);\r\n      } else if (typeof customAppList === 'string') {\r\n        checkAppList = baseAppList.concat([customAppList]);\r\n      }\r\n      for (var i = 0, len = checkAppList.length; i < len; i += 1) {\r\n        var appname = checkAppList[i];\r\n        var regex = new RegExp('(' + appname + ')[ \\\\/]([\\\\w._\\\\-]+)');\r\n        match = regex.exec(ua);\r\n        if (match) {\r\n          break;\r\n        }\r\n      }\r\n      if (!match) {\r\n        match = [\"\", \"\"];\r\n      }\r\n      if (match[1]) {\r\n        app.isApp = true;\r\n        app.name = match[1];\r\n        app.version = setVersion(match[2]);\r\n      } else {\r\n        app.isApp = false;\r\n      }\r\n      return app;\r\n    }\r\n    function getLowerUserAgent(ua) {\r\n      var lowerUa = '';\r\n      if (!ua) {\r\n        if (typeof window !== 'undefined' && window.navigator && typeof window.navigator.userAgent === 'string') {\r\n          lowerUa = window.navigator.userAgent.toLowerCase();\r\n        } else {\r\n          lowerUa = '';\r\n        }\r\n      } else {\r\n        lowerUa = ua.toLowerCase();\r\n      }\r\n      return lowerUa;\r\n    }\r\n    var userAgent = function userAgent(ua, customAppList) {\r\n      var lowerUa = getLowerUserAgent(ua);\r\n      return {\r\n        ua: lowerUa,\r\n        browser: checkUserAgent(lowerUa),\r\n        platform: checkPlatform(lowerUa),\r\n        os: checkOs(lowerUa),\r\n        app: checkApp(lowerUa, customAppList)\r\n      };\r\n    };\r\n    return userAgent;\r\n  }();\r\n\r\n  var UA$1 = ua_parser();\r\n  function getOrigin() {\r\n    var _location = location,\r\n        protocol = _location.protocol,\r\n        hostname = _location.hostname,\r\n        port = _location.port;\r\n    return \"\".concat(protocol, \"//\").concat(hostname).concat(port ? ':' + port : '');\r\n  }\r\n  function getNavigator() {\r\n    return navigator;\r\n  }\r\n  function getUA() {\r\n    return UA$1;\r\n  }\r\n\r\n  var ACCOUNT = \"https://accounts.kakao.com\";\r\n  var AUTH = \"https://kauth.kakao.com\";\r\n  var API$1 = \"https://kapi.kakao.com\";\r\n  var SHARER_DOMAIN = \"https://sharer.kakao.com\";\r\n  var PICKER_DOMAIN = \"https://friend-picker.kakao.com\";\r\n  var APPS_DOMAIN = \"https://apps.kakao.com\";\r\n  var CHANNEL = \"https://pf.kakao.com\";\r\n  var STORY = \"https://story.kakao.com\";\r\n  var STORY_POST_SCHEME = \"storylink://posting\";\r\n  var REDIRECT_URI = \"JS-SDK\";\r\n  var UNIVERSAL_LINK = \"https://talk-apps.kakao.com\";\r\n  var TALK_LOGIN_SCHEME = \"kakaokompassauth://authorize\";\r\n  var TALK_LOGIN_REDIRECT_URI = \"https://kapi.kakao.com/cors/afterlogin.html\";\r\n  var TALK_INAPP_SCHEME = \"kakaotalk://inappbrowser\";\r\n  var TALK_SYNCPLUGIN_SCHEME = \"kakaotalk://bizplugin?plugin_id=6011263b74fc2b49c73a7298\";\r\n  var TALK_LINK_SCHEME = \"kakaolink://send\";\r\n  var TALK_ANDROID_PACKAGE = \"com.kakao.talk\";\r\n  var NAVI_SCHEME = \"kakaonavi-sdk://\";\r\n  var NAVI_WEB_URL = \"https://kakaonavi-wguide.kakao.com/openapi\";\r\n  var DEVELOPERS = \"https://developers.kakao.com\";\r\n\r\n  var origin = getOrigin();\r\n  var UA = getUA();\r\n  var isTalkWebview = /KAKAOTALK/i.test(UA.ua);\r\n  var VERSION = \"1.40.16\".concat('');\r\n  var navigator$1 = getNavigator();\r\n  var KAKAO_AGENT = [\"sdk/\".concat(VERSION), 'os/javascript', 'sdk_type/javascript', \"lang/\".concat(navigator$1.userLanguage || navigator$1.language), \"device/\".concat(navigator$1.platform.replace(/ /g, '_')), \"origin/\".concat(encodeURIComponent(origin))].join(' ');\r\n  var URL = {\r\n    accountDomain: ACCOUNT,\r\n    authDomain: AUTH,\r\n    authorize: \"\".concat(AUTH, \"/oauth/authorize\"),\r\n    loginWidget: \"\".concat(AUTH, \"/public/widget/login/kakaoLoginWidget.html\"),\r\n    redirectUri: REDIRECT_URI,\r\n    universalKakaoLink: \"\".concat(UNIVERSAL_LINK, \"/scheme/\"),\r\n    talkLoginScheme: TALK_LOGIN_SCHEME,\r\n    talkLoginRedirectUri: TALK_LOGIN_REDIRECT_URI,\r\n    talkInappScheme: TALK_INAPP_SCHEME,\r\n    talkSyncpluginScheme: TALK_SYNCPLUGIN_SCHEME,\r\n    apiRemote: \"\".concat(API$1, \"/cors/\"),\r\n    sharerDomain: SHARER_DOMAIN,\r\n    pickerDomain: PICKER_DOMAIN,\r\n    appsDomain: APPS_DOMAIN,\r\n    talkLinkScheme: TALK_LINK_SCHEME,\r\n    talkAndroidPackage: TALK_ANDROID_PACKAGE,\r\n    channel: CHANNEL,\r\n    channelIcon: \"\".concat(DEVELOPERS, \"/assets/img/about/logos\"),\r\n    storyShare: \"\".concat(STORY, \"/s/share\"),\r\n    storyChannelFollow: \"\".concat(STORY, \"/s/follow\"),\r\n    storyIcon: \"\".concat(DEVELOPERS, \"/sdk/js/resources/story/icon_small.png\"),\r\n    storyPostScheme: STORY_POST_SCHEME,\r\n    naviStartScheme: \"\".concat(NAVI_SCHEME, \"navigate\"),\r\n    naviShareScheme: \"\".concat(NAVI_SCHEME, \"sharePoi\"),\r\n    naviWeb: NAVI_WEB_URL\r\n  };\r\n  var appKey$1 = null;\r\n  function getAppKey$1() {\r\n    return appKey$1;\r\n  }\r\n  function setAppKey(_appKey) {\r\n    appKey$1 = _appKey;\r\n  }\r\n  function KakaoError(message) {\r\n    Error.prototype.constructor.apply(this, arguments);\r\n    this.name = 'KakaoError';\r\n    this.message = message;\r\n  }\r\n  KakaoError.prototype = new Error();\r\n  function logDebug(obj) {\r\n  }\r\n  function makeModule(subModules) {\r\n    var module = assignIn.apply(void 0, [{\r\n      cleanup: function cleanup() {\r\n        forEach(subModules, function (e) {\r\n          return e.cleanup && e.cleanup();\r\n        });\r\n      }\r\n    }].concat(_toConsumableArray(subModules)));\r\n    return module;\r\n  }\r\n  function emptyCleanups(cleanups) {\r\n    forEach(cleanups, function (fn) {\r\n      fn();\r\n    });\r\n    cleanups.length = 0;\r\n  }\r\n  function validate(target, validator, callerMsg) {\r\n    if (validator(target) === false) {\r\n      throw new KakaoError(\"Illegal argument for \".concat(callerMsg));\r\n    }\r\n  }\r\n  function processRules() {\r\n    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\r\n    var rules = arguments.length > 1 ? arguments[1] : undefined;\r\n    var callerMsg = arguments.length > 2 ? arguments[2] : undefined;\r\n    if (!isObject(params)) {\r\n      throw new Error('params should be an Object');\r\n    }\r\n    if (isFunction(rules.before)) {\r\n      rules.before(params);\r\n    }\r\n    if (isFunction(rules.defaults)) {\r\n      defaults(params, rules.defaults(params));\r\n    } else {\r\n      defaults(params, rules.defaults);\r\n    }\r\n    var _rules$required = rules.required,\r\n        required = _rules$required === void 0 ? {} : _rules$required,\r\n        _rules$optional = rules.optional,\r\n        optional = _rules$optional === void 0 ? {} : _rules$optional;\r\n    var missingRequiredKeys = difference(keys(required), keys(params));\r\n    if (missingRequiredKeys.length > 0) {\r\n      throw new KakaoError(\"Missing required keys: \".concat(missingRequiredKeys.join(','), \" at \").concat(callerMsg));\r\n    }\r\n    var allowed = assignIn({}, required, optional);\r\n    var invalidKeys = difference(keys(params), keys(allowed));\r\n    if (invalidKeys.length > 0) {\r\n      throw new KakaoError(\"Invalid parameter keys: \".concat(invalidKeys.join(','), \" at \").concat(callerMsg));\r\n    }\r\n    forEach(params, function (value, key) {\r\n      validate(value, allowed[key], \"\\\"\".concat(key, \"\\\" in \").concat(callerMsg));\r\n    });\r\n    if (isFunction(rules.after)) {\r\n      rules.after(params);\r\n    }\r\n    return params;\r\n  }\r\n  function generateTxId() {\r\n    var tranId = Math.random().toString(36).slice(2) + getAppKey$1() + Date.now().toString(36);\r\n    return tranId.slice(0, 60);\r\n  }\r\n  function getInstallUrl(androidAppId, iOSAppId) {\r\n    if (UA.os.android) {\r\n      var referrer = JSON.stringify({\r\n        appKey: appKey$1,\r\n        KA: KAKAO_AGENT\r\n      });\r\n      return \"market://details?id=\".concat(androidAppId, \"&referrer=\").concat(referrer);\r\n    } else if (UA.os.ios) {\r\n      return \"https://itunes.apple.com/app/id\".concat(iOSAppId);\r\n    } else {\r\n      return location.href;\r\n    }\r\n  }\r\n  function guardCreateEasyXDM(createEasyXDM) {\r\n    try {\r\n      return createEasyXDM();\r\n    } catch (e) {\r\n      if (e instanceof TypeError) {\r\n        throw new KakaoError('kakao.js should be loaded from a web server');\r\n      } else {\r\n        throw new KakaoError(\"EasyXDM - \".concat(e.message));\r\n      }\r\n    }\r\n  }\r\n  var popupWindows = {};\r\n  function windowOpen(url, name, feature) {\r\n    var popupWindow = popupWindows[name];\r\n    if (popupWindow && popupWindow.close && !popupWindow.closed) {\r\n      popupWindow.close();\r\n    }\r\n    popupWindows[name] = window.open(url, name, feature);\r\n    return popupWindows[name];\r\n  }\r\n  function applyAttributes(settings, container$, mapper) {\r\n    forEach(mapper, function (value, key) {\r\n      var attr = container$.getAttribute(value);\r\n      if (attr !== null) {\r\n        settings[key] = attr === 'true' || attr === 'false' ? attr === 'true' : attr;\r\n      }\r\n    });\r\n  }\r\n  function createHiddenIframe(id, src, cleanups) {\r\n    var iframe = document.createElement('iframe');\r\n    iframe.id = iframe.name = id;\r\n    iframe.src = src;\r\n    iframe.setAttribute('style', 'border:none; width:0; height:0; display:none; overflow:hidden;');\r\n    document.body.appendChild(iframe);\r\n    cleanups.push(function () {\r\n      document.body.removeChild(iframe);\r\n    });\r\n  }\r\n  function addMessageEvent(settings, requestDomain, cleanups) {\r\n    var callback = function callback(_ref) {\r\n      var data = _ref.data,\r\n          origin = _ref.origin;\r\n      if (data && origin === requestDomain) {\r\n        var resp = JSON.parse(data);\r\n        if (resp.code) {\r\n          settings.fail(resp);\r\n        } else {\r\n          settings.success(resp);\r\n        }\r\n        settings.always(resp);\r\n        removeEvent(window, 'message', callback);\r\n      }\r\n    };\r\n    addEvent(window, 'message', callback);\r\n    cleanups.push(function () {\r\n      removeEvent(window, 'message', callback);\r\n    });\r\n  }\r\n  function openPopupAndSubmitForm(params, popupParams) {\r\n    var url = popupParams.url,\r\n        popupName = popupParams.popupName,\r\n        popupFeatures = popupParams.popupFeatures;\r\n    var popup = UA.browser.msie ? {} : windowOpen('', popupName, popupFeatures);\r\n    if (popup.focus) {\r\n      popup.focus();\r\n    }\r\n    createAndSubmitForm(params, url, popupName);\r\n    return popup;\r\n  }\r\n  function createAndSubmitForm(params, url) {\r\n    var popupName = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';\r\n    var form = document.createElement('form');\r\n    form.setAttribute('accept-charset', 'utf-8');\r\n    form.setAttribute('method', 'post');\r\n    form.setAttribute('action', url);\r\n    form.setAttribute('target', popupName);\r\n    form.setAttribute('style', 'display:none');\r\n    forEach(params, function (value, key) {\r\n      var input = document.createElement('input');\r\n      input.type = 'hidden';\r\n      input.name = key;\r\n      input.value = isString(value) ? value : JSON.stringify(value);\r\n      form.appendChild(input);\r\n    });\r\n    document.body.appendChild(form);\r\n    form.submit();\r\n    document.body.removeChild(form);\r\n  }\r\n\r\n  var eventObserverMap = {};\r\n  function subscribe(eventName, observer) {\r\n    eventObserverMap[eventName] = eventObserverMap[eventName] || [];\r\n    eventObserverMap[eventName].push(observer);\r\n  }\r\n  function unsubscribe(eventName, observer) {\r\n    var observers = eventObserverMap[eventName];\r\n    for (var i = 0; i < observers.length; i++) {\r\n      if (observers[i] === observer) {\r\n        observers.splice(i, 1);\r\n        return;\r\n      }\r\n    }\r\n  }\r\n  function dispatch(eventName) {\r\n    forEach(eventObserverMap[eventName], function (observer) {\r\n      observer();\r\n    });\r\n  }\r\n  var eventObserver = {\r\n    subscribe: subscribe,\r\n    unsubscribe: unsubscribe,\r\n    dispatch: dispatch\r\n  };\r\n\r\n  var Poller = function () {\r\n    function Poller(interval, maxCount) {\r\n      _classCallCheck(this, Poller);\r\n      this._interval = interval;\r\n      this._maxCount = maxCount;\r\n      this._count = 0;\r\n      this._stopped = false;\r\n      this._timeout = null;\r\n    }\r\n    _createClass(Poller, [{\r\n      key: \"start\",\r\n      value: function start(pollFunc, failFunc) {\r\n        this._count = 0;\r\n        this._stopped = false;\r\n        this._doPolling(pollFunc, failFunc);\r\n      }\r\n    }, {\r\n      key: \"_doPolling\",\r\n      value: function _doPolling(pollFunc, failFunc) {\r\n        var _this = this;\r\n        if (this._stopped) return;\r\n        this._timeout = setTimeout(function () {\r\n          if (++_this._count > _this._maxCount) {\r\n            failFunc();\r\n          } else {\r\n            pollFunc();\r\n            _this._doPolling(pollFunc, failFunc);\r\n          }\r\n        }, this._interval);\r\n      }\r\n    }, {\r\n      key: \"stop\",\r\n      value: function stop() {\r\n        this._stopped = true;\r\n        clearTimeout(this._timeout);\r\n      }\r\n    }]);\r\n    return Poller;\r\n  }();\r\n\r\n  var defaultCallbacks = {\r\n    success: emptyFunc,\r\n    fail: emptyFunc,\r\n    always: emptyFunc\r\n  };\r\n  var loginDefaultSettings = _objectSpread2({\r\n    throughTalk: true,\r\n    persistAccessToken: true,\r\n    persistRefreshToken: false\r\n  }, defaultCallbacks);\r\n  var loginCommonSettings = {\r\n    success: isFunction,\r\n    fail: isFunction,\r\n    always: isFunction,\r\n    persistAccessToken: isBoolean,\r\n    persistRefreshToken: isBoolean,\r\n    approvalType: isOneOf(['project']),\r\n    scope: isString,\r\n    throughTalk: isBoolean,\r\n    plusFriendPublicId: isString,\r\n    channelPublicId: isString,\r\n    serviceTerms: isString,\r\n    redirectUri: isString,\r\n    state: isString,\r\n    deviceType: isOneOf(['watch', 'tv'])\r\n  };\r\n  var shippingAddressSettings = {\r\n    optional: {\r\n      success: isFunction,\r\n      fail: isFunction,\r\n      always: isFunction,\r\n      close: isFunction,\r\n      returnUrl: isString\r\n    },\r\n    defaults: _objectSpread2(_objectSpread2({}, defaultCallbacks), {}, {\r\n      close: emptyFunc\r\n    })\r\n  };\r\n  var rules$8 = {\r\n    createLoginButton: {\r\n      required: {\r\n        container: passesOneOf([isElement, isString])\r\n      },\r\n      optional: _objectSpread2({\r\n        lang: isOneOf(['en', 'kr']),\r\n        size: isOneOf(['small', 'medium', 'large'])\r\n      }, loginCommonSettings),\r\n      defaults: _objectSpread2({\r\n        lang: 'kr',\r\n        size: 'medium'\r\n      }, loginDefaultSettings)\r\n    },\r\n    login: {\r\n      optional: loginCommonSettings,\r\n      defaults: loginDefaultSettings\r\n    },\r\n    authorize: {\r\n      optional: {\r\n        redirectUri: isString,\r\n        approvalType: isOneOf(['project']),\r\n        scope: isString,\r\n        throughTalk: isBoolean,\r\n        plusFriendPublicId: isString,\r\n        channelPublicId: isString,\r\n        serviceTerms: isString,\r\n        isPopup: isBoolean,\r\n        state: isString,\r\n        autoLogin: isBoolean,\r\n        deviceType: isOneOf(['watch', 'tv']),\r\n        prompts: isString,\r\n        reauthenticate: isBoolean,\r\n        throughSyncplugin: isBoolean,\r\n        loginHint: isString,\r\n        success: isFunction,\r\n        fail: isFunction,\r\n        always: isFunction\r\n      },\r\n      defaults: {\r\n        throughTalk: true,\r\n        isPopup: false,\r\n        reauthenticate: false,\r\n        throughSyncplugin: true,\r\n        success: emptyFunc,\r\n        fail: emptyFunc,\r\n        always: emptyFunc\r\n      }\r\n    },\r\n    autoLogin: {\r\n      optional: {\r\n        success: isFunction,\r\n        fail: isFunction,\r\n        always: isFunction\r\n      },\r\n      defaults: defaultCallbacks\r\n    },\r\n    issueAccessToken: {\r\n      required: {\r\n        code: isString,\r\n        redirectUri: isString\r\n      },\r\n      optional: {\r\n        success: isFunction,\r\n        fail: isFunction,\r\n        always: isFunction\r\n      },\r\n      defaults: defaultCallbacks\r\n    },\r\n    selectShippingAddress: shippingAddressSettings,\r\n    createShippingAddress: shippingAddressSettings,\r\n    updateShippingAddress: _objectSpread2({\r\n      required: {\r\n        addressId: isInteger\r\n      }\r\n    }, shippingAddressSettings)\r\n  };\r\n\r\n  function openLoginPopup(url) {\r\n    var LOGIN_POPUP_NAME = '_blank';\r\n    return windowOpen(url, LOGIN_POPUP_NAME, getLoginPopupFeatures());\r\n  }\r\n  function getLoginPopupFeatures() {\r\n    var popupWidth = 480;\r\n    var popupHeight = 700;\r\n    var sLeft = window.screenLeft ? window.screenLeft : window.screenX ? window.screenX : 0;\r\n    var sTop = window.screenTop ? window.screenTop : window.screenY ? window.screenY : 0;\r\n    var popupLeft = screen.width / 2 - popupWidth / 2 + sLeft;\r\n    var popupTop = screen.height / 2 - popupHeight / 2 + sTop;\r\n    return [\"width=\".concat(popupWidth), \"height=\".concat(popupHeight), \"left=\".concat(popupLeft), \"top=\".concat(popupTop), 'scrollbars=yes', 'resizable=1'].join(',');\r\n  }\r\n  function makeAuthUrl(params) {\r\n    return \"\".concat(URL.authorize, \"?\").concat(buildQueryString(params));\r\n  }\r\n  function makeAuthParams(settings) {\r\n    var params = {\r\n      client_id: getAppKey$1()\r\n    };\r\n    if (settings.approvalType) {\r\n      params['approval_type'] = settings.approvalType;\r\n    }\r\n    if (settings.scope) {\r\n      params['scope'] = settings.scope;\r\n    }\r\n    if (settings.state) {\r\n      params['state'] = settings.state;\r\n    }\r\n    return params;\r\n  }\r\n  function makeAuthExtraParams(settings) {\r\n    var params = {};\r\n    if (settings.plusFriendPublicId) {\r\n      params['extra.plus_friend_public_id'] = settings.plusFriendPublicId;\r\n    }\r\n    if (settings.channelPublicId) {\r\n      params['channel_public_id'] = settings.channelPublicId;\r\n    }\r\n    if (settings.serviceTerms) {\r\n      params['extra.service_terms'] = settings.serviceTerms;\r\n    }\r\n    if (settings.autoLogin) {\r\n      params['prompt'] = 'none';\r\n    }\r\n    if (settings.reauthenticate) {\r\n      params['prompt'] = 'login';\r\n    }\r\n    if (settings.prompts) {\r\n      params['prompt'] = settings.prompts;\r\n    }\r\n    if (settings.deviceType) {\r\n      params['device_type'] = settings.deviceType;\r\n    }\r\n    if (settings.loginHint) {\r\n      params['login_hint'] = settings.loginHint;\r\n    }\r\n    return params;\r\n  }\r\n  function runAuthCallback(settings, resp) {\r\n    if (resp.error) {\r\n      settings.fail(resp);\r\n    } else {\r\n      settings.success(resp);\r\n    }\r\n    settings.always(resp);\r\n  }\r\n\r\n  function checkAuthorize(url, onResponse) {\r\n    request$7({\r\n      method: 'GET',\r\n      url: url\r\n    }, onResponse);\r\n  }\r\n  function request$7(req, onResponse) {\r\n    var url = req.url,\r\n        method = req.method,\r\n        data = req.data;\r\n    var xhr = new XMLHttpRequest();\r\n    if (typeof xhr.withCredentials !== 'undefined') {\r\n      xhr.open(method, url);\r\n      xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\r\n      xhr.onreadystatechange = function () {\r\n        if (xhr.readyState === XMLHttpRequest.DONE && xhr.status === 200) {\r\n          onResponse(xhr);\r\n        }\r\n      };\r\n      xhr.send(data);\r\n    } else {\r\n      var xdr = new XDomainRequest();\r\n      xdr.open(method.toLowerCase(), url);\r\n      xdr.onload = function () {\r\n        onResponse({\r\n          status: xdr.responseText ? 200 : 'error',\r\n          response: xdr.responseText\r\n        });\r\n      };\r\n      setTimeout(function () {\r\n        xdr.send(data);\r\n      }, 0);\r\n    }\r\n  }\r\n\r\n  var poller$2 = new Poller(1000, 600);\r\n  function authorize(settings) {\r\n    settings = processRules(settings, rules$8.authorize, 'Auth.authorize');\r\n    if (settings.autoLogin && !isTalkWebview) {\r\n      handleResponse(settings, {\r\n        error: 'auto_login',\r\n        error_description: 'NOT_SUPPORTED_BROWSER'\r\n      });\r\n      return false;\r\n    }\r\n    var authTranId = generateTxId();\r\n    var baseAuthParams = assignIn({}, makeAuthParams(settings), makeAuthExtraParams(settings), {\r\n      redirect_uri: settings.redirectUri || URL.redirectUri,\r\n      response_type: 'code',\r\n      auth_tran_id: authTranId\r\n    });\r\n    var webAuthParams = assignIn({}, baseAuthParams, {\r\n      ka: KAKAO_AGENT,\r\n      is_popup: settings.isPopup\r\n    });\r\n    var isEasyLogin = isSupportEasyLogin(settings);\r\n    var isSupportSyncplugin = isTalkChannelHome(settings);\r\n    var webAuthUrl = makeAuthUrl(webAuthParams);\r\n    var loginUrl = isEasyLogin ? makeEasyLoginUrl(settings, baseAuthParams, webAuthUrl) : webAuthUrl;\r\n    var popup = null;\r\n    if (isSupportSyncplugin) {\r\n      executeSyncpluginScheme(baseAuthParams);\r\n    } else if (settings.isPopup) {\r\n      popup = openLoginPopup(loginUrl);\r\n    } else {\r\n      location.href = loginUrl;\r\n    }\r\n    if (isEasyLogin || isSupportSyncplugin || settings.isPopup) {\r\n      poller$2.start(function () {\r\n        var params = {\r\n          client_id: getAppKey$1(),\r\n          auth_tran_id: authTranId,\r\n          ka: KAKAO_AGENT\r\n        };\r\n        checkAuthorize(\"\".concat(URL.authDomain, \"/apiweb/code.json?\").concat(buildQueryString(params)), function (httpResp) {\r\n          var isValidResp = onResponse(settings, httpResp);\r\n          if (isValidResp) {\r\n            poller$2.stop();\r\n            popup && popup.close && popup.close();\r\n          }\r\n          if (!isEasyLogin && popup && popup.closed) {\r\n            poller$2.stop();\r\n          }\r\n        });\r\n      }, function () {\r\n        handleResponse(settings, {\r\n          error: 'timeout',\r\n          error_description: 'LOGIN_TIMEOUT'\r\n        });\r\n      });\r\n    }\r\n    eventObserver.dispatch('LOGIN_START');\r\n  }\r\n  function isSupportEasyLogin(settings) {\r\n    var isInAppBrowser = UA.os.ios || UA.os.android ? isTalkWebview : false;\r\n    var isAccountLogin = settings.reauthenticate === true || settings.prompts && settings.prompts.indexOf('login') > -1;\r\n    var isAutoLogin = settings.autoLogin === true || settings.prompts && settings.prompts.indexOf('none') > -1;\r\n    return !isInAppBrowser && !isAccountLogin && settings.throughTalk === true && !isAutoLogin;\r\n  }\r\n  function onResponse(settings, httpResp) {\r\n    if (httpResp.status === 200 && httpResp.response) {\r\n      var resp = JSON.parse(httpResp.response);\r\n      if (resp.status === 'ok' && resp.code) {\r\n        handleResponse(settings, {\r\n          code: resp.code\r\n        });\r\n        return true;\r\n      } else if (resp.status === 'error' && resp.error_code && resp.error_code !== '300') {\r\n        handleResponse(settings, {\r\n          error: resp.error,\r\n          error_description: resp.error_description\r\n        });\r\n        if (resp.error_code === '700') {\r\n          location.href = \"\".concat(URL.authDomain, \"/error/network\");\r\n        }\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n  function handleResponse(settings, respObj) {\r\n    if (settings.state) {\r\n      respObj.state = settings.state;\r\n    }\r\n    if (settings.redirectUri) {\r\n      location.href = \"\".concat(settings.redirectUri, \"?\").concat(buildQueryString(respObj));\r\n    } else {\r\n      runAuthCallback(settings, respObj);\r\n    }\r\n  }\r\n  function makeEasyLoginUrl(settings, baseAuthParams, fallbackUrl) {\r\n    var easyLoginAuthParams = assignIn({}, baseAuthParams, {\r\n      is_popup: true\r\n    });\r\n    var getAndroidLoginIntent = function getAndroidLoginIntent() {\r\n      var intent = ['intent:#Intent', 'action=com.kakao.talk.intent.action.CAPRI_LOGGED_IN_ACTIVITY', 'launchFlags=0x08880000', \"S.com.kakao.sdk.talk.appKey=\".concat(getAppKey$1()), \"S.com.kakao.sdk.talk.redirectUri=\".concat(easyLoginAuthParams.redirect_uri), \"S.com.kakao.sdk.talk.kaHeader=\".concat(KAKAO_AGENT), \"S.com.kakao.sdk.talk.extraparams=\".concat(encodeURIComponent(JSON.stringify(easyLoginAuthParams)))];\r\n      if (settings.state) {\r\n        intent.push(\"S.com.kakao.sdk.talk.state=\".concat(settings.state));\r\n      }\r\n      return intent.concat([\"S.browser_fallback_url=\".concat(encodeURIComponent(fallbackUrl)), 'end;']).join(';');\r\n    };\r\n    var getIosLoginUniversalLink = function getIosLoginUniversalLink() {\r\n      var iosLoginUrl = makeAuthUrl(easyLoginAuthParams);\r\n      var iosFallbackUrl = settings.isPopup ? iosLoginUrl : fallbackUrl;\r\n      var iosEasyLoginUrl = \"\".concat(iosLoginUrl, \"&ka=\").concat(encodeURIComponent(KAKAO_AGENT));\r\n      var talkWebviewUrl = \"\".concat(URL.talkInappScheme, \"?url=\").concat(encodeURIComponent(iosEasyLoginUrl));\r\n      return \"\".concat(URL.universalKakaoLink).concat(encodeURIComponent(talkWebviewUrl), \"&web=\").concat(encodeURIComponent(iosFallbackUrl));\r\n    };\r\n    return UA.os.android ? getAndroidLoginIntent() : getIosLoginUniversalLink();\r\n  }\r\n  function isTalkChannelHome(settings) {\r\n    return settings.throughSyncplugin && isTalkWebview && /ch-home/i.test(UA.ua);\r\n  }\r\n  function executeSyncpluginScheme(baseAuthParams) {\r\n    var bizpluginParams = assignIn({}, baseAuthParams, {\r\n      ka: KAKAO_AGENT,\r\n      is_popup: true,\r\n      approval_window_type: 'v4_bizplugin'\r\n    });\r\n    var query = encodeURIComponent(buildQueryString(bizpluginParams));\r\n    location.href = \"\".concat(URL.talkSyncpluginScheme, \"&query=\").concat(query);\r\n  }\r\n\r\n  var oauth = /*#__PURE__*/Object.freeze({\r\n    __proto__: null,\r\n    authorize: authorize\r\n  });\r\n\r\n  function isAndroidWebView() {\r\n    return UA.os.android && (olderAndroidWebView() || oldAndroidWebView() || newerAndroidWebView());\r\n  }\r\n  function olderAndroidWebView() {\r\n    return UA.os.version.major == 2 && /Version\\/\\d+.\\d+|/i.test(UA.ua);\r\n  }\r\n  function oldAndroidWebView() {\r\n    return UA.os.version.major == 4 && UA.os.version.minor < 4 && /Version\\/\\d+.\\d+|/i.test(UA.ua);\r\n  }\r\n  function newerAndroidWebView() {\r\n    return /Version\\/\\d+\\.\\d+/i.test(UA.ua) && (/Chrome\\/\\d+\\.\\d+\\.\\d+\\.\\d+ Mobile/i.test(UA.ua) || /; wv\\)/i.test(UA.ua));\r\n  }\r\n  function isIOSKakaoTalkWebView() {\r\n    return UA.os.ios && isTalkWebview;\r\n  }\r\n  function isAndroidKakaoTalkWebView() {\r\n    return UA.os.android && isTalkWebview;\r\n  }\r\n  function isNewerAndroidKakaoTalkWebView() {\r\n    return UA.os.android && isTalkWebview && UA.browser.chrome && UA.browser.version.major >= 71;\r\n  }\r\n\r\n  var commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof __webpack_require__.g !== 'undefined' ? __webpack_require__.g : typeof self !== 'undefined' ? self : {};\r\n\r\n  function createCommonjsModule(fn) {\r\n    var module = { exports: {} };\r\n  \treturn fn(module, module.exports), module.exports;\r\n  }\r\n\r\n  function commonjsRequire (target) {\r\n  \tthrow new Error('Could not dynamically require \"' + target + '\". Please configure the dynamicRequireTargets option of @rollup/plugin-commonjs appropriately for this require call to behave properly.');\r\n  }\r\n\r\n  var es6Promise = createCommonjsModule(function (module, exports) {\r\n    (function (global, factory) {\r\n      module.exports = factory() ;\r\n    })(commonjsGlobal, function () {\r\n      function objectOrFunction(x) {\r\n        var type = typeof x;\r\n        return x !== null && (type === 'object' || type === 'function');\r\n      }\r\n      function isFunction(x) {\r\n        return typeof x === 'function';\r\n      }\r\n      var _isArray = void 0;\r\n      if (Array.isArray) {\r\n        _isArray = Array.isArray;\r\n      } else {\r\n        _isArray = function (x) {\r\n          return Object.prototype.toString.call(x) === '[object Array]';\r\n        };\r\n      }\r\n      var isArray = _isArray;\r\n      var len = 0;\r\n      var vertxNext = void 0;\r\n      var customSchedulerFn = void 0;\r\n      var asap = function asap(callback, arg) {\r\n        queue[len] = callback;\r\n        queue[len + 1] = arg;\r\n        len += 2;\r\n        if (len === 2) {\r\n          if (customSchedulerFn) {\r\n            customSchedulerFn(flush);\r\n          } else {\r\n            scheduleFlush();\r\n          }\r\n        }\r\n      };\r\n      function setScheduler(scheduleFn) {\r\n        customSchedulerFn = scheduleFn;\r\n      }\r\n      function setAsap(asapFn) {\r\n        asap = asapFn;\r\n      }\r\n      var browserWindow = typeof window !== 'undefined' ? window : undefined;\r\n      var browserGlobal = browserWindow || {};\r\n      var BrowserMutationObserver = browserGlobal.MutationObserver || browserGlobal.WebKitMutationObserver;\r\n      var isNode = typeof self === 'undefined' && typeof process !== 'undefined' && {}.toString.call(process) === '[object process]';\r\n      var isWorker = typeof Uint8ClampedArray !== 'undefined' && typeof importScripts !== 'undefined' && typeof MessageChannel !== 'undefined';\r\n      function useNextTick() {\r\n        return function () {\r\n          return process.nextTick(flush);\r\n        };\r\n      }\r\n      function useVertxTimer() {\r\n        if (typeof vertxNext !== 'undefined') {\r\n          return function () {\r\n            vertxNext(flush);\r\n          };\r\n        }\r\n        return useSetTimeout();\r\n      }\r\n      function useMutationObserver() {\r\n        var iterations = 0;\r\n        var observer = new BrowserMutationObserver(flush);\r\n        var node = document.createTextNode('');\r\n        observer.observe(node, {\r\n          characterData: true\r\n        });\r\n        return function () {\r\n          node.data = iterations = ++iterations % 2;\r\n        };\r\n      }\r\n      function useMessageChannel() {\r\n        var channel = new MessageChannel();\r\n        channel.port1.onmessage = flush;\r\n        return function () {\r\n          return channel.port2.postMessage(0);\r\n        };\r\n      }\r\n      function useSetTimeout() {\r\n        var globalSetTimeout = setTimeout;\r\n        return function () {\r\n          return globalSetTimeout(flush, 1);\r\n        };\r\n      }\r\n      var queue = new Array(1000);\r\n      function flush() {\r\n        for (var i = 0; i < len; i += 2) {\r\n          var callback = queue[i];\r\n          var arg = queue[i + 1];\r\n          callback(arg);\r\n          queue[i] = undefined;\r\n          queue[i + 1] = undefined;\r\n        }\r\n        len = 0;\r\n      }\r\n      function attemptVertx() {\r\n        try {\r\n          var vertx = Function('return this')().require('vertx');\r\n          vertxNext = vertx.runOnLoop || vertx.runOnContext;\r\n          return useVertxTimer();\r\n        } catch (e) {\r\n          return useSetTimeout();\r\n        }\r\n      }\r\n      var scheduleFlush = void 0;\r\n      if (isNode) {\r\n        scheduleFlush = useNextTick();\r\n      } else if (BrowserMutationObserver) {\r\n        scheduleFlush = useMutationObserver();\r\n      } else if (isWorker) {\r\n        scheduleFlush = useMessageChannel();\r\n      } else if (browserWindow === undefined && typeof commonjsRequire === 'function') {\r\n        scheduleFlush = attemptVertx();\r\n      } else {\r\n        scheduleFlush = useSetTimeout();\r\n      }\r\n      function then(onFulfillment, onRejection) {\r\n        var parent = this;\r\n        var child = new this.constructor(noop);\r\n        if (child[PROMISE_ID] === undefined) {\r\n          makePromise(child);\r\n        }\r\n        var _state = parent._state;\r\n        if (_state) {\r\n          var callback = arguments[_state - 1];\r\n          asap(function () {\r\n            return invokeCallback(_state, child, callback, parent._result);\r\n          });\r\n        } else {\r\n          subscribe(parent, child, onFulfillment, onRejection);\r\n        }\r\n        return child;\r\n      }\r\n      function resolve$1(object) {\r\n        var Constructor = this;\r\n        if (object && typeof object === 'object' && object.constructor === Constructor) {\r\n          return object;\r\n        }\r\n        var promise = new Constructor(noop);\r\n        resolve(promise, object);\r\n        return promise;\r\n      }\r\n      var PROMISE_ID = Math.random().toString(36).substring(2);\r\n      function noop() {}\r\n      var PENDING = void 0;\r\n      var FULFILLED = 1;\r\n      var REJECTED = 2;\r\n      function selfFulfillment() {\r\n        return new TypeError(\"You cannot resolve a promise with itself\");\r\n      }\r\n      function cannotReturnOwn() {\r\n        return new TypeError('A promises callback cannot return that same promise.');\r\n      }\r\n      function tryThen(then$$1, value, fulfillmentHandler, rejectionHandler) {\r\n        try {\r\n          then$$1.call(value, fulfillmentHandler, rejectionHandler);\r\n        } catch (e) {\r\n          return e;\r\n        }\r\n      }\r\n      function handleForeignThenable(promise, thenable, then$$1) {\r\n        asap(function (promise) {\r\n          var sealed = false;\r\n          var error = tryThen(then$$1, thenable, function (value) {\r\n            if (sealed) {\r\n              return;\r\n            }\r\n            sealed = true;\r\n            if (thenable !== value) {\r\n              resolve(promise, value);\r\n            } else {\r\n              fulfill(promise, value);\r\n            }\r\n          }, function (reason) {\r\n            if (sealed) {\r\n              return;\r\n            }\r\n            sealed = true;\r\n            reject(promise, reason);\r\n          }, 'Settle: ' + (promise._label || ' unknown promise'));\r\n          if (!sealed && error) {\r\n            sealed = true;\r\n            reject(promise, error);\r\n          }\r\n        }, promise);\r\n      }\r\n      function handleOwnThenable(promise, thenable) {\r\n        if (thenable._state === FULFILLED) {\r\n          fulfill(promise, thenable._result);\r\n        } else if (thenable._state === REJECTED) {\r\n          reject(promise, thenable._result);\r\n        } else {\r\n          subscribe(thenable, undefined, function (value) {\r\n            return resolve(promise, value);\r\n          }, function (reason) {\r\n            return reject(promise, reason);\r\n          });\r\n        }\r\n      }\r\n      function handleMaybeThenable(promise, maybeThenable, then$$1) {\r\n        if (maybeThenable.constructor === promise.constructor && then$$1 === then && maybeThenable.constructor.resolve === resolve$1) {\r\n          handleOwnThenable(promise, maybeThenable);\r\n        } else {\r\n          if (then$$1 === undefined) {\r\n            fulfill(promise, maybeThenable);\r\n          } else if (isFunction(then$$1)) {\r\n            handleForeignThenable(promise, maybeThenable, then$$1);\r\n          } else {\r\n            fulfill(promise, maybeThenable);\r\n          }\r\n        }\r\n      }\r\n      function resolve(promise, value) {\r\n        if (promise === value) {\r\n          reject(promise, selfFulfillment());\r\n        } else if (objectOrFunction(value)) {\r\n          var then$$1 = void 0;\r\n          try {\r\n            then$$1 = value.then;\r\n          } catch (error) {\r\n            reject(promise, error);\r\n            return;\r\n          }\r\n          handleMaybeThenable(promise, value, then$$1);\r\n        } else {\r\n          fulfill(promise, value);\r\n        }\r\n      }\r\n      function publishRejection(promise) {\r\n        if (promise._onerror) {\r\n          promise._onerror(promise._result);\r\n        }\r\n        publish(promise);\r\n      }\r\n      function fulfill(promise, value) {\r\n        if (promise._state !== PENDING) {\r\n          return;\r\n        }\r\n        promise._result = value;\r\n        promise._state = FULFILLED;\r\n        if (promise._subscribers.length !== 0) {\r\n          asap(publish, promise);\r\n        }\r\n      }\r\n      function reject(promise, reason) {\r\n        if (promise._state !== PENDING) {\r\n          return;\r\n        }\r\n        promise._state = REJECTED;\r\n        promise._result = reason;\r\n        asap(publishRejection, promise);\r\n      }\r\n      function subscribe(parent, child, onFulfillment, onRejection) {\r\n        var _subscribers = parent._subscribers;\r\n        var length = _subscribers.length;\r\n        parent._onerror = null;\r\n        _subscribers[length] = child;\r\n        _subscribers[length + FULFILLED] = onFulfillment;\r\n        _subscribers[length + REJECTED] = onRejection;\r\n        if (length === 0 && parent._state) {\r\n          asap(publish, parent);\r\n        }\r\n      }\r\n      function publish(promise) {\r\n        var subscribers = promise._subscribers;\r\n        var settled = promise._state;\r\n        if (subscribers.length === 0) {\r\n          return;\r\n        }\r\n        var child = void 0,\r\n            callback = void 0,\r\n            detail = promise._result;\r\n        for (var i = 0; i < subscribers.length; i += 3) {\r\n          child = subscribers[i];\r\n          callback = subscribers[i + settled];\r\n          if (child) {\r\n            invokeCallback(settled, child, callback, detail);\r\n          } else {\r\n            callback(detail);\r\n          }\r\n        }\r\n        promise._subscribers.length = 0;\r\n      }\r\n      function invokeCallback(settled, promise, callback, detail) {\r\n        var hasCallback = isFunction(callback),\r\n            value = void 0,\r\n            error = void 0,\r\n            succeeded = true;\r\n        if (hasCallback) {\r\n          try {\r\n            value = callback(detail);\r\n          } catch (e) {\r\n            succeeded = false;\r\n            error = e;\r\n          }\r\n          if (promise === value) {\r\n            reject(promise, cannotReturnOwn());\r\n            return;\r\n          }\r\n        } else {\r\n          value = detail;\r\n        }\r\n        if (promise._state !== PENDING) ; else if (hasCallback && succeeded) {\r\n          resolve(promise, value);\r\n        } else if (succeeded === false) {\r\n          reject(promise, error);\r\n        } else if (settled === FULFILLED) {\r\n          fulfill(promise, value);\r\n        } else if (settled === REJECTED) {\r\n          reject(promise, value);\r\n        }\r\n      }\r\n      function initializePromise(promise, resolver) {\r\n        try {\r\n          resolver(function resolvePromise(value) {\r\n            resolve(promise, value);\r\n          }, function rejectPromise(reason) {\r\n            reject(promise, reason);\r\n          });\r\n        } catch (e) {\r\n          reject(promise, e);\r\n        }\r\n      }\r\n      var id = 0;\r\n      function nextId() {\r\n        return id++;\r\n      }\r\n      function makePromise(promise) {\r\n        promise[PROMISE_ID] = id++;\r\n        promise._state = undefined;\r\n        promise._result = undefined;\r\n        promise._subscribers = [];\r\n      }\r\n      function validationError() {\r\n        return new Error('Array Methods must be provided an Array');\r\n      }\r\n      var Enumerator = function () {\r\n        function Enumerator(Constructor, input) {\r\n          this._instanceConstructor = Constructor;\r\n          this.promise = new Constructor(noop);\r\n          if (!this.promise[PROMISE_ID]) {\r\n            makePromise(this.promise);\r\n          }\r\n          if (isArray(input)) {\r\n            this.length = input.length;\r\n            this._remaining = input.length;\r\n            this._result = new Array(this.length);\r\n            if (this.length === 0) {\r\n              fulfill(this.promise, this._result);\r\n            } else {\r\n              this.length = this.length || 0;\r\n              this._enumerate(input);\r\n              if (this._remaining === 0) {\r\n                fulfill(this.promise, this._result);\r\n              }\r\n            }\r\n          } else {\r\n            reject(this.promise, validationError());\r\n          }\r\n        }\r\n        Enumerator.prototype._enumerate = function _enumerate(input) {\r\n          for (var i = 0; this._state === PENDING && i < input.length; i++) {\r\n            this._eachEntry(input[i], i);\r\n          }\r\n        };\r\n        Enumerator.prototype._eachEntry = function _eachEntry(entry, i) {\r\n          var c = this._instanceConstructor;\r\n          var resolve$$1 = c.resolve;\r\n          if (resolve$$1 === resolve$1) {\r\n            var _then = void 0;\r\n            var error = void 0;\r\n            var didError = false;\r\n            try {\r\n              _then = entry.then;\r\n            } catch (e) {\r\n              didError = true;\r\n              error = e;\r\n            }\r\n            if (_then === then && entry._state !== PENDING) {\r\n              this._settledAt(entry._state, i, entry._result);\r\n            } else if (typeof _then !== 'function') {\r\n              this._remaining--;\r\n              this._result[i] = entry;\r\n            } else if (c === Promise$1) {\r\n              var promise = new c(noop);\r\n              if (didError) {\r\n                reject(promise, error);\r\n              } else {\r\n                handleMaybeThenable(promise, entry, _then);\r\n              }\r\n              this._willSettleAt(promise, i);\r\n            } else {\r\n              this._willSettleAt(new c(function (resolve$$1) {\r\n                return resolve$$1(entry);\r\n              }), i);\r\n            }\r\n          } else {\r\n            this._willSettleAt(resolve$$1(entry), i);\r\n          }\r\n        };\r\n        Enumerator.prototype._settledAt = function _settledAt(state, i, value) {\r\n          var promise = this.promise;\r\n          if (promise._state === PENDING) {\r\n            this._remaining--;\r\n            if (state === REJECTED) {\r\n              reject(promise, value);\r\n            } else {\r\n              this._result[i] = value;\r\n            }\r\n          }\r\n          if (this._remaining === 0) {\r\n            fulfill(promise, this._result);\r\n          }\r\n        };\r\n        Enumerator.prototype._willSettleAt = function _willSettleAt(promise, i) {\r\n          var enumerator = this;\r\n          subscribe(promise, undefined, function (value) {\r\n            return enumerator._settledAt(FULFILLED, i, value);\r\n          }, function (reason) {\r\n            return enumerator._settledAt(REJECTED, i, reason);\r\n          });\r\n        };\r\n        return Enumerator;\r\n      }();\r\n      function all(entries) {\r\n        return new Enumerator(this, entries).promise;\r\n      }\r\n      function race(entries) {\r\n        var Constructor = this;\r\n        if (!isArray(entries)) {\r\n          return new Constructor(function (_, reject) {\r\n            return reject(new TypeError('You must pass an array to race.'));\r\n          });\r\n        } else {\r\n          return new Constructor(function (resolve, reject) {\r\n            var length = entries.length;\r\n            for (var i = 0; i < length; i++) {\r\n              Constructor.resolve(entries[i]).then(resolve, reject);\r\n            }\r\n          });\r\n        }\r\n      }\r\n      function reject$1(reason) {\r\n        var Constructor = this;\r\n        var promise = new Constructor(noop);\r\n        reject(promise, reason);\r\n        return promise;\r\n      }\r\n      function needsResolver() {\r\n        throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');\r\n      }\r\n      function needsNew() {\r\n        throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\");\r\n      }\r\n      var Promise$1 = function () {\r\n        function Promise(resolver) {\r\n          this[PROMISE_ID] = nextId();\r\n          this._result = this._state = undefined;\r\n          this._subscribers = [];\r\n          if (noop !== resolver) {\r\n            typeof resolver !== 'function' && needsResolver();\r\n            this instanceof Promise ? initializePromise(this, resolver) : needsNew();\r\n          }\r\n        }\r\n        Promise.prototype.catch = function _catch(onRejection) {\r\n          return this.then(null, onRejection);\r\n        };\r\n        Promise.prototype.finally = function _finally(callback) {\r\n          var promise = this;\r\n          var constructor = promise.constructor;\r\n          if (isFunction(callback)) {\r\n            return promise.then(function (value) {\r\n              return constructor.resolve(callback()).then(function () {\r\n                return value;\r\n              });\r\n            }, function (reason) {\r\n              return constructor.resolve(callback()).then(function () {\r\n                throw reason;\r\n              });\r\n            });\r\n          }\r\n          return promise.then(callback, callback);\r\n        };\r\n        return Promise;\r\n      }();\r\n      Promise$1.prototype.then = then;\r\n      Promise$1.all = all;\r\n      Promise$1.race = race;\r\n      Promise$1.resolve = resolve$1;\r\n      Promise$1.reject = reject$1;\r\n      Promise$1._setScheduler = setScheduler;\r\n      Promise$1._setAsap = setAsap;\r\n      Promise$1._asap = asap;\r\n      function polyfill() {\r\n        var local = void 0;\r\n        if (typeof commonjsGlobal !== 'undefined') {\r\n          local = commonjsGlobal;\r\n        } else if (typeof self !== 'undefined') {\r\n          local = self;\r\n        } else {\r\n          try {\r\n            local = Function('return this')();\r\n          } catch (e) {\r\n            throw new Error('polyfill failed because global object is unavailable in this environment');\r\n          }\r\n        }\r\n        var P = local.Promise;\r\n        if (P) {\r\n          var promiseToString = null;\r\n          try {\r\n            promiseToString = Object.prototype.toString.call(P.resolve());\r\n          } catch (e) {\r\n          }\r\n          if (promiseToString === '[object Promise]' && !P.cast) {\r\n            return;\r\n          }\r\n        }\r\n        local.Promise = Promise$1;\r\n      }\r\n      Promise$1.polyfill = polyfill;\r\n      Promise$1.Promise = Promise$1;\r\n      return Promise$1;\r\n    });\r\n  });\r\n\r\n  var easyXDM_1 = function () {\r\n    (function (O, d, q, L, l, I) {\r\n      var b = this || O;\r\n      var o = Math.floor(Math.random() * 10000);\r\n      var r = Function.prototype;\r\n      var R = /^((http.?:)\\/\\/([^:\\/\\s]+)(:\\d+)*)/;\r\n      var S = /[\\-\\w]+\\/\\.\\.\\//;\r\n      var G = /([^:])\\/\\//g;\r\n      var J = \"\";\r\n      var p = {};\r\n      var N = O.easyXDM;\r\n      var V = \"easyXDM_\";\r\n      var F;\r\n      var z = false;\r\n      var j;\r\n      var i;\r\n      function D(Y, aa) {\r\n        var Z = _typeof(Y[aa]);\r\n        return Z == \"function\" || !!(Z == \"object\" && Y[aa]) || Z == \"unknown\";\r\n      }\r\n      function v(Y, Z) {\r\n        return !!(_typeof(Y[Z]) == \"object\" && Y[Z]);\r\n      }\r\n      function s(Y) {\r\n        return Object.prototype.toString.call(Y) === \"[object Array]\";\r\n      }\r\n      function c() {\r\n        var aa = \"Shockwave Flash\",\r\n            ae = \"application/x-shockwave-flash\";\r\n        if (!u(navigator.plugins) && _typeof(navigator.plugins[aa]) == \"object\") {\r\n          var ac = navigator.plugins[aa].description;\r\n          if (ac && !u(navigator.mimeTypes) && navigator.mimeTypes[ae] && navigator.mimeTypes[ae].enabledPlugin) {\r\n            j = ac.match(/\\d+/g);\r\n          }\r\n        }\r\n        if (!j) {\r\n          var Z;\r\n          try {\r\n            Z = new ActiveXObject(\"ShockwaveFlash.ShockwaveFlash\");\r\n            j = Array.prototype.slice.call(Z.GetVariable(\"$version\").match(/(\\d+),(\\d+),(\\d+),(\\d+)/), 1);\r\n            Z = null;\r\n          } catch (ad) {}\r\n        }\r\n        if (!j) {\r\n          return false;\r\n        }\r\n        var Y = parseInt(j[0], 10),\r\n            ab = parseInt(j[1], 10);\r\n        i = Y > 9 && ab > 0;\r\n        return true;\r\n      }\r\n      var w, y;\r\n      if (D(O, \"addEventListener\")) {\r\n        w = function w(aa, Y, Z) {\r\n          aa.addEventListener(Y, Z, false);\r\n        };\r\n        y = function y(aa, Y, Z) {\r\n          aa.removeEventListener(Y, Z, false);\r\n        };\r\n      } else {\r\n        if (D(O, \"attachEvent\")) {\r\n          w = function w(Y, aa, Z) {\r\n            Y.attachEvent(\"on\" + aa, Z);\r\n          };\r\n          y = function y(Y, aa, Z) {\r\n            Y.detachEvent(\"on\" + aa, Z);\r\n          };\r\n        } else {\r\n          throw new Error(\"Browser not supported\");\r\n        }\r\n      }\r\n      var X = false,\r\n          K = [],\r\n          M;\r\n      if (\"readyState\" in d) {\r\n        M = d.readyState;\r\n        X = M == \"complete\" || ~navigator.userAgent.indexOf(\"AppleWebKit/\") && (M == \"loaded\" || M == \"interactive\");\r\n      } else {\r\n        X = !!d.body;\r\n      }\r\n      function t() {\r\n        if (X) {\r\n          return;\r\n        }\r\n        X = true;\r\n        for (var Y = 0; Y < K.length; Y++) {\r\n          K[Y]();\r\n        }\r\n        K.length = 0;\r\n      }\r\n      if (!X) {\r\n        if (D(O, \"addEventListener\")) {\r\n          w(d, \"DOMContentLoaded\", t);\r\n        } else {\r\n          w(d, \"readystatechange\", function () {\r\n            if (d.readyState == \"complete\") {\r\n              t();\r\n            }\r\n          });\r\n          if (d.documentElement.doScroll && O === top) {\r\n            var h = function h() {\r\n              if (X) {\r\n                return;\r\n              }\r\n              try {\r\n                d.documentElement.doScroll(\"left\");\r\n              } catch (Y) {\r\n                L(h, 1);\r\n                return;\r\n              }\r\n              t();\r\n            };\r\n            h();\r\n          }\r\n        }\r\n        w(O, \"load\", t);\r\n      }\r\n      function H(Z, Y) {\r\n        if (X) {\r\n          Z.call(Y);\r\n          return;\r\n        }\r\n        K.push(function () {\r\n          Z.call(Y);\r\n        });\r\n      }\r\n      function n() {\r\n        var aa = parent;\r\n        if (J !== \"\") {\r\n          for (var Y = 0, Z = J.split(\".\"); Y < Z.length; Y++) {\r\n            aa = aa[Z[Y]];\r\n          }\r\n        }\r\n        return aa.easyXDM;\r\n      }\r\n      function f(Y) {\r\n        O.easyXDM = N;\r\n        J = Y;\r\n        if (J) {\r\n          V = \"easyXDM_\" + J.replace(\".\", \"_\") + \"_\";\r\n        }\r\n        return p;\r\n      }\r\n      function A(Y) {\r\n        return Y.match(R)[3];\r\n      }\r\n      function g(Y) {\r\n        return Y.match(R)[4] || \"\";\r\n      }\r\n      function k(aa) {\r\n        if (aa.indexOf(\"file://\") >= 0) {\r\n          return \"file://\";\r\n        }\r\n        var Y = aa.toLowerCase().match(R);\r\n        if (!Y) {\r\n          return \"\";\r\n        }\r\n        var ab = Y[2],\r\n            ac = Y[3],\r\n            Z = Y[4] || \"\";\r\n        if (ab == \"http:\" && Z == \":80\" || ab == \"https:\" && Z == \":443\") {\r\n          Z = \"\";\r\n        }\r\n        return ab + \"//\" + ac + Z;\r\n      }\r\n      function C(Y) {\r\n        Y = Y.replace(G, \"$1/\");\r\n        if (!Y.match(/^(http||https):\\/\\//)) {\r\n          var Z = Y.substring(0, 1) === \"/\" ? \"\" : q.pathname;\r\n          if (Z.substring(Z.length - 1) !== \"/\") {\r\n            Z = Z.substring(0, Z.lastIndexOf(\"/\") + 1);\r\n          }\r\n          Y = q.protocol + \"//\" + q.host + Z + Y;\r\n        }\r\n        while (S.test(Y)) {\r\n          Y = Y.replace(S, \"\");\r\n        }\r\n        return Y;\r\n      }\r\n      function Q(Y, ab) {\r\n        var ad = \"\",\r\n            aa = Y.indexOf(\"#\");\r\n        if (aa !== -1) {\r\n          ad = Y.substring(aa);\r\n          Y = Y.substring(0, aa);\r\n        }\r\n        var ac = [];\r\n        for (var Z in ab) {\r\n          if (ab.hasOwnProperty(Z)) {\r\n            ac.push(Z + \"=\" + I(ab[Z]));\r\n          }\r\n        }\r\n        return Y + (z ? \"#\" : Y.indexOf(\"?\") == -1 ? \"?\" : \"&\") + ac.join(\"&\") + ad;\r\n      }\r\n      var T = function (Y) {\r\n        Y = Y.substring(1).split(\"&\");\r\n        var aa = {},\r\n            ab,\r\n            Z = Y.length;\r\n        while (Z--) {\r\n          ab = Y[Z].split(\"=\");\r\n          aa[ab[0]] = l(ab[1]);\r\n        }\r\n        return aa;\r\n      }(/xdm_e=/.test(q.search) ? q.search : q.hash);\r\n      function u(Y) {\r\n        return typeof Y === \"undefined\";\r\n      }\r\n      var _P = function P() {\r\n        var Z = {};\r\n        var aa = {\r\n          a: [1, 2, 3]\r\n        },\r\n            Y = '{\"a\":[1,2,3]}';\r\n        if (typeof JSON != \"undefined\" && typeof JSON.stringify === \"function\" && JSON.stringify(aa).replace(/\\s/g, \"\") === Y) {\r\n          return JSON;\r\n        }\r\n        if (Object.toJSON) {\r\n          if (Object.toJSON(aa).replace(/\\s/g, \"\") === Y) {\r\n            Z.stringify = Object.toJSON;\r\n          }\r\n        }\r\n        if (typeof String.prototype.evalJSON === \"function\") {\r\n          aa = Y.evalJSON();\r\n          if (aa.a && aa.a.length === 3 && aa.a[2] === 3) {\r\n            Z.parse = function (ab) {\r\n              return ab.evalJSON();\r\n            };\r\n          }\r\n        }\r\n        if (Z.stringify && Z.parse) {\r\n          _P = function P() {\r\n            return Z;\r\n          };\r\n          return Z;\r\n        }\r\n        return null;\r\n      };\r\n      function U(Y, Z, aa) {\r\n        var ac;\r\n        for (var ab in Z) {\r\n          if (Z.hasOwnProperty(ab)) {\r\n            if (ab in Y) {\r\n              ac = Z[ab];\r\n              if (_typeof(ac) === \"object\") {\r\n                U(Y[ab], ac, aa);\r\n              } else {\r\n                if (!aa) {\r\n                  Y[ab] = Z[ab];\r\n                }\r\n              }\r\n            } else {\r\n              Y[ab] = Z[ab];\r\n            }\r\n          }\r\n        }\r\n        return Y;\r\n      }\r\n      function a() {\r\n        var Z = d.body.appendChild(d.createElement(\"form\")),\r\n            Y = Z.appendChild(d.createElement(\"input\"));\r\n        Y.name = V + \"TEST\" + o;\r\n        F = Y !== Z.elements[Y.name];\r\n        d.body.removeChild(Z);\r\n      }\r\n      function B(Z) {\r\n        if (u(F)) {\r\n          a();\r\n        }\r\n        var ad;\r\n        if (F) {\r\n          ad = d.createElement('<iframe name=\"' + Z.props.name + '\"/>');\r\n        } else {\r\n          ad = d.createElement(\"IFRAME\");\r\n          ad.name = Z.props.name;\r\n        }\r\n        ad.id = ad.name = Z.props.name;\r\n        delete Z.props.name;\r\n        if (typeof Z.container == \"string\") {\r\n          Z.container = d.getElementById(Z.container);\r\n        }\r\n        if (!Z.container) {\r\n          U(ad.style, {\r\n            position: \"absolute\",\r\n            top: \"-2000px\",\r\n            left: \"0px\"\r\n          });\r\n          Z.container = d.body;\r\n        }\r\n        var ac = Z.props.src;\r\n        Z.props.src = \"javascript:false\";\r\n        U(ad, Z.props);\r\n        ad.border = ad.frameBorder = 0;\r\n        ad.allowTransparency = true;\r\n        Z.container.appendChild(ad);\r\n        if (Z.onLoad) {\r\n          w(ad, \"load\", Z.onLoad);\r\n        }\r\n        if (Z.usePost) {\r\n          var ab = Z.container.appendChild(d.createElement(\"form\")),\r\n              Y;\r\n          ab.target = ad.name;\r\n          ab.action = ac;\r\n          ab.method = \"POST\";\r\n          if (_typeof(Z.usePost) === \"object\") {\r\n            for (var aa in Z.usePost) {\r\n              if (Z.usePost.hasOwnProperty(aa)) {\r\n                if (F) {\r\n                  Y = d.createElement('<input name=\"' + aa + '\"/>');\r\n                } else {\r\n                  Y = d.createElement(\"INPUT\");\r\n                  Y.name = aa;\r\n                }\r\n                Y.value = Z.usePost[aa];\r\n                ab.appendChild(Y);\r\n              }\r\n            }\r\n          }\r\n          ab.submit();\r\n          ab.parentNode.removeChild(ab);\r\n        } else {\r\n          ad.src = ac;\r\n        }\r\n        Z.props.src = ac;\r\n        return ad;\r\n      }\r\n      function e(Y) {\r\n        return Y.replace(/[-[\\]/{}()+.\\^$|]/g, \"\\\\$&\").replace(/(\\*)/g, \".$1\").replace(/\\?/g, \".\");\r\n      }\r\n      function W(ac, aa) {\r\n        if (typeof ac == \"string\") {\r\n          ac = [ac];\r\n        }\r\n        var Z,\r\n            Y = ac.length;\r\n        while (Y--) {\r\n          var ab = ac[Y].substr(0, 1) === \"^\" && ac[Y].substr(ac[Y].length - 1, 1) === \"$\";\r\n          Z = ab ? ac[Y] : \"^\" + e(ac[Y]) + \"$\";\r\n          Z = new RegExp(Z);\r\n          if (Z.test(aa)) {\r\n            return true;\r\n          }\r\n        }\r\n        return false;\r\n      }\r\n      function m(aa) {\r\n        var af = aa.protocol,\r\n            Z;\r\n        aa.isHost = aa.isHost || u(T.xdm_p);\r\n        z = aa.hash || false;\r\n        if (!aa.props) {\r\n          aa.props = {};\r\n        }\r\n        if (!aa.isHost) {\r\n          aa.channel = T.xdm_c.replace(/[\"'<>\\\\]/g, \"\");\r\n          aa.secret = T.xdm_s;\r\n          aa.remote = T.xdm_e.replace(/[\"'<>\\\\]/g, \"\");\r\n          af = T.xdm_p;\r\n          if (aa.acl && !W(aa.acl, aa.remote)) {\r\n            throw new Error(\"Access denied for \" + aa.remote);\r\n          }\r\n        } else {\r\n          aa.remote = C(aa.remote);\r\n          aa.channel = aa.channel || \"default\" + o++;\r\n          aa.secret = Math.random().toString(16).substring(2);\r\n          if (u(af)) {\r\n            if (k(q.href) == k(aa.remote)) {\r\n              af = \"4\";\r\n            } else {\r\n              if (D(O, \"postMessage\") || D(d, \"postMessage\")) {\r\n                af = \"1\";\r\n              } else {\r\n                if (aa.swf && D(O, \"ActiveXObject\") && c()) {\r\n                  af = \"6\";\r\n                } else {\r\n                  if (navigator.product === \"Gecko\" && \"frameElement\" in O && navigator.userAgent.indexOf(\"WebKit\") == -1) {\r\n                    af = \"5\";\r\n                  } else {\r\n                    if (aa.remoteHelper) {\r\n                      af = \"2\";\r\n                    } else {\r\n                      af = \"0\";\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n        aa.protocol = af;\r\n        switch (af) {\r\n          case \"0\":\r\n            U(aa, {\r\n              interval: 100,\r\n              delay: 2000,\r\n              useResize: true,\r\n              useParent: false,\r\n              usePolling: false\r\n            }, true);\r\n            if (aa.isHost) {\r\n              if (!aa.local) {\r\n                var ad = q.protocol + \"//\" + q.host,\r\n                    Y = d.body.getElementsByTagName(\"img\"),\r\n                    ae;\r\n                var ab = Y.length;\r\n                while (ab--) {\r\n                  ae = Y[ab];\r\n                  if (ae.src.substring(0, ad.length) === ad) {\r\n                    aa.local = ae.src;\r\n                    break;\r\n                  }\r\n                }\r\n                if (!aa.local) {\r\n                  aa.local = O;\r\n                }\r\n              }\r\n              var ac = {\r\n                xdm_c: aa.channel,\r\n                xdm_p: 0\r\n              };\r\n              if (aa.local === O) {\r\n                aa.usePolling = true;\r\n                aa.useParent = true;\r\n                aa.local = q.protocol + \"//\" + q.host + q.pathname + q.search;\r\n                ac.xdm_e = aa.local;\r\n                ac.xdm_pa = 1;\r\n              } else {\r\n                ac.xdm_e = C(aa.local);\r\n              }\r\n              if (aa.container) {\r\n                aa.useResize = false;\r\n                ac.xdm_po = 1;\r\n              }\r\n              aa.remote = Q(aa.remote, ac);\r\n            } else {\r\n              U(aa, {\r\n                useParent: !u(T.xdm_pa),\r\n                usePolling: !u(T.xdm_po),\r\n                useResize: aa.useParent ? false : aa.useResize\r\n              });\r\n            }\r\n            Z = [new p.stack.HashTransport(aa), new p.stack.ReliableBehavior({}), new p.stack.QueueBehavior({\r\n              encode: true,\r\n              maxLength: 4000 - aa.remote.length\r\n            }), new p.stack.VerifyBehavior({\r\n              initiate: aa.isHost\r\n            })];\r\n            break;\r\n          case \"1\":\r\n            Z = [new p.stack.PostMessageTransport(aa)];\r\n            break;\r\n          case \"2\":\r\n            if (aa.isHost) {\r\n              aa.remoteHelper = C(aa.remoteHelper);\r\n            }\r\n            Z = [new p.stack.NameTransport(aa), new p.stack.QueueBehavior(), new p.stack.VerifyBehavior({\r\n              initiate: aa.isHost\r\n            })];\r\n            break;\r\n          case \"3\":\r\n            Z = [new p.stack.NixTransport(aa)];\r\n            break;\r\n          case \"4\":\r\n            Z = [new p.stack.SameOriginTransport(aa)];\r\n            break;\r\n          case \"5\":\r\n            Z = [new p.stack.FrameElementTransport(aa)];\r\n            break;\r\n          case \"6\":\r\n            if (!j) {\r\n              c();\r\n            }\r\n            Z = [new p.stack.FlashTransport(aa)];\r\n            break;\r\n        }\r\n        Z.push(new p.stack.QueueBehavior({\r\n          lazy: aa.lazy,\r\n          remove: true\r\n        }));\r\n        return Z;\r\n      }\r\n      function E(ab) {\r\n        var ac,\r\n            aa = {\r\n          incoming: function incoming(ae, ad) {\r\n            this.up.incoming(ae, ad);\r\n          },\r\n          outgoing: function outgoing(ad, ae) {\r\n            this.down.outgoing(ad, ae);\r\n          },\r\n          callback: function callback(ad) {\r\n            this.up.callback(ad);\r\n          },\r\n          init: function init() {\r\n            this.down.init();\r\n          },\r\n          destroy: function destroy() {\r\n            this.down.destroy();\r\n          }\r\n        };\r\n        for (var Z = 0, Y = ab.length; Z < Y; Z++) {\r\n          ac = ab[Z];\r\n          U(ac, aa, true);\r\n          if (Z !== 0) {\r\n            ac.down = ab[Z - 1];\r\n          }\r\n          if (Z !== Y - 1) {\r\n            ac.up = ab[Z + 1];\r\n          }\r\n        }\r\n        return ac;\r\n      }\r\n      function x(Y) {\r\n        Y.up.down = Y.down;\r\n        Y.down.up = Y.up;\r\n        Y.up = Y.down = null;\r\n      }\r\n      U(p, {\r\n        version: \"2.5.00.1\",\r\n        query: T,\r\n        stack: {},\r\n        apply: U,\r\n        getJSONObject: _P,\r\n        whenReady: H,\r\n        noConflict: f\r\n      });\r\n      p.DomHelper = {\r\n        on: w,\r\n        un: y,\r\n        requiresJSON: function requiresJSON(Y) {\r\n          if (!v(O, \"JSON\")) {\r\n            d.write('<script type=\"text/javascript\" src=\"' + Y + '\"><\\/script>');\r\n          }\r\n        }\r\n      };\r\n      (function () {\r\n        var Y = {};\r\n        p.Fn = {\r\n          set: function set(Z, aa) {\r\n            Y[Z] = aa;\r\n          },\r\n          get: function get(aa, Z) {\r\n            if (!Y.hasOwnProperty(aa)) {\r\n              return;\r\n            }\r\n            var ab = Y[aa];\r\n            if (Z) {\r\n              delete Y[aa];\r\n            }\r\n            return ab;\r\n          }\r\n        };\r\n      })();\r\n      p.Socket = function (Z) {\r\n        var Y = E(m(Z).concat([{\r\n          incoming: function incoming(ac, ab) {\r\n            Z.onMessage(ac, ab);\r\n          },\r\n          callback: function callback(ab) {\r\n            if (Z.onReady) {\r\n              Z.onReady(ab);\r\n            }\r\n          }\r\n        }])),\r\n            aa = k(Z.remote);\r\n        this.origin = k(Z.remote);\r\n        this.destroy = function () {\r\n          Y.destroy();\r\n        };\r\n        this.postMessage = function (ab) {\r\n          Y.outgoing(ab, aa);\r\n        };\r\n        Y.init();\r\n      };\r\n      p.Rpc = function (aa, Z) {\r\n        if (Z.local) {\r\n          for (var ac in Z.local) {\r\n            if (Z.local.hasOwnProperty(ac)) {\r\n              var ab = Z.local[ac];\r\n              if (typeof ab === \"function\") {\r\n                Z.local[ac] = {\r\n                  method: ab\r\n                };\r\n              }\r\n            }\r\n          }\r\n        }\r\n        var Y = E(m(aa).concat([new p.stack.RpcBehavior(this, Z), {\r\n          callback: function callback(ad) {\r\n            if (aa.onReady) {\r\n              aa.onReady(ad);\r\n            }\r\n          }\r\n        }]));\r\n        this.origin = k(aa.remote);\r\n        this.context = aa.context || null;\r\n        this.destroy = function () {\r\n          Y.destroy();\r\n        };\r\n        Y.init();\r\n      };\r\n      p.stack.SameOriginTransport = function (Z) {\r\n        var aa, ac, ab, Y;\r\n        return aa = {\r\n          outgoing: function outgoing(ae, af, ad) {\r\n            ab(ae);\r\n            if (ad) {\r\n              ad();\r\n            }\r\n          },\r\n          destroy: function destroy() {\r\n            if (ac) {\r\n              ac.parentNode.removeChild(ac);\r\n              ac = null;\r\n            }\r\n          },\r\n          onDOMReady: function onDOMReady() {\r\n            Y = k(Z.remote);\r\n            if (Z.isHost) {\r\n              U(Z.props, {\r\n                src: Q(Z.remote, {\r\n                  xdm_e: q.protocol + \"//\" + q.host + q.pathname,\r\n                  xdm_c: Z.channel,\r\n                  xdm_p: 4\r\n                }),\r\n                name: V + Z.channel + \"_provider\"\r\n              });\r\n              ac = B(Z);\r\n              p.Fn.set(Z.channel, function (ad) {\r\n                ab = ad;\r\n                L(function () {\r\n                  aa.up.callback(true);\r\n                }, 0);\r\n                return function (ae) {\r\n                  aa.up.incoming(ae, Y);\r\n                };\r\n              });\r\n            } else {\r\n              ab = n().Fn.get(Z.channel, true)(function (ad) {\r\n                aa.up.incoming(ad, Y);\r\n              });\r\n              L(function () {\r\n                aa.up.callback(true);\r\n              }, 0);\r\n            }\r\n          },\r\n          init: function init() {\r\n            H(aa.onDOMReady, aa);\r\n          }\r\n        };\r\n      };\r\n      p.stack.FlashTransport = function (ab) {\r\n        var ad, Y, ae, Z, af;\r\n        function ag(ai, ah) {\r\n          L(function () {\r\n            ad.up.incoming(ai, ae);\r\n          }, 0);\r\n        }\r\n        function aa(ai) {\r\n          var ah = ab.swf + \"?host=\" + ab.isHost;\r\n          var ak = \"easyXDM_swf_\" + Math.floor(Math.random() * 10000);\r\n          p.Fn.set(\"flash_loaded\" + ai.replace(/[\\-.]/g, \"_\"), function () {\r\n            p.stack.FlashTransport[ai].swf = Z = af.firstChild;\r\n            var al = p.stack.FlashTransport[ai].queue;\r\n            for (var am = 0; am < al.length; am++) {\r\n              al[am]();\r\n            }\r\n            al.length = 0;\r\n          });\r\n          if (ab.swfContainer) {\r\n            af = typeof ab.swfContainer == \"string\" ? d.getElementById(ab.swfContainer) : ab.swfContainer;\r\n          } else {\r\n            af = d.createElement(\"div\");\r\n            U(af.style, i && ab.swfNoThrottle ? {\r\n              height: \"20px\",\r\n              width: \"20px\",\r\n              position: \"fixed\",\r\n              right: 0,\r\n              top: 0\r\n            } : {\r\n              height: \"1px\",\r\n              width: \"1px\",\r\n              position: \"absolute\",\r\n              overflow: \"hidden\",\r\n              right: 0,\r\n              top: 0\r\n            });\r\n            d.body.appendChild(af);\r\n          }\r\n          var aj = \"callback=flash_loaded\" + I(ai.replace(/[\\-.]/g, \"_\")) + \"&proto=\" + b.location.protocol + \"&domain=\" + I(A(b.location.href)) + \"&port=\" + I(g(b.location.href)) + \"&ns=\" + I(J);\r\n          af.innerHTML = \"<object height='20' width='20' type='application/x-shockwave-flash' id='\" + ak + \"' data='\" + ah + \"'><param name='allowScriptAccess' value='always'></param><param name='wmode' value='transparent'><param name='movie' value='\" + ah + \"'></param><param name='flashvars' value='\" + aj + \"'></param><embed type='application/x-shockwave-flash' FlashVars='\" + aj + \"' allowScriptAccess='always' wmode='transparent' src='\" + ah + \"' height='1' width='1'></embed></object>\";\r\n        }\r\n        return ad = {\r\n          outgoing: function outgoing(ai, aj, ah) {\r\n            Z.postMessage(ab.channel, ai.toString());\r\n            if (ah) {\r\n              ah();\r\n            }\r\n          },\r\n          destroy: function destroy() {\r\n            try {\r\n              Z.destroyChannel(ab.channel);\r\n            } catch (ah) {}\r\n            Z = null;\r\n            if (Y) {\r\n              Y.parentNode.removeChild(Y);\r\n              Y = null;\r\n            }\r\n          },\r\n          onDOMReady: function onDOMReady() {\r\n            ae = ab.remote;\r\n            p.Fn.set(\"flash_\" + ab.channel + \"_init\", function () {\r\n              L(function () {\r\n                ad.up.callback(true);\r\n              });\r\n            });\r\n            p.Fn.set(\"flash_\" + ab.channel + \"_onMessage\", ag);\r\n            ab.swf = C(ab.swf);\r\n            var ai = A(ab.swf);\r\n            var ah = function ah() {\r\n              p.stack.FlashTransport[ai].init = true;\r\n              Z = p.stack.FlashTransport[ai].swf;\r\n              Z.createChannel(ab.channel, ab.secret, k(ab.remote), ab.isHost);\r\n              if (ab.isHost) {\r\n                if (i && ab.swfNoThrottle) {\r\n                  U(ab.props, {\r\n                    position: \"fixed\",\r\n                    right: 0,\r\n                    top: 0,\r\n                    height: \"20px\",\r\n                    width: \"20px\"\r\n                  });\r\n                }\r\n                U(ab.props, {\r\n                  src: Q(ab.remote, {\r\n                    xdm_e: k(q.href),\r\n                    xdm_c: ab.channel,\r\n                    xdm_p: 6,\r\n                    xdm_s: ab.secret\r\n                  }),\r\n                  name: V + ab.channel + \"_provider\"\r\n                });\r\n                Y = B(ab);\r\n              }\r\n            };\r\n            if (p.stack.FlashTransport[ai] && p.stack.FlashTransport[ai].init) {\r\n              ah();\r\n            } else {\r\n              if (!p.stack.FlashTransport[ai]) {\r\n                p.stack.FlashTransport[ai] = {\r\n                  queue: [ah]\r\n                };\r\n                aa(ai);\r\n              } else {\r\n                p.stack.FlashTransport[ai].queue.push(ah);\r\n              }\r\n            }\r\n          },\r\n          init: function init() {\r\n            H(ad.onDOMReady, ad);\r\n          }\r\n        };\r\n      };\r\n      p.stack.PostMessageTransport = function (ac) {\r\n        var ae, af, aa, ab;\r\n        function Z(ag) {\r\n          if (ag.origin) {\r\n            return k(ag.origin);\r\n          }\r\n          if (ag.uri) {\r\n            return k(ag.uri);\r\n          }\r\n          if (ag.domain) {\r\n            return q.protocol + \"//\" + ag.domain;\r\n          }\r\n          throw \"Unable to retrieve the origin of the event\";\r\n        }\r\n        function ad(ah) {\r\n          if (typeof ah.data !== \"string\") {\r\n            return;\r\n          }\r\n          var ag = Z(ah);\r\n          if (ag == ab && typeof ah.data === \"string\" && ah.data.substring(0, ac.channel.length + 1) == ac.channel + \" \") {\r\n            ae.up.incoming(ah.data.substring(ac.channel.length + 1), ag);\r\n          }\r\n        }\r\n        function Y(ag) {\r\n          if (ag.data == ac.channel + \"-ready\") {\r\n            aa = \"postMessage\" in af.contentWindow ? af.contentWindow : af.contentWindow.document;\r\n            y(O, \"message\", Y);\r\n            w(O, \"message\", ad);\r\n            L(function () {\r\n              ae.up.callback(true);\r\n            }, 0);\r\n          }\r\n        }\r\n        return ae = {\r\n          outgoing: function outgoing(ah, ai, ag) {\r\n            aa.postMessage(ac.channel + \" \" + ah, ai || ab);\r\n            if (ag) {\r\n              ag();\r\n            }\r\n          },\r\n          destroy: function destroy() {\r\n            y(O, \"message\", Y);\r\n            y(O, \"message\", ad);\r\n            if (af) {\r\n              aa = null;\r\n              af.parentNode.removeChild(af);\r\n              af = null;\r\n            }\r\n          },\r\n          onDOMReady: function onDOMReady() {\r\n            ab = k(ac.remote);\r\n            if (ab === \"file://\") {\r\n              ab = \"*\";\r\n            }\r\n            if (ac.isHost) {\r\n              w(O, \"message\", Y);\r\n              U(ac.props, {\r\n                src: Q(ac.remote, {\r\n                  xdm_e: k(q.href),\r\n                  xdm_c: ac.channel,\r\n                  xdm_p: 1\r\n                }),\r\n                name: V + ac.channel + \"_provider\"\r\n              });\r\n              af = B(ac);\r\n            } else {\r\n              w(O, \"message\", ad);\r\n              aa = \"postMessage\" in O.parent ? O.parent : O.parent.document;\r\n              aa.postMessage(ac.channel + \"-ready\", ab);\r\n              L(function () {\r\n                ae.up.callback(true);\r\n              }, 0);\r\n            }\r\n          },\r\n          init: function init() {\r\n            H(ae.onDOMReady, ae);\r\n          }\r\n        };\r\n      };\r\n      p.stack.FrameElementTransport = function (Z) {\r\n        var aa, ac, ab, Y;\r\n        return aa = {\r\n          outgoing: function outgoing(ae, af, ad) {\r\n            ab.call(this, ae);\r\n            if (ad) {\r\n              ad();\r\n            }\r\n          },\r\n          destroy: function destroy() {\r\n            if (ac) {\r\n              ac.parentNode.removeChild(ac);\r\n              ac = null;\r\n            }\r\n          },\r\n          onDOMReady: function onDOMReady() {\r\n            Y = k(Z.remote);\r\n            if (Z.isHost) {\r\n              U(Z.props, {\r\n                src: Q(Z.remote, {\r\n                  xdm_e: k(q.href),\r\n                  xdm_c: Z.channel,\r\n                  xdm_p: 5\r\n                }),\r\n                name: V + Z.channel + \"_provider\"\r\n              });\r\n              ac = B(Z);\r\n              ac.fn = function (ad) {\r\n                delete ac.fn;\r\n                ab = ad;\r\n                L(function () {\r\n                  aa.up.callback(true);\r\n                }, 0);\r\n                return function (ae) {\r\n                  aa.up.incoming(ae, Y);\r\n                };\r\n              };\r\n            } else {\r\n              if (d.referrer && k(d.referrer) != T.xdm_e) {\r\n                O.top.location = T.xdm_e;\r\n              }\r\n              ab = O.frameElement.fn(function (ad) {\r\n                aa.up.incoming(ad, Y);\r\n              });\r\n              aa.up.callback(true);\r\n            }\r\n          },\r\n          init: function init() {\r\n            H(aa.onDOMReady, aa);\r\n          }\r\n        };\r\n      };\r\n      p.stack.NameTransport = function (ac) {\r\n        var ad;\r\n        var af, aj, ab, ah, ai, Z, Y;\r\n        function ag(am) {\r\n          var al = ac.remoteHelper + (af ? \"#_3\" : \"#_2\") + ac.channel;\r\n          aj.contentWindow.sendMessage(am, al);\r\n        }\r\n        function ae() {\r\n          if (af) {\r\n            if (++ah === 2 || !af) {\r\n              ad.up.callback(true);\r\n            }\r\n          } else {\r\n            ag(\"ready\");\r\n            ad.up.callback(true);\r\n          }\r\n        }\r\n        function ak(al) {\r\n          ad.up.incoming(al, Z);\r\n        }\r\n        function aa() {\r\n          if (ai) {\r\n            L(function () {\r\n              ai(true);\r\n            }, 0);\r\n          }\r\n        }\r\n        return ad = {\r\n          outgoing: function outgoing(am, an, al) {\r\n            ai = al;\r\n            ag(am);\r\n          },\r\n          destroy: function destroy() {\r\n            aj.parentNode.removeChild(aj);\r\n            aj = null;\r\n            if (af) {\r\n              ab.parentNode.removeChild(ab);\r\n              ab = null;\r\n            }\r\n          },\r\n          onDOMReady: function onDOMReady() {\r\n            af = ac.isHost;\r\n            ah = 0;\r\n            Z = k(ac.remote);\r\n            ac.local = C(ac.local);\r\n            if (af) {\r\n              p.Fn.set(ac.channel, function (am) {\r\n                if (af && am === \"ready\") {\r\n                  p.Fn.set(ac.channel, ak);\r\n                  ae();\r\n                }\r\n              });\r\n              Y = Q(ac.remote, {\r\n                xdm_e: ac.local,\r\n                xdm_c: ac.channel,\r\n                xdm_p: 2\r\n              });\r\n              U(ac.props, {\r\n                src: Y + \"#\" + ac.channel,\r\n                name: V + ac.channel + \"_provider\"\r\n              });\r\n              ab = B(ac);\r\n            } else {\r\n              ac.remoteHelper = ac.remote;\r\n              p.Fn.set(ac.channel, ak);\r\n            }\r\n            var al = function al() {\r\n              var am = aj || this;\r\n              y(am, \"load\", al);\r\n              p.Fn.set(ac.channel + \"_load\", aa);\r\n              (function an() {\r\n                if (typeof am.contentWindow.sendMessage == \"function\") {\r\n                  ae();\r\n                } else {\r\n                  L(an, 50);\r\n                }\r\n              })();\r\n            };\r\n            aj = B({\r\n              props: {\r\n                src: ac.local + \"#_4\" + ac.channel\r\n              },\r\n              onLoad: al\r\n            });\r\n          },\r\n          init: function init() {\r\n            H(ad.onDOMReady, ad);\r\n          }\r\n        };\r\n      };\r\n      p.stack.HashTransport = function (aa) {\r\n        var ad;\r\n        var ag,\r\n            ab,\r\n            Y,\r\n            ae,\r\n            an,\r\n            ac,\r\n            am;\r\n        var ah, Z;\r\n        function al(ap) {\r\n          if (!am) {\r\n            return;\r\n          }\r\n          var ao = aa.remote + \"#\" + an++ + \"_\" + ap;\r\n          (ag || !ah ? am.contentWindow : am).location = ao;\r\n        }\r\n        function af(ao) {\r\n          ae = ao;\r\n          ad.up.incoming(ae.substring(ae.indexOf(\"_\") + 1), Z);\r\n        }\r\n        function ak() {\r\n          if (!ac) {\r\n            return;\r\n          }\r\n          var ao = ac.location.href,\r\n              aq = \"\",\r\n              ap = ao.indexOf(\"#\");\r\n          if (ap != -1) {\r\n            aq = ao.substring(ap);\r\n          }\r\n          if (aq && aq != ae) {\r\n            af(aq);\r\n          }\r\n        }\r\n        function aj() {\r\n          ab = setInterval(ak, Y);\r\n        }\r\n        return ad = {\r\n          outgoing: function outgoing(ao, ap) {\r\n            al(ao);\r\n          },\r\n          destroy: function destroy() {\r\n            O.clearInterval(ab);\r\n            if (ag || !ah) {\r\n              am.parentNode.removeChild(am);\r\n            }\r\n            am = null;\r\n          },\r\n          onDOMReady: function onDOMReady() {\r\n            ag = aa.isHost;\r\n            Y = aa.interval;\r\n            ae = \"#\" + aa.channel;\r\n            an = 0;\r\n            ah = aa.useParent;\r\n            Z = k(aa.remote);\r\n            if (ag) {\r\n              U(aa.props, {\r\n                src: aa.remote,\r\n                name: V + aa.channel + \"_provider\"\r\n              });\r\n              if (ah) {\r\n                aa.onLoad = function () {\r\n                  ac = O;\r\n                  aj();\r\n                  ad.up.callback(true);\r\n                };\r\n              } else {\r\n                var aq = 0,\r\n                    ao = aa.delay / 50;\r\n                (function ap() {\r\n                  if (++aq > ao) {\r\n                    throw new Error(\"Unable to reference listenerwindow\");\r\n                  }\r\n                  try {\r\n                    ac = am.contentWindow.frames[V + aa.channel + \"_consumer\"];\r\n                  } catch (ar) {}\r\n                  if (ac) {\r\n                    aj();\r\n                    ad.up.callback(true);\r\n                  } else {\r\n                    L(ap, 50);\r\n                  }\r\n                })();\r\n              }\r\n              am = B(aa);\r\n            } else {\r\n              ac = O;\r\n              aj();\r\n              if (ah) {\r\n                am = parent;\r\n                ad.up.callback(true);\r\n              } else {\r\n                U(aa, {\r\n                  props: {\r\n                    src: aa.remote + \"#\" + aa.channel + new Date(),\r\n                    name: V + aa.channel + \"_consumer\"\r\n                  },\r\n                  onLoad: function onLoad() {\r\n                    ad.up.callback(true);\r\n                  }\r\n                });\r\n                am = B(aa);\r\n              }\r\n            }\r\n          },\r\n          init: function init() {\r\n            H(ad.onDOMReady, ad);\r\n          }\r\n        };\r\n      };\r\n      p.stack.ReliableBehavior = function (Z) {\r\n        var ab, ad;\r\n        var ac = 0,\r\n            Y = 0,\r\n            aa = \"\";\r\n        return ab = {\r\n          incoming: function incoming(ag, ae) {\r\n            var af = ag.indexOf(\"_\"),\r\n                ah = ag.substring(0, af).split(\",\");\r\n            ag = ag.substring(af + 1);\r\n            if (ah[0] == ac) {\r\n              aa = \"\";\r\n              if (ad) {\r\n                ad(true);\r\n              }\r\n            }\r\n            if (ag.length > 0) {\r\n              ab.down.outgoing(ah[1] + \",\" + ac + \"_\" + aa, ae);\r\n              if (Y != ah[1]) {\r\n                Y = ah[1];\r\n                ab.up.incoming(ag, ae);\r\n              }\r\n            }\r\n          },\r\n          outgoing: function outgoing(ag, ae, af) {\r\n            aa = ag;\r\n            ad = af;\r\n            ab.down.outgoing(Y + \",\" + ++ac + \"_\" + ag, ae);\r\n          }\r\n        };\r\n      };\r\n      p.stack.QueueBehavior = function (aa) {\r\n        var ad,\r\n            ae = [],\r\n            ah = true,\r\n            ab = \"\",\r\n            ag,\r\n            Y = 0,\r\n            Z = false,\r\n            ac = false;\r\n        function af() {\r\n          if (aa.remove && ae.length === 0) {\r\n            x(ad);\r\n            return;\r\n          }\r\n          if (ah || ae.length === 0 || ag) {\r\n            return;\r\n          }\r\n          ah = true;\r\n          var ai = ae.shift();\r\n          ad.down.outgoing(ai.data, ai.origin, function (aj) {\r\n            ah = false;\r\n            if (ai.callback) {\r\n              L(function () {\r\n                ai.callback(aj);\r\n              }, 0);\r\n            }\r\n            af();\r\n          });\r\n        }\r\n        return ad = {\r\n          init: function init() {\r\n            if (u(aa)) {\r\n              aa = {};\r\n            }\r\n            if (aa.maxLength) {\r\n              Y = aa.maxLength;\r\n              ac = true;\r\n            }\r\n            if (aa.lazy) {\r\n              Z = true;\r\n            } else {\r\n              ad.down.init();\r\n            }\r\n          },\r\n          callback: function callback(aj) {\r\n            ah = false;\r\n            var ai = ad.up;\r\n            af();\r\n            ai.callback(aj);\r\n          },\r\n          incoming: function incoming(al, aj) {\r\n            if (ac) {\r\n              var ak = al.indexOf(\"_\"),\r\n                  ai = parseInt(al.substring(0, ak), 10);\r\n              ab += al.substring(ak + 1);\r\n              if (ai === 0) {\r\n                if (aa.encode) {\r\n                  ab = l(ab);\r\n                }\r\n                ad.up.incoming(ab, aj);\r\n                ab = \"\";\r\n              }\r\n            } else {\r\n              ad.up.incoming(al, aj);\r\n            }\r\n          },\r\n          outgoing: function outgoing(am, aj, al) {\r\n            if (aa.encode) {\r\n              am = I(am);\r\n            }\r\n            var ai = [],\r\n                ak;\r\n            if (ac) {\r\n              while (am.length !== 0) {\r\n                ak = am.substring(0, Y);\r\n                am = am.substring(ak.length);\r\n                ai.push(ak);\r\n              }\r\n              while (ak = ai.shift()) {\r\n                ae.push({\r\n                  data: ai.length + \"_\" + ak,\r\n                  origin: aj,\r\n                  callback: ai.length === 0 ? al : null\r\n                });\r\n              }\r\n            } else {\r\n              ae.push({\r\n                data: am,\r\n                origin: aj,\r\n                callback: al\r\n              });\r\n            }\r\n            if (Z) {\r\n              ad.down.init();\r\n            } else {\r\n              af();\r\n            }\r\n          },\r\n          destroy: function destroy() {\r\n            ag = true;\r\n            ad.down.destroy();\r\n          }\r\n        };\r\n      };\r\n      p.stack.VerifyBehavior = function (ac) {\r\n        var ad,\r\n            ab,\r\n            Z;\r\n        function Y() {\r\n          ab = Math.random().toString(16).substring(2);\r\n          ad.down.outgoing(ab);\r\n        }\r\n        return ad = {\r\n          incoming: function incoming(ag, ae) {\r\n            var af = ag.indexOf(\"_\");\r\n            if (af === -1) {\r\n              if (ag === ab) {\r\n                ad.up.callback(true);\r\n              } else {\r\n                if (!Z) {\r\n                  Z = ag;\r\n                  if (!ac.initiate) {\r\n                    Y();\r\n                  }\r\n                  ad.down.outgoing(ag);\r\n                }\r\n              }\r\n            } else {\r\n              if (ag.substring(0, af) === Z) {\r\n                ad.up.incoming(ag.substring(af + 1), ae);\r\n              }\r\n            }\r\n          },\r\n          outgoing: function outgoing(ag, ae, af) {\r\n            ad.down.outgoing(ab + \"_\" + ag, ae, af);\r\n          },\r\n          callback: function callback(ae) {\r\n            if (ac.initiate) {\r\n              Y();\r\n            }\r\n          }\r\n        };\r\n      };\r\n      p.stack.RpcBehavior = function (ae, Z) {\r\n        var ab,\r\n            ag = Z.serializer || _P();\r\n        var af = 0,\r\n            ad = {};\r\n        function Y(ah) {\r\n          ah.jsonrpc = \"2.0\";\r\n          ab.down.outgoing(ag.stringify(ah));\r\n        }\r\n        function ac(ah, aj) {\r\n          var ai = Array.prototype.slice;\r\n          return function () {\r\n            var ak = arguments.length,\r\n                am,\r\n                al = {\r\n              method: aj\r\n            };\r\n            if (ak > 0 && typeof arguments[ak - 1] === \"function\") {\r\n              if (ak > 1 && typeof arguments[ak - 2] === \"function\") {\r\n                am = {\r\n                  success: arguments[ak - 2],\r\n                  error: arguments[ak - 1]\r\n                };\r\n                al.params = ai.call(arguments, 0, ak - 2);\r\n              } else {\r\n                am = {\r\n                  success: arguments[ak - 1]\r\n                };\r\n                al.params = ai.call(arguments, 0, ak - 1);\r\n              }\r\n              ad[\"\" + ++af] = am;\r\n              al.id = af;\r\n            } else {\r\n              al.params = ai.call(arguments, 0);\r\n            }\r\n            if (ah.namedParams && al.params.length === 1) {\r\n              al.params = al.params[0];\r\n            }\r\n            Y(al);\r\n          };\r\n        }\r\n        function aa(ah, aj, an, al) {\r\n          if (!an) {\r\n            if (aj) {\r\n              Y({\r\n                id: aj,\r\n                error: {\r\n                  code: -32601,\r\n                  message: \"Procedure not found.\"\r\n                }\r\n              });\r\n            }\r\n            return;\r\n          }\r\n          var _ao, _am;\r\n          if (aj) {\r\n            _ao = function ao(aq) {\r\n              _ao = r;\r\n              Y({\r\n                id: aj,\r\n                result: aq\r\n              });\r\n            };\r\n            _am = function am(aq, ar) {\r\n              _am = r;\r\n              var at = {\r\n                id: aj,\r\n                error: {\r\n                  code: -32099,\r\n                  message: aq\r\n                }\r\n              };\r\n              if (ar) {\r\n                at.error.data = ar;\r\n              }\r\n              Y(at);\r\n            };\r\n          } else {\r\n            _ao = _am = r;\r\n          }\r\n          if (!s(al)) {\r\n            al = [al];\r\n          }\r\n          try {\r\n            var ak = ae.context || an.scope;\r\n            var ap = an.method.apply(ak, al.concat([_ao, _am]));\r\n            if (!u(ap)) {\r\n              _ao(ap);\r\n            }\r\n          } catch (ai) {\r\n            _am(ai.message);\r\n          }\r\n        }\r\n        return ab = {\r\n          incoming: function incoming(ai, ah) {\r\n            var aj = ag.parse(ai);\r\n            if (aj.method) {\r\n              if (Z.handle) {\r\n                Z.handle(aj, Y);\r\n              } else {\r\n                aa(aj.method, aj.id, Z.local[aj.method], aj.params);\r\n              }\r\n            } else {\r\n              var ak = ad[aj.id];\r\n              if (aj.error) {\r\n                if (ak.error) {\r\n                  ak.error(aj.error);\r\n                }\r\n              } else {\r\n                if (ak.success) {\r\n                  ak.success(aj.result);\r\n                }\r\n              }\r\n              delete ad[aj.id];\r\n            }\r\n          },\r\n          init: function init() {\r\n            if (Z.remote) {\r\n              for (var ah in Z.remote) {\r\n                if (Z.remote.hasOwnProperty(ah)) {\r\n                  ae[ah] = ac(Z.remote[ah], ah);\r\n                }\r\n              }\r\n            }\r\n            ab.down.init();\r\n          },\r\n          destroy: function destroy() {\r\n            for (var ah in Z.remote) {\r\n              if (Z.remote.hasOwnProperty(ah) && ae.hasOwnProperty(ah)) {\r\n                delete ae[ah];\r\n              }\r\n            }\r\n            ab.down.destroy();\r\n          }\r\n        };\r\n      };\r\n      b.easyXDM = p;\r\n    })(window, document, location, window.setTimeout, decodeURIComponent, encodeURIComponent);\r\n    return easyXDM.noConflict('Kakao');\r\n  }();\r\n\r\n  var CryptoJS = function () {\r\n    var CryptoJS = CryptoJS || function (u, p) {\r\n      var d = {},\r\n          l = d.lib = {},\r\n          s = function s() {},\r\n          t = l.Base = {\r\n        extend: function extend(a) {\r\n          s.prototype = this;\r\n          var c = new s();\r\n          a && c.mixIn(a);\r\n          c.hasOwnProperty(\"init\") || (c.init = function () {\r\n            c.$super.init.apply(this, arguments);\r\n          });\r\n          c.init.prototype = c;\r\n          c.$super = this;\r\n          return c;\r\n        },\r\n        create: function create() {\r\n          var a = this.extend();\r\n          a.init.apply(a, arguments);\r\n          return a;\r\n        },\r\n        init: function init() {},\r\n        mixIn: function mixIn(a) {\r\n          for (var c in a) {\r\n            a.hasOwnProperty(c) && (this[c] = a[c]);\r\n          }\r\n          a.hasOwnProperty(\"toString\") && (this.toString = a.toString);\r\n        },\r\n        clone: function clone() {\r\n          return this.init.prototype.extend(this);\r\n        }\r\n      },\r\n          r = l.WordArray = t.extend({\r\n        init: function init(a, c) {\r\n          a = this.words = a || [];\r\n          this.sigBytes = c != p ? c : 4 * a.length;\r\n        },\r\n        toString: function toString(a) {\r\n          return (a || v).stringify(this);\r\n        },\r\n        concat: function concat(a) {\r\n          var c = this.words,\r\n              e = a.words,\r\n              j = this.sigBytes;\r\n          a = a.sigBytes;\r\n          this.clamp();\r\n          if (j % 4) for (var k = 0; k < a; k++) {\r\n            c[j + k >>> 2] |= (e[k >>> 2] >>> 24 - 8 * (k % 4) & 255) << 24 - 8 * ((j + k) % 4);\r\n          } else if (65535 < e.length) for (k = 0; k < a; k += 4) {\r\n            c[j + k >>> 2] = e[k >>> 2];\r\n          } else c.push.apply(c, e);\r\n          this.sigBytes += a;\r\n          return this;\r\n        },\r\n        clamp: function clamp() {\r\n          var a = this.words,\r\n              c = this.sigBytes;\r\n          a[c >>> 2] &= 4294967295 << 32 - 8 * (c % 4);\r\n          a.length = u.ceil(c / 4);\r\n        },\r\n        clone: function clone() {\r\n          var a = t.clone.call(this);\r\n          a.words = this.words.slice(0);\r\n          return a;\r\n        },\r\n        random: function random(a) {\r\n          for (var c = [], e = 0; e < a; e += 4) {\r\n            c.push(4294967296 * u.random() | 0);\r\n          }\r\n          return new r.init(c, a);\r\n        }\r\n      }),\r\n          w = d.enc = {},\r\n          v = w.Hex = {\r\n        stringify: function stringify(a) {\r\n          var c = a.words;\r\n          a = a.sigBytes;\r\n          for (var e = [], j = 0; j < a; j++) {\r\n            var k = c[j >>> 2] >>> 24 - 8 * (j % 4) & 255;\r\n            e.push((k >>> 4).toString(16));\r\n            e.push((k & 15).toString(16));\r\n          }\r\n          return e.join(\"\");\r\n        },\r\n        parse: function parse(a) {\r\n          for (var c = a.length, e = [], j = 0; j < c; j += 2) {\r\n            e[j >>> 3] |= parseInt(a.substr(j, 2), 16) << 24 - 4 * (j % 8);\r\n          }\r\n          return new r.init(e, c / 2);\r\n        }\r\n      },\r\n          b = w.Latin1 = {\r\n        stringify: function stringify(a) {\r\n          var c = a.words;\r\n          a = a.sigBytes;\r\n          for (var e = [], j = 0; j < a; j++) {\r\n            e.push(String.fromCharCode(c[j >>> 2] >>> 24 - 8 * (j % 4) & 255));\r\n          }\r\n          return e.join(\"\");\r\n        },\r\n        parse: function parse(a) {\r\n          for (var c = a.length, e = [], j = 0; j < c; j++) {\r\n            e[j >>> 2] |= (a.charCodeAt(j) & 255) << 24 - 8 * (j % 4);\r\n          }\r\n          return new r.init(e, c);\r\n        }\r\n      },\r\n          x = w.Utf8 = {\r\n        stringify: function stringify(a) {\r\n          try {\r\n            return decodeURIComponent(escape(b.stringify(a)));\r\n          } catch (c) {\r\n            throw Error(\"Malformed UTF-8 data\");\r\n          }\r\n        },\r\n        parse: function parse(a) {\r\n          return b.parse(unescape(encodeURIComponent(a)));\r\n        }\r\n      },\r\n          q = l.BufferedBlockAlgorithm = t.extend({\r\n        reset: function reset() {\r\n          this._data = new r.init();\r\n          this._nDataBytes = 0;\r\n        },\r\n        _append: function _append(a) {\r\n          \"string\" == typeof a && (a = x.parse(a));\r\n          this._data.concat(a);\r\n          this._nDataBytes += a.sigBytes;\r\n        },\r\n        _process: function _process(a) {\r\n          var c = this._data,\r\n              e = c.words,\r\n              j = c.sigBytes,\r\n              k = this.blockSize,\r\n              b = j / (4 * k),\r\n              b = a ? u.ceil(b) : u.max((b | 0) - this._minBufferSize, 0);\r\n          a = b * k;\r\n          j = u.min(4 * a, j);\r\n          if (a) {\r\n            for (var q = 0; q < a; q += k) {\r\n              this._doProcessBlock(e, q);\r\n            }\r\n            q = e.splice(0, a);\r\n            c.sigBytes -= j;\r\n          }\r\n          return new r.init(q, j);\r\n        },\r\n        clone: function clone() {\r\n          var a = t.clone.call(this);\r\n          a._data = this._data.clone();\r\n          return a;\r\n        },\r\n        _minBufferSize: 0\r\n      });\r\n      l.Hasher = q.extend({\r\n        cfg: t.extend(),\r\n        init: function init(a) {\r\n          this.cfg = this.cfg.extend(a);\r\n          this.reset();\r\n        },\r\n        reset: function reset() {\r\n          q.reset.call(this);\r\n          this._doReset();\r\n        },\r\n        update: function update(a) {\r\n          this._append(a);\r\n          this._process();\r\n          return this;\r\n        },\r\n        finalize: function finalize(a) {\r\n          a && this._append(a);\r\n          return this._doFinalize();\r\n        },\r\n        blockSize: 16,\r\n        _createHelper: function _createHelper(a) {\r\n          return function (b, e) {\r\n            return new a.init(e).finalize(b);\r\n          };\r\n        },\r\n        _createHmacHelper: function _createHmacHelper(a) {\r\n          return function (b, e) {\r\n            return new n.HMAC.init(a, e).finalize(b);\r\n          };\r\n        }\r\n      });\r\n      var n = d.algo = {};\r\n      return d;\r\n    }(Math);\r\n    (function () {\r\n      var u = CryptoJS,\r\n          p = u.lib.WordArray;\r\n      u.enc.Base64 = {\r\n        stringify: function stringify(d) {\r\n          var l = d.words,\r\n              p = d.sigBytes,\r\n              t = this._map;\r\n          d.clamp();\r\n          d = [];\r\n          for (var r = 0; r < p; r += 3) {\r\n            for (var w = (l[r >>> 2] >>> 24 - 8 * (r % 4) & 255) << 16 | (l[r + 1 >>> 2] >>> 24 - 8 * ((r + 1) % 4) & 255) << 8 | l[r + 2 >>> 2] >>> 24 - 8 * ((r + 2) % 4) & 255, v = 0; 4 > v && r + 0.75 * v < p; v++) {\r\n              d.push(t.charAt(w >>> 6 * (3 - v) & 63));\r\n            }\r\n          }\r\n          if (l = t.charAt(64)) for (; d.length % 4;) {\r\n            d.push(l);\r\n          }\r\n          return d.join(\"\");\r\n        },\r\n        parse: function parse(d) {\r\n          var l = d.length,\r\n              s = this._map,\r\n              t = s.charAt(64);\r\n          t && (t = d.indexOf(t), -1 != t && (l = t));\r\n          for (var t = [], r = 0, w = 0; w < l; w++) {\r\n            if (w % 4) {\r\n              var v = s.indexOf(d.charAt(w - 1)) << 2 * (w % 4),\r\n                  b = s.indexOf(d.charAt(w)) >>> 6 - 2 * (w % 4);\r\n              t[r >>> 2] |= (v | b) << 24 - 8 * (r % 4);\r\n              r++;\r\n            }\r\n          }\r\n          return p.create(t, r);\r\n        },\r\n        _map: \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\"\r\n      };\r\n    })();\r\n    (function (u) {\r\n      function p(b, n, a, c, e, j, k) {\r\n        b = b + (n & a | ~n & c) + e + k;\r\n        return (b << j | b >>> 32 - j) + n;\r\n      }\r\n      function d(b, n, a, c, e, j, k) {\r\n        b = b + (n & c | a & ~c) + e + k;\r\n        return (b << j | b >>> 32 - j) + n;\r\n      }\r\n      function l(b, n, a, c, e, j, k) {\r\n        b = b + (n ^ a ^ c) + e + k;\r\n        return (b << j | b >>> 32 - j) + n;\r\n      }\r\n      function s(b, n, a, c, e, j, k) {\r\n        b = b + (a ^ (n | ~c)) + e + k;\r\n        return (b << j | b >>> 32 - j) + n;\r\n      }\r\n      for (var t = CryptoJS, r = t.lib, w = r.WordArray, v = r.Hasher, r = t.algo, b = [], x = 0; 64 > x; x++) {\r\n        b[x] = 4294967296 * u.abs(u.sin(x + 1)) | 0;\r\n      }\r\n      r = r.MD5 = v.extend({\r\n        _doReset: function _doReset() {\r\n          this._hash = new w.init([1732584193, 4023233417, 2562383102, 271733878]);\r\n        },\r\n        _doProcessBlock: function _doProcessBlock(q, n) {\r\n          for (var a = 0; 16 > a; a++) {\r\n            var c = n + a,\r\n                e = q[c];\r\n            q[c] = (e << 8 | e >>> 24) & 16711935 | (e << 24 | e >>> 8) & 4278255360;\r\n          }\r\n          var a = this._hash.words,\r\n              c = q[n + 0],\r\n              e = q[n + 1],\r\n              j = q[n + 2],\r\n              k = q[n + 3],\r\n              z = q[n + 4],\r\n              r = q[n + 5],\r\n              t = q[n + 6],\r\n              w = q[n + 7],\r\n              v = q[n + 8],\r\n              A = q[n + 9],\r\n              B = q[n + 10],\r\n              C = q[n + 11],\r\n              u = q[n + 12],\r\n              D = q[n + 13],\r\n              E = q[n + 14],\r\n              x = q[n + 15],\r\n              f = a[0],\r\n              m = a[1],\r\n              g = a[2],\r\n              h = a[3],\r\n              f = p(f, m, g, h, c, 7, b[0]),\r\n              h = p(h, f, m, g, e, 12, b[1]),\r\n              g = p(g, h, f, m, j, 17, b[2]),\r\n              m = p(m, g, h, f, k, 22, b[3]),\r\n              f = p(f, m, g, h, z, 7, b[4]),\r\n              h = p(h, f, m, g, r, 12, b[5]),\r\n              g = p(g, h, f, m, t, 17, b[6]),\r\n              m = p(m, g, h, f, w, 22, b[7]),\r\n              f = p(f, m, g, h, v, 7, b[8]),\r\n              h = p(h, f, m, g, A, 12, b[9]),\r\n              g = p(g, h, f, m, B, 17, b[10]),\r\n              m = p(m, g, h, f, C, 22, b[11]),\r\n              f = p(f, m, g, h, u, 7, b[12]),\r\n              h = p(h, f, m, g, D, 12, b[13]),\r\n              g = p(g, h, f, m, E, 17, b[14]),\r\n              m = p(m, g, h, f, x, 22, b[15]),\r\n              f = d(f, m, g, h, e, 5, b[16]),\r\n              h = d(h, f, m, g, t, 9, b[17]),\r\n              g = d(g, h, f, m, C, 14, b[18]),\r\n              m = d(m, g, h, f, c, 20, b[19]),\r\n              f = d(f, m, g, h, r, 5, b[20]),\r\n              h = d(h, f, m, g, B, 9, b[21]),\r\n              g = d(g, h, f, m, x, 14, b[22]),\r\n              m = d(m, g, h, f, z, 20, b[23]),\r\n              f = d(f, m, g, h, A, 5, b[24]),\r\n              h = d(h, f, m, g, E, 9, b[25]),\r\n              g = d(g, h, f, m, k, 14, b[26]),\r\n              m = d(m, g, h, f, v, 20, b[27]),\r\n              f = d(f, m, g, h, D, 5, b[28]),\r\n              h = d(h, f, m, g, j, 9, b[29]),\r\n              g = d(g, h, f, m, w, 14, b[30]),\r\n              m = d(m, g, h, f, u, 20, b[31]),\r\n              f = l(f, m, g, h, r, 4, b[32]),\r\n              h = l(h, f, m, g, v, 11, b[33]),\r\n              g = l(g, h, f, m, C, 16, b[34]),\r\n              m = l(m, g, h, f, E, 23, b[35]),\r\n              f = l(f, m, g, h, e, 4, b[36]),\r\n              h = l(h, f, m, g, z, 11, b[37]),\r\n              g = l(g, h, f, m, w, 16, b[38]),\r\n              m = l(m, g, h, f, B, 23, b[39]),\r\n              f = l(f, m, g, h, D, 4, b[40]),\r\n              h = l(h, f, m, g, c, 11, b[41]),\r\n              g = l(g, h, f, m, k, 16, b[42]),\r\n              m = l(m, g, h, f, t, 23, b[43]),\r\n              f = l(f, m, g, h, A, 4, b[44]),\r\n              h = l(h, f, m, g, u, 11, b[45]),\r\n              g = l(g, h, f, m, x, 16, b[46]),\r\n              m = l(m, g, h, f, j, 23, b[47]),\r\n              f = s(f, m, g, h, c, 6, b[48]),\r\n              h = s(h, f, m, g, w, 10, b[49]),\r\n              g = s(g, h, f, m, E, 15, b[50]),\r\n              m = s(m, g, h, f, r, 21, b[51]),\r\n              f = s(f, m, g, h, u, 6, b[52]),\r\n              h = s(h, f, m, g, k, 10, b[53]),\r\n              g = s(g, h, f, m, B, 15, b[54]),\r\n              m = s(m, g, h, f, e, 21, b[55]),\r\n              f = s(f, m, g, h, v, 6, b[56]),\r\n              h = s(h, f, m, g, x, 10, b[57]),\r\n              g = s(g, h, f, m, t, 15, b[58]),\r\n              m = s(m, g, h, f, D, 21, b[59]),\r\n              f = s(f, m, g, h, z, 6, b[60]),\r\n              h = s(h, f, m, g, C, 10, b[61]),\r\n              g = s(g, h, f, m, j, 15, b[62]),\r\n              m = s(m, g, h, f, A, 21, b[63]);\r\n          a[0] = a[0] + f | 0;\r\n          a[1] = a[1] + m | 0;\r\n          a[2] = a[2] + g | 0;\r\n          a[3] = a[3] + h | 0;\r\n        },\r\n        _doFinalize: function _doFinalize() {\r\n          var b = this._data,\r\n              n = b.words,\r\n              a = 8 * this._nDataBytes,\r\n              c = 8 * b.sigBytes;\r\n          n[c >>> 5] |= 128 << 24 - c % 32;\r\n          var e = u.floor(a / 4294967296);\r\n          n[(c + 64 >>> 9 << 4) + 15] = (e << 8 | e >>> 24) & 16711935 | (e << 24 | e >>> 8) & 4278255360;\r\n          n[(c + 64 >>> 9 << 4) + 14] = (a << 8 | a >>> 24) & 16711935 | (a << 24 | a >>> 8) & 4278255360;\r\n          b.sigBytes = 4 * (n.length + 1);\r\n          this._process();\r\n          b = this._hash;\r\n          n = b.words;\r\n          for (a = 0; 4 > a; a++) {\r\n            c = n[a], n[a] = (c << 8 | c >>> 24) & 16711935 | (c << 24 | c >>> 8) & 4278255360;\r\n          }\r\n          return b;\r\n        },\r\n        clone: function clone() {\r\n          var b = v.clone.call(this);\r\n          b._hash = this._hash.clone();\r\n          return b;\r\n        }\r\n      });\r\n      t.MD5 = v._createHelper(r);\r\n      t.HmacMD5 = v._createHmacHelper(r);\r\n    })(Math);\r\n    (function () {\r\n      var u = CryptoJS,\r\n          p = u.lib,\r\n          d = p.Base,\r\n          l = p.WordArray,\r\n          p = u.algo,\r\n          s = p.EvpKDF = d.extend({\r\n        cfg: d.extend({\r\n          keySize: 4,\r\n          hasher: p.MD5,\r\n          iterations: 1\r\n        }),\r\n        init: function init(d) {\r\n          this.cfg = this.cfg.extend(d);\r\n        },\r\n        compute: function compute(d, r) {\r\n          for (var p = this.cfg, s = p.hasher.create(), b = l.create(), u = b.words, q = p.keySize, p = p.iterations; u.length < q;) {\r\n            n && s.update(n);\r\n            var n = s.update(d).finalize(r);\r\n            s.reset();\r\n            for (var a = 1; a < p; a++) {\r\n              n = s.finalize(n), s.reset();\r\n            }\r\n            b.concat(n);\r\n          }\r\n          b.sigBytes = 4 * q;\r\n          return b;\r\n        }\r\n      });\r\n      u.EvpKDF = function (d, l, p) {\r\n        return s.create(p).compute(d, l);\r\n      };\r\n    })();\r\n    CryptoJS.lib.Cipher || function (u) {\r\n      var p = CryptoJS,\r\n          d = p.lib,\r\n          l = d.Base,\r\n          s = d.WordArray,\r\n          t = d.BufferedBlockAlgorithm,\r\n          r = p.enc.Base64,\r\n          w = p.algo.EvpKDF,\r\n          v = d.Cipher = t.extend({\r\n        cfg: l.extend(),\r\n        createEncryptor: function createEncryptor(e, a) {\r\n          return this.create(this._ENC_XFORM_MODE, e, a);\r\n        },\r\n        createDecryptor: function createDecryptor(e, a) {\r\n          return this.create(this._DEC_XFORM_MODE, e, a);\r\n        },\r\n        init: function init(e, a, b) {\r\n          this.cfg = this.cfg.extend(b);\r\n          this._xformMode = e;\r\n          this._key = a;\r\n          this.reset();\r\n        },\r\n        reset: function reset() {\r\n          t.reset.call(this);\r\n          this._doReset();\r\n        },\r\n        process: function process(e) {\r\n          this._append(e);\r\n          return this._process();\r\n        },\r\n        finalize: function finalize(e) {\r\n          e && this._append(e);\r\n          return this._doFinalize();\r\n        },\r\n        keySize: 4,\r\n        ivSize: 4,\r\n        _ENC_XFORM_MODE: 1,\r\n        _DEC_XFORM_MODE: 2,\r\n        _createHelper: function _createHelper(e) {\r\n          return {\r\n            encrypt: function encrypt(b, k, d) {\r\n              return (\"string\" == typeof k ? c : a).encrypt(e, b, k, d);\r\n            },\r\n            decrypt: function decrypt(b, k, d) {\r\n              return (\"string\" == typeof k ? c : a).decrypt(e, b, k, d);\r\n            }\r\n          };\r\n        }\r\n      });\r\n      d.StreamCipher = v.extend({\r\n        _doFinalize: function _doFinalize() {\r\n          return this._process(!0);\r\n        },\r\n        blockSize: 1\r\n      });\r\n      var b = p.mode = {},\r\n          x = function x(e, a, b) {\r\n        var c = this._iv;\r\n        c ? this._iv = u : c = this._prevBlock;\r\n        for (var d = 0; d < b; d++) {\r\n          e[a + d] ^= c[d];\r\n        }\r\n      },\r\n          q = (d.BlockCipherMode = l.extend({\r\n        createEncryptor: function createEncryptor(e, a) {\r\n          return this.Encryptor.create(e, a);\r\n        },\r\n        createDecryptor: function createDecryptor(e, a) {\r\n          return this.Decryptor.create(e, a);\r\n        },\r\n        init: function init(e, a) {\r\n          this._cipher = e;\r\n          this._iv = a;\r\n        }\r\n      })).extend();\r\n      q.Encryptor = q.extend({\r\n        processBlock: function processBlock(e, a) {\r\n          var b = this._cipher,\r\n              c = b.blockSize;\r\n          x.call(this, e, a, c);\r\n          b.encryptBlock(e, a);\r\n          this._prevBlock = e.slice(a, a + c);\r\n        }\r\n      });\r\n      q.Decryptor = q.extend({\r\n        processBlock: function processBlock(e, a) {\r\n          var b = this._cipher,\r\n              c = b.blockSize,\r\n              d = e.slice(a, a + c);\r\n          b.decryptBlock(e, a);\r\n          x.call(this, e, a, c);\r\n          this._prevBlock = d;\r\n        }\r\n      });\r\n      b = b.CBC = q;\r\n      q = (p.pad = {}).Pkcs7 = {\r\n        pad: function pad(a, b) {\r\n          for (var c = 4 * b, c = c - a.sigBytes % c, d = c << 24 | c << 16 | c << 8 | c, l = [], n = 0; n < c; n += 4) {\r\n            l.push(d);\r\n          }\r\n          c = s.create(l, c);\r\n          a.concat(c);\r\n        },\r\n        unpad: function unpad(a) {\r\n          a.sigBytes -= a.words[a.sigBytes - 1 >>> 2] & 255;\r\n        }\r\n      };\r\n      d.BlockCipher = v.extend({\r\n        cfg: v.cfg.extend({\r\n          mode: b,\r\n          padding: q\r\n        }),\r\n        reset: function reset() {\r\n          v.reset.call(this);\r\n          var a = this.cfg,\r\n              b = a.iv,\r\n              a = a.mode;\r\n          if (this._xformMode == this._ENC_XFORM_MODE) var c = a.createEncryptor;else c = a.createDecryptor, this._minBufferSize = 1;\r\n          this._mode = c.call(a, this, b && b.words);\r\n        },\r\n        _doProcessBlock: function _doProcessBlock(a, b) {\r\n          this._mode.processBlock(a, b);\r\n        },\r\n        _doFinalize: function _doFinalize() {\r\n          var a = this.cfg.padding;\r\n          if (this._xformMode == this._ENC_XFORM_MODE) {\r\n            a.pad(this._data, this.blockSize);\r\n            var b = this._process(!0);\r\n          } else b = this._process(!0), a.unpad(b);\r\n          return b;\r\n        },\r\n        blockSize: 4\r\n      });\r\n      var n = d.CipherParams = l.extend({\r\n        init: function init(a) {\r\n          this.mixIn(a);\r\n        },\r\n        toString: function toString(a) {\r\n          return (a || this.formatter).stringify(this);\r\n        }\r\n      }),\r\n          b = (p.format = {}).OpenSSL = {\r\n        stringify: function stringify(a) {\r\n          var b = a.ciphertext;\r\n          a = a.salt;\r\n          return (a ? s.create([1398893684, 1701076831]).concat(a).concat(b) : b).toString(r);\r\n        },\r\n        parse: function parse(a) {\r\n          a = r.parse(a);\r\n          var b = a.words;\r\n          if (1398893684 == b[0] && 1701076831 == b[1]) {\r\n            var c = s.create(b.slice(2, 4));\r\n            b.splice(0, 4);\r\n            a.sigBytes -= 16;\r\n          }\r\n          return n.create({\r\n            ciphertext: a,\r\n            salt: c\r\n          });\r\n        }\r\n      },\r\n          a = d.SerializableCipher = l.extend({\r\n        cfg: l.extend({\r\n          format: b\r\n        }),\r\n        encrypt: function encrypt(a, b, c, d) {\r\n          d = this.cfg.extend(d);\r\n          var l = a.createEncryptor(c, d);\r\n          b = l.finalize(b);\r\n          l = l.cfg;\r\n          return n.create({\r\n            ciphertext: b,\r\n            key: c,\r\n            iv: l.iv,\r\n            algorithm: a,\r\n            mode: l.mode,\r\n            padding: l.padding,\r\n            blockSize: a.blockSize,\r\n            formatter: d.format\r\n          });\r\n        },\r\n        decrypt: function decrypt(a, b, c, d) {\r\n          d = this.cfg.extend(d);\r\n          b = this._parse(b, d.format);\r\n          return a.createDecryptor(c, d).finalize(b.ciphertext);\r\n        },\r\n        _parse: function _parse(a, b) {\r\n          return \"string\" == typeof a ? b.parse(a, this) : a;\r\n        }\r\n      }),\r\n          p = (p.kdf = {}).OpenSSL = {\r\n        execute: function execute(a, b, c, d) {\r\n          d || (d = s.random(8));\r\n          a = w.create({\r\n            keySize: b + c\r\n          }).compute(a, d);\r\n          c = s.create(a.words.slice(b), 4 * c);\r\n          a.sigBytes = 4 * b;\r\n          return n.create({\r\n            key: a,\r\n            iv: c,\r\n            salt: d\r\n          });\r\n        }\r\n      },\r\n          c = d.PasswordBasedCipher = a.extend({\r\n        cfg: a.cfg.extend({\r\n          kdf: p\r\n        }),\r\n        encrypt: function encrypt(b, c, d, l) {\r\n          l = this.cfg.extend(l);\r\n          d = l.kdf.execute(d, b.keySize, b.ivSize);\r\n          l.iv = d.iv;\r\n          b = a.encrypt.call(this, b, c, d.key, l);\r\n          b.mixIn(d);\r\n          return b;\r\n        },\r\n        decrypt: function decrypt(b, c, d, l) {\r\n          l = this.cfg.extend(l);\r\n          c = this._parse(c, l.format);\r\n          d = l.kdf.execute(d, b.keySize, b.ivSize, c.salt);\r\n          l.iv = d.iv;\r\n          return a.decrypt.call(this, b, c, d.key, l);\r\n        }\r\n      });\r\n    }();\r\n    (function () {\r\n      for (var u = CryptoJS, p = u.lib.BlockCipher, d = u.algo, l = [], s = [], t = [], r = [], w = [], v = [], b = [], x = [], q = [], n = [], a = [], c = 0; 256 > c; c++) {\r\n        a[c] = 128 > c ? c << 1 : c << 1 ^ 283;\r\n      }\r\n      for (var e = 0, j = 0, c = 0; 256 > c; c++) {\r\n        var k = j ^ j << 1 ^ j << 2 ^ j << 3 ^ j << 4,\r\n            k = k >>> 8 ^ k & 255 ^ 99;\r\n        l[e] = k;\r\n        s[k] = e;\r\n        var z = a[e],\r\n            F = a[z],\r\n            G = a[F],\r\n            y = 257 * a[k] ^ 16843008 * k;\r\n        t[e] = y << 24 | y >>> 8;\r\n        r[e] = y << 16 | y >>> 16;\r\n        w[e] = y << 8 | y >>> 24;\r\n        v[e] = y;\r\n        y = 16843009 * G ^ 65537 * F ^ 257 * z ^ 16843008 * e;\r\n        b[k] = y << 24 | y >>> 8;\r\n        x[k] = y << 16 | y >>> 16;\r\n        q[k] = y << 8 | y >>> 24;\r\n        n[k] = y;\r\n        e ? (e = z ^ a[a[a[G ^ z]]], j ^= a[a[j]]) : e = j = 1;\r\n      }\r\n      var H = [0, 1, 2, 4, 8, 16, 32, 64, 128, 27, 54],\r\n          d = d.AES = p.extend({\r\n        _doReset: function _doReset() {\r\n          for (var a = this._key, c = a.words, d = a.sigBytes / 4, a = 4 * ((this._nRounds = d + 6) + 1), e = this._keySchedule = [], j = 0; j < a; j++) {\r\n            if (j < d) e[j] = c[j];else {\r\n              var k = e[j - 1];\r\n              j % d ? 6 < d && 4 == j % d && (k = l[k >>> 24] << 24 | l[k >>> 16 & 255] << 16 | l[k >>> 8 & 255] << 8 | l[k & 255]) : (k = k << 8 | k >>> 24, k = l[k >>> 24] << 24 | l[k >>> 16 & 255] << 16 | l[k >>> 8 & 255] << 8 | l[k & 255], k ^= H[j / d | 0] << 24);\r\n              e[j] = e[j - d] ^ k;\r\n            }\r\n          }\r\n          c = this._invKeySchedule = [];\r\n          for (d = 0; d < a; d++) {\r\n            j = a - d, k = d % 4 ? e[j] : e[j - 4], c[d] = 4 > d || 4 >= j ? k : b[l[k >>> 24]] ^ x[l[k >>> 16 & 255]] ^ q[l[k >>> 8 & 255]] ^ n[l[k & 255]];\r\n          }\r\n        },\r\n        encryptBlock: function encryptBlock(a, b) {\r\n          this._doCryptBlock(a, b, this._keySchedule, t, r, w, v, l);\r\n        },\r\n        decryptBlock: function decryptBlock(a, c) {\r\n          var d = a[c + 1];\r\n          a[c + 1] = a[c + 3];\r\n          a[c + 3] = d;\r\n          this._doCryptBlock(a, c, this._invKeySchedule, b, x, q, n, s);\r\n          d = a[c + 1];\r\n          a[c + 1] = a[c + 3];\r\n          a[c + 3] = d;\r\n        },\r\n        _doCryptBlock: function _doCryptBlock(a, b, c, d, e, j, l, f) {\r\n          for (var m = this._nRounds, g = a[b] ^ c[0], h = a[b + 1] ^ c[1], k = a[b + 2] ^ c[2], n = a[b + 3] ^ c[3], p = 4, r = 1; r < m; r++) {\r\n            var q = d[g >>> 24] ^ e[h >>> 16 & 255] ^ j[k >>> 8 & 255] ^ l[n & 255] ^ c[p++],\r\n                s = d[h >>> 24] ^ e[k >>> 16 & 255] ^ j[n >>> 8 & 255] ^ l[g & 255] ^ c[p++],\r\n                t = d[k >>> 24] ^ e[n >>> 16 & 255] ^ j[g >>> 8 & 255] ^ l[h & 255] ^ c[p++],\r\n                n = d[n >>> 24] ^ e[g >>> 16 & 255] ^ j[h >>> 8 & 255] ^ l[k & 255] ^ c[p++],\r\n                g = q,\r\n                h = s,\r\n                k = t;\r\n          }\r\n          q = (f[g >>> 24] << 24 | f[h >>> 16 & 255] << 16 | f[k >>> 8 & 255] << 8 | f[n & 255]) ^ c[p++];\r\n          s = (f[h >>> 24] << 24 | f[k >>> 16 & 255] << 16 | f[n >>> 8 & 255] << 8 | f[g & 255]) ^ c[p++];\r\n          t = (f[k >>> 24] << 24 | f[n >>> 16 & 255] << 16 | f[g >>> 8 & 255] << 8 | f[h & 255]) ^ c[p++];\r\n          n = (f[n >>> 24] << 24 | f[g >>> 16 & 255] << 16 | f[h >>> 8 & 255] << 8 | f[k & 255]) ^ c[p++];\r\n          a[b] = q;\r\n          a[b + 1] = s;\r\n          a[b + 2] = t;\r\n          a[b + 3] = n;\r\n        },\r\n        keySize: 8\r\n      });\r\n      u.AES = p._createHelper(d);\r\n    })();\r\n    return CryptoJS;\r\n  }();\r\n\r\n  function getAppKey() {\r\n    return getAppKey$1();\r\n  }\r\n  var accessToken$1 = null;\r\n  function getAccessToken() {\r\n    if (accessToken$1 === null) {\r\n      accessToken$1 = retrieveItem(getAccessTokenKey());\r\n    }\r\n    return accessToken$1;\r\n  }\r\n  function setAccessToken(token) {\r\n    var persist = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\r\n    accessToken$1 = token;\r\n    if (token === null || persist === false) {\r\n      removeItem(getAccessTokenKey());\r\n    } else {\r\n      storeItem(getAccessTokenKey(), token);\r\n    }\r\n  }\r\n  function getRefreshToken() {\r\n    console.error('unsupported operation: Auth.getRefreshToken()');\r\n    return '';\r\n  }\r\n  function setRefreshToken(token) {\r\n    console.error('unsupported operation: Auth.setRefreshToken()');\r\n  }\r\n  function storeItem(key, value) {\r\n    var item = encrypt(value, getAppKey());\r\n    localStorage.setItem(key, item);\r\n  }\r\n  function retrieveItem(key) {\r\n    var item = localStorage.getItem(key);\r\n    return item ? decrypt(item, getAppKey()) : null;\r\n  }\r\n  function removeItem(key) {\r\n    localStorage.removeItem(key);\r\n  }\r\n  var tokenStorageKeys = {};\r\n  function getAccessTokenKey() {\r\n    if (!tokenStorageKeys.accessTokenKey) {\r\n      tokenStorageKeys.accessTokenKey = 'kakao_' + hash('kat' + getAppKey());\r\n    }\r\n    return tokenStorageKeys.accessTokenKey;\r\n  }\r\n  function hash(msg) {\r\n    return CryptoJS.MD5(msg).toString();\r\n  }\r\n  function encrypt(msg, passphrase) {\r\n    return CryptoJS.AES.encrypt(msg, passphrase).toString();\r\n  }\r\n  function decrypt(encrypted, passphrase) {\r\n    return CryptoJS.AES.decrypt(encrypted, passphrase).toString(CryptoJS.enc.Utf8);\r\n  }\r\n\r\n  var secret = /*#__PURE__*/Object.freeze({\r\n    __proto__: null,\r\n    getAppKey: getAppKey,\r\n    getAccessToken: getAccessToken,\r\n    setAccessToken: setAccessToken,\r\n    getRefreshToken: getRefreshToken,\r\n    setRefreshToken: setRefreshToken\r\n  });\r\n\r\n  function accessToken() {\r\n    return \"Bearer \".concat(getAccessToken());\r\n  }\r\n  function appKey() {\r\n    return \"KakaoAK \".concat(getAppKey());\r\n  }\r\n\r\n  var postApiCommonParams = {\r\n    permission: isOneOf(['A', 'F', 'M']),\r\n    enable_share: isBoolean,\r\n    android_exec_param: isString,\r\n    ios_exec_param: isString,\r\n    android_market_param: isString,\r\n    ios_market_param: isString\r\n  };\r\n  var secureResource = {\r\n    secure_resource: isBoolean\r\n  };\r\n  function forceSecureResource(settings) {\r\n    if (settings.secure_resource === false) {\r\n      if (console) {\r\n        console.warn('KakaoWarning: The secure_resource parameter is deprecated.');\r\n      }\r\n      settings.secure_resource = true;\r\n    }\r\n  }\r\n  function storyActivityContentValidator(obj) {\r\n    if (!isString(obj)) {\r\n      return false;\r\n    }\r\n    if (obj.length === 0 || obj.length > 2048) {\r\n      throw new KakaoError('content length should be between 0 and 2048');\r\n    }\r\n    return true;\r\n  }\r\n  function kageImageUrlListValidator(obj) {\r\n    if (!isArray(obj)) {\r\n      return false;\r\n    }\r\n    return every(obj, function (path) {\r\n      if (!isString(path)) {\r\n        return false;\r\n      }\r\n      if (isURL(path)) {\r\n        throw new KakaoError(\"url in image_url_list should be a kage url, obtained from '/v1/api/story/upload/multi'.\");\r\n      }\r\n      return true;\r\n    });\r\n  }\r\n  function hasHeaderBackgroundImage(obj) {\r\n    if (obj.header_image_url || obj.header_image_width || obj.header_image_height) {\r\n      delete obj.header_image_url;\r\n      delete obj.header_image_width;\r\n      delete obj.header_image_height;\r\n      if (console) {\r\n        console.warn(\"KakaoWarning: The parameters (\".concat(['header_image_url', 'header_image_width', 'header_image_height'].join(', '), \") for header background image are deprecated.\"));\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n  var apiRules = {\r\n    '/v1/user/signup': {\r\n      method: 'post',\r\n      data: {\r\n        optional: {\r\n          properties: isObject\r\n        }\r\n      }\r\n    },\r\n    '/v1/user/unlink': {\r\n      method: 'post'\r\n    },\r\n    '/v2/user/me': {\r\n      method: 'get',\r\n      data: {\r\n        optional: _objectSpread2({\r\n          property_keys: isArray\r\n        }, secureResource)\r\n      }\r\n    },\r\n    '/v1/user/logout': {\r\n      method: 'post',\r\n      data: {}\r\n    },\r\n    '/v1/user/update_profile': {\r\n      method: 'post',\r\n      data: {\r\n        required: {\r\n          properties: isObject\r\n        }\r\n      }\r\n    },\r\n    '/v1/user/access_token_info': {\r\n      method: 'get',\r\n      data: {}\r\n    },\r\n    '/v2/user/scopes': {\r\n      method: 'get',\r\n      data: {\r\n        optional: {\r\n          scopes: isArray\r\n        }\r\n      }\r\n    },\r\n    '/v2/user/revoke/scopes': {\r\n      method: 'post',\r\n      data: {\r\n        required: {\r\n          scopes: isArray\r\n        }\r\n      }\r\n    },\r\n    '/v1/user/service/terms': {\r\n      method: 'get'\r\n    },\r\n    '/v1/user/shipping_address': {\r\n      method: 'get',\r\n      data: {\r\n        optional: {\r\n          address_id: isInteger,\r\n          from_updated_at: isInteger,\r\n          page_size: isInteger\r\n        }\r\n      }\r\n    },\r\n    '/v1/api/talk/profile': {\r\n      method: 'get',\r\n      data: {\r\n        optional: secureResource,\r\n        after: forceSecureResource\r\n      }\r\n    },\r\n    '/v1/api/talk/friends': {\r\n      method: 'get',\r\n      data: {\r\n        optional: _objectSpread2({\r\n          offset: isInteger,\r\n          limit: isInteger,\r\n          order: isString,\r\n          friend_order: isString\r\n        }, secureResource),\r\n        after: forceSecureResource\r\n      }\r\n    },\r\n    '/v1/friends': {\r\n      method: 'get',\r\n      data: {\r\n        optional: _objectSpread2({\r\n          offset: isInteger,\r\n          limit: isInteger,\r\n          order: isString,\r\n          friend_order: isString\r\n        }, secureResource),\r\n        after: forceSecureResource\r\n      }\r\n    },\r\n    '/v2/api/talk/memo/send': {\r\n      method: 'post',\r\n      data: {\r\n        required: {\r\n          template_id: isInteger\r\n        },\r\n        optional: {\r\n          template_args: isObject\r\n        }\r\n      }\r\n    },\r\n    '/v2/api/talk/memo/scrap/send': {\r\n      method: 'post',\r\n      data: {\r\n        required: {\r\n          request_url: isString\r\n        },\r\n        optional: {\r\n          template_id: isInteger,\r\n          template_args: isObject\r\n        }\r\n      }\r\n    },\r\n    '/v2/api/talk/memo/default/send': {\r\n      method: 'post',\r\n      data: {\r\n        required: {\r\n          template_object: function template_object(obj) {\r\n            return isObject(obj) && hasHeaderBackgroundImage(obj);\r\n          }\r\n        }\r\n      }\r\n    },\r\n    '/v1/api/talk/friends/message/send': {\r\n      method: 'post',\r\n      data: {\r\n        required: {\r\n          template_id: isInteger,\r\n          receiver_uuids: isArray,\r\n          receiver_id_type: isString\r\n        },\r\n        optional: {\r\n          template_args: isObject\r\n        },\r\n        defaults: function defaults() {\r\n          return {\r\n            receiver_id_type: 'uuid'\r\n          };\r\n        }\r\n      }\r\n    },\r\n    '/v1/api/talk/friends/message/scrap/send': {\r\n      method: 'post',\r\n      data: {\r\n        required: {\r\n          request_url: isString,\r\n          receiver_uuids: isArray,\r\n          receiver_id_type: isString\r\n        },\r\n        optional: {\r\n          template_id: isInteger,\r\n          template_args: isObject\r\n        },\r\n        defaults: function defaults() {\r\n          return {\r\n            receiver_id_type: 'uuid'\r\n          };\r\n        }\r\n      }\r\n    },\r\n    '/v1/api/talk/friends/message/default/send': {\r\n      method: 'post',\r\n      data: {\r\n        required: {\r\n          template_object: function template_object(obj) {\r\n            return isObject(obj) && hasHeaderBackgroundImage(obj);\r\n          },\r\n          receiver_uuids: isArray,\r\n          receiver_id_type: isString\r\n        },\r\n        defaults: function defaults() {\r\n          return {\r\n            receiver_id_type: 'uuid'\r\n          };\r\n        }\r\n      }\r\n    },\r\n    '/v2/api/kakaolink/talk/template/validate': {\r\n      method: 'get',\r\n      data: {\r\n        required: {\r\n          link_ver: isString,\r\n          template_id: isInteger\r\n        },\r\n        optional: {\r\n          template_args: isObject\r\n        }\r\n      },\r\n      authType: appKey\r\n    },\r\n    '/v2/api/kakaolink/talk/template/scrap': {\r\n      method: 'get',\r\n      data: {\r\n        required: {\r\n          link_ver: isString,\r\n          request_url: isString\r\n        },\r\n        optional: {\r\n          template_id: isInteger,\r\n          template_args: isObject\r\n        }\r\n      },\r\n      authType: appKey\r\n    },\r\n    '/v2/api/kakaolink/talk/template/default': {\r\n      method: 'get',\r\n      data: {\r\n        required: {\r\n          link_ver: isString,\r\n          template_object: isObject\r\n        }\r\n      },\r\n      authType: appKey\r\n    },\r\n    '/v2/api/talk/message/image/upload': {\r\n      method: 'post',\r\n      data: {\r\n        required: {\r\n          file: isObject\r\n        }\r\n      },\r\n      authType: appKey\r\n    },\r\n    '/v2/api/talk/message/image/delete': {\r\n      method: 'delete',\r\n      data: {\r\n        required: {\r\n          image_url: isString\r\n        }\r\n      },\r\n      authType: appKey\r\n    },\r\n    '/v2/api/talk/message/image/scrap': {\r\n      method: 'post',\r\n      data: {\r\n        required: {\r\n          image_url: isString\r\n        }\r\n      },\r\n      authType: appKey\r\n    },\r\n    '/v1/api/story/profile': {\r\n      method: 'get',\r\n      data: {\r\n        optional: secureResource\r\n      }\r\n    },\r\n    '/v1/api/story/isstoryuser': {\r\n      method: 'get'\r\n    },\r\n    '/v1/api/story/mystory': {\r\n      method: 'get',\r\n      data: {\r\n        required: {\r\n          id: isString\r\n        }\r\n      }\r\n    },\r\n    '/v1/api/story/mystories': {\r\n      method: 'get',\r\n      data: {\r\n        optional: {\r\n          last_id: isString\r\n        }\r\n      }\r\n    },\r\n    '/v1/api/story/linkinfo': {\r\n      method: 'get',\r\n      data: {\r\n        required: {\r\n          url: isString\r\n        }\r\n      }\r\n    },\r\n    '/v1/api/story/post/note': {\r\n      method: 'post',\r\n      data: {\r\n        required: {\r\n          content: storyActivityContentValidator\r\n        },\r\n        optional: postApiCommonParams\r\n      }\r\n    },\r\n    '/v1/api/story/post/photo': {\r\n      method: 'post',\r\n      data: {\r\n        required: {\r\n          image_url_list: kageImageUrlListValidator\r\n        },\r\n        optional: _objectSpread2({\r\n          content: storyActivityContentValidator\r\n        }, postApiCommonParams)\r\n      }\r\n    },\r\n    '/v1/api/story/post/link': {\r\n      method: 'post',\r\n      data: {\r\n        required: {\r\n          link_info: isObject\r\n        },\r\n        optional: _objectSpread2({\r\n          content: storyActivityContentValidator\r\n        }, postApiCommonParams)\r\n      }\r\n    },\r\n    '/v1/api/story/upload/multi': {\r\n      method: 'post',\r\n      data: {}\r\n    },\r\n    '/v1/api/story/delete/mystory': {\r\n      method: 'delete',\r\n      data: {\r\n        required: {\r\n          id: isString\r\n        }\r\n      }\r\n    },\r\n    '/v1/api/talk/channels': {\r\n      method: 'get',\r\n      data: {\r\n        optional: {\r\n          channel_public_ids: isArray\r\n        }\r\n      }\r\n    },\r\n    '/v1/api/talk/plusfriends': {\r\n      method: 'get',\r\n      data: {\r\n        optional: {\r\n          plus_friend_public_ids: isArray\r\n        }\r\n      }\r\n    }\r\n  };\r\n  var rules$7 = {\r\n    request: {\r\n      required: {\r\n        url: function url(_url) {\r\n          return isOneOf(keys(apiRules))(_url);\r\n        }\r\n      },\r\n      optional: {\r\n        data: isObject,\r\n        files: function files(obj) {\r\n          return passesOneOf([isArray, isFileList])(obj) && every(obj, passesOneOf([isFile, isBlob]));\r\n        },\r\n        file: isFile,\r\n        success: isFunction,\r\n        fail: isFunction,\r\n        always: isFunction\r\n      },\r\n      defaults: {\r\n        data: {},\r\n        success: emptyFunc,\r\n        fail: emptyFunc,\r\n        always: emptyFunc\r\n      }\r\n    },\r\n    api: apiRules\r\n  };\r\n\r\n  var proxyForRequest = null;\r\n  function request$5(settings) {\r\n    settings = processRules(settings, rules$7.request, 'API.request');\r\n    var url = settings.url;\r\n    var urlRule = rules$7.api[url].data;\r\n    if (urlRule) {\r\n      settings.data = processRules(settings.data, urlRule, \"API.request - \".concat(url));\r\n    }\r\n    if (!proxyForRequest) {\r\n      proxyForRequest = getProxy$1();\r\n      cleanups$7.push(function () {\r\n        proxyForRequest.destroy();\r\n        proxyForRequest = null;\r\n      });\r\n    }\r\n    return new es6Promise.Promise(function (resolve, reject) {\r\n      getConfig(settings).then(function (config) {\r\n        proxyForRequest.request(config, function (res) {\r\n          settings.success(res);\r\n          settings.always(res);\r\n          resolve(res);\r\n        }, function (xdmError) {\r\n          var error = parseXdmError(xdmError);\r\n          settings.fail(error);\r\n          settings.always(error);\r\n          reject(error);\r\n        });\r\n      }, function (error) {\r\n        reject(error);\r\n      });\r\n    });\r\n  }\r\n  function getProxy$1() {\r\n    return guardCreateEasyXDM(function () {\r\n      return new easyXDM_1.Rpc({\r\n        remote: URL.apiRemote\r\n      }, {\r\n        remote: {\r\n          request: {}\r\n        }\r\n      });\r\n    });\r\n  }\r\n  function parseXdmError(xdmError) {\r\n    try {\r\n      logDebug(xdmError);\r\n      return JSON.parse(xdmError.message.responseText);\r\n    } catch (e) {\r\n      return {\r\n        code: -777,\r\n        msg: 'Unknown error'\r\n      };\r\n    }\r\n  }\r\n  function getConfig(settings) {\r\n    var url = settings.url;\r\n    var urlSpec = rules$7.api[url];\r\n    var stringifiedData = {};\r\n    forEach(settings.data, function (value, key) {\r\n      stringifiedData[key] = isString(value) ? value : JSON.stringify(value);\r\n    });\r\n    var config = {\r\n      url: url,\r\n      method: urlSpec.method,\r\n      headers: {\r\n        KA: KAKAO_AGENT,\r\n        Authorization: (urlSpec.authType || accessToken)(),\r\n        'Cache-Control': 'no-cache',\r\n        Pragma: 'no-cache'\r\n      },\r\n      data: stringifiedData\r\n    };\r\n    return new es6Promise.Promise(function (resolve, reject) {\r\n      if (isFileRequired(url) || settings.data.file) {\r\n        var files = settings.files || settings.data.file;\r\n        if (!files) {\r\n          throw new KakaoError(\"'files' parameter should be set for \".concat(url));\r\n        }\r\n        getFileConfig(files).then(function (fileConfig) {\r\n          var searchParams = [];\r\n          for (var prop in stringifiedData) {\r\n            if (prop !== 'file') {\r\n              searchParams.push(\"\".concat(prop, \"=\").concat(encodeURIComponent(stringifiedData[prop])));\r\n            }\r\n          }\r\n          if (searchParams.length > 0) {\r\n            config.url += \"?\".concat(searchParams.join('&'));\r\n          }\r\n          config.file = fileConfig;\r\n          resolve(config);\r\n        }, function (error) {\r\n          reject(error);\r\n        });\r\n      } else {\r\n        resolve(config);\r\n      }\r\n    });\r\n  }\r\n  function isFileRequired(url) {\r\n    return url === '/v1/api/story/upload/multi' || url === '/v2/api/talk/message/image/upload';\r\n  }\r\n  function getFileConfig(files) {\r\n    var serializePromises = map(files, function (file) {\r\n      return serializeFile(file).then(function (serialized) {\r\n        return {\r\n          name: file.name,\r\n          type: file.type,\r\n          str: serialized\r\n        };\r\n      });\r\n    });\r\n    return new es6Promise.Promise(function (resolve, reject) {\r\n      es6Promise.Promise.all(serializePromises).then(function (serializedFiles) {\r\n        resolve({\r\n          paramName: 'file',\r\n          data: serializedFiles\r\n        });\r\n      }, function (error) {\r\n        reject(error);\r\n      });\r\n    });\r\n  }\r\n  function serializeFile(file) {\r\n    return new es6Promise.Promise(function (resolve, reject) {\r\n      if (typeof FileReader === 'undefined') {\r\n        reject(new KakaoError('File API is not supported for this browser.'));\r\n      }\r\n      var fileReader = new FileReader();\r\n      fileReader.onload = function (e) {\r\n        try {\r\n          resolve(ab2str(e.target.result));\r\n        } catch (e) {\r\n          reject(e);\r\n        }\r\n      };\r\n      fileReader.onerror = function (e) {\r\n        reject(new KakaoError(\"Cannot read file: \".concat(file.name)));\r\n      };\r\n      fileReader.readAsArrayBuffer(file);\r\n    });\r\n  }\r\n  var cleanups$7 = [];\r\n  function cleanup$8() {\r\n    emptyCleanups(cleanups$7);\r\n  }\r\n\r\n  var request$6 = /*#__PURE__*/Object.freeze({\r\n    __proto__: null,\r\n    request: request$5,\r\n    cleanup: cleanup$8\r\n  });\r\n\r\n  function getProxy(config, onResponse) {\r\n    assignIn(config, {\r\n      remote: URL.loginWidget,\r\n      channel: getRandomString()\r\n    });\r\n    return guardCreateEasyXDM(function () {\r\n      var proxy = new easyXDM_1.Rpc(config, {\r\n        local: {\r\n          postResponse: onResponse,\r\n          getKakaoAgent: function getKakaoAgent() {\r\n            return KAKAO_AGENT;\r\n          }\r\n        },\r\n        remote: {\r\n          getCode: {},\r\n          getAccessToken: {},\r\n          setClient: {},\r\n          setStateToken: {},\r\n          deleteAuthCookie: {}\r\n        }\r\n      });\r\n      proxy.channel = config.channel;\r\n      return proxy;\r\n    });\r\n  }\r\n\r\n  var POPUP_NAME = '_blank';\r\n  var POPUP_FEATURES$1 = 'width=380, height=520, scrollbars=yes';\r\n  var ANDROID_WV = /Version\\/4.0/i.test(UA.ua) || /; wv\\)/i.test(UA.ua);\r\n  var ANDROID_WV_ALLOWLIST = /naver\\(inapp|fb_iab|daumapps|instagram|ebay/g.test(UA.ua) || (typeof daumApps === \"undefined\" ? \"undefined\" : _typeof(daumApps)) === 'object';\r\n  function login$2(stateToken, fallbackUrl, authParams, redirectUri) {\r\n    if (!isSupport()) {\r\n      return;\r\n    }\r\n    var popup = null;\r\n    if (UA.os.ios) {\r\n      var iosLoginScheme = getIosLoginScheme(stateToken, authParams);\r\n      var universalLink = \"\".concat(URL.universalKakaoLink).concat(encodeURIComponent(iosLoginScheme), \"&web=\").concat(encodeURIComponent(fallbackUrl));\r\n      if (redirectUri) {\r\n        location.href = universalLink;\r\n      } else {\r\n        popup = windowOpen(universalLink, POPUP_NAME, POPUP_FEATURES$1);\r\n      }\r\n    } else if (UA.os.android) {\r\n      var androidLoginIntent = getAndroidLoginIntent(stateToken, fallbackUrl, authParams);\r\n      if (redirectUri) {\r\n        location.href = androidLoginIntent;\r\n      } else if (UA.browser.version.major > 40 && (\r\n      !ANDROID_WV || ANDROID_WV && ANDROID_WV_ALLOWLIST)) {\r\n        popup = windowOpen(androidLoginIntent, POPUP_NAME, POPUP_FEATURES$1);\r\n      } else {\r\n        popup = windowOpen('', POPUP_NAME, POPUP_FEATURES$1);\r\n        if (popup) {\r\n          popup.addEventListener('unload', function () {\r\n            setTimeout(function () {\r\n              if (popup && popup.location) {\r\n                popup.location.href = fallbackUrl;\r\n              }\r\n            }, 10);\r\n          });\r\n          popup.location.href = androidLoginIntent;\r\n        }\r\n      }\r\n    }\r\n    return popup;\r\n  }\r\n  function isSupport() {\r\n    if (UA.os.ios) {\r\n      var iOSBrowser = /safari|FxiOS|CriOS/.test(UA.ua);\r\n      return iOSBrowser || !isTalkWebview;\r\n    } else if (UA.os.android) {\r\n      return UA.browser.chrome && !/opr\\//i.test(UA.ua) && UA.browser.version.major >= 30 && (\r\n      !ANDROID_WV || ANDROID_WV && ANDROID_WV_ALLOWLIST);\r\n    }\r\n    return false;\r\n  }\r\n  function getIosLoginScheme(stateToken, authParams) {\r\n    authParams.state = stateToken;\r\n    var params = {\r\n      client_id: getAppKey$1(),\r\n      redirect_uri: URL.redirectUri,\r\n      params: JSON.stringify(authParams)\r\n    };\r\n    return \"\".concat(URL.talkLoginScheme, \"?\").concat(buildQueryString(params));\r\n  }\r\n  function getAndroidLoginIntent(stateToken, fallbackUrl, authParams) {\r\n    return ['intent:#Intent', 'action=com.kakao.talk.intent.action.CAPRI_LOGGED_IN_ACTIVITY', 'launchFlags=0x08880000', \"S.com.kakao.sdk.talk.appKey=\".concat(getAppKey$1()), \"S.com.kakao.sdk.talk.redirectUri=\".concat(URL.talkLoginRedirectUri), \"S.com.kakao.sdk.talk.state=\".concat(stateToken), \"S.com.kakao.sdk.talk.kaHeader=\".concat(KAKAO_AGENT), \"S.com.kakao.sdk.talk.extraparams=\".concat(encodeURIComponent(JSON.stringify(authParams))), \"S.browser_fallback_url=\".concat(encodeURIComponent(fallbackUrl)), 'end;'].join(';');\r\n  }\r\n  var kakaotalk = {\r\n    login: login$2,\r\n    isSupport: isSupport\r\n  };\r\n\r\n  var poller$1 = new Poller(1000, 600);\r\n  var RESERVED_REDIRECT_URI = 'kakaojs';\r\n  function createLoginButton(settings) {\r\n    settings = processRules(settings, rules$8.createLoginButton, 'Auth.createLoginButton');\r\n    var container$ = getElement(settings.container);\r\n    if (!container$) {\r\n      throw new KakaoError('container is required for Kakao login button: pass in element or id');\r\n    }\r\n    var buttonSize = settings.size === 'medium' ? '02' : settings.size === 'small' ? '03' : '01';\r\n    var buttonUrl = \"\".concat(URL.authDomain, \"/public/widget/login/\").concat(settings.lang, \"/\").concat(settings.lang, \"_\").concat(buttonSize, \"_medium\");\r\n    var buttonImage = \"\".concat(buttonUrl, \".png\");\r\n    var hoverButtonImage = \"\".concat(buttonUrl, \"_press.png\");\r\n    container$.innerHTML = \"<img\\n    id=\\\"kakao-login-btn\\\"\\n    src=\".concat(buttonImage, \"\\n    onmouseover=this.src='\").concat(hoverButtonImage, \"'\\n    onmouseout=this.src='\").concat(buttonImage, \"'\\n    style=\\\"cursor: pointer\\\"\\n  />\");\r\n    var clickHandler = function clickHandler() {\r\n      doLogin(settings);\r\n    };\r\n    addEvent(container$, 'click', clickHandler);\r\n    cleanups$6.push(function () {\r\n      removeEvent(container$, 'click', clickHandler);\r\n    });\r\n  }\r\n  function login(settings) {\r\n    settings = processRules(settings, rules$8.login, 'Auth.login');\r\n    doLogin(settings);\r\n  }\r\n  function doLogin(settings) {\r\n    var stateToken = getRandomString() + getRandomString();\r\n    if (kakaotalk.isSupport() && settings.throughTalk) {\r\n      loginThroughTalk(settings, stateToken);\r\n    } else if (settings.redirectUri) {\r\n      location.href = redirectLoginThroughWeb(settings);\r\n    } else if (isNewerAndroidKakaoTalkWebView()) {\r\n      var params = assignIn({}, makeAuthParams(settings), makeAuthExtraParams(settings), {\r\n        redirect_uri: URL.talkLoginRedirectUri,\r\n        response_type: 'code',\r\n        state: stateToken,\r\n        ka: KAKAO_AGENT,\r\n        origin: origin\r\n      });\r\n      var loginUrl = makeAuthUrl(params);\r\n      loginThroughTalk(settings, stateToken, loginUrl);\r\n    } else {\r\n      if (!(UA.browser.msie && parseInt(UA.browser.version.major) <= 9)) {\r\n        addLoginEvent(settings);\r\n      }\r\n      var _loginUrl = loginThroughWeb(settings, stateToken);\r\n      openLoginPopup(_loginUrl);\r\n    }\r\n    eventObserver.dispatch('LOGIN_START');\r\n  }\r\n  function addLoginEvent(settings) {\r\n    var messageHandler = function messageHandler(_ref) {\r\n      var origin = _ref.origin,\r\n          data = _ref.data;\r\n      if (/\\.kakao\\.com$/.test(origin) && data && typeof data === 'string') {\r\n        var arr = data.split(' ');\r\n        if (arr[1] === 'postResponse') {\r\n          var resp = JSON.parse(decodeURIComponent(arr[2]));\r\n          handleAuthResponse(settings, resp);\r\n          removeEvent(window, 'message', messageHandler);\r\n        }\r\n      }\r\n    };\r\n    addEvent(window, 'message', messageHandler);\r\n    cleanups$6.push(function () {\r\n      removeEvent(window, 'message', messageHandler);\r\n    });\r\n  }\r\n  function loginForm(settings) {\r\n    settings = processRules(settings, rules$8.login, 'Auth.loginForm');\r\n    var stateToken = getRandomString() + getRandomString();\r\n    var reauthQueryString = '&prompt=login';\r\n    if (settings.redirectUri) {\r\n      location.href = \"\".concat(redirectLoginThroughWeb(settings)).concat(reauthQueryString);\r\n    } else {\r\n      var loginUrl = \"\".concat(loginThroughWeb(settings, stateToken)).concat(reauthQueryString);\r\n      openLoginPopup(loginUrl);\r\n    }\r\n  }\r\n  function autoLogin(settings) {\r\n    settings = processRules(settings, rules$8.autoLogin, 'Auth.autoLogin');\r\n    if (isIOSKakaoTalkWebView() || isAndroidKakaoTalkWebView()) {\r\n      var stateToken = getRandomString() + getRandomString();\r\n      var params = assignIn({}, makeAuthParams(settings), {\r\n        redirect_uri: URL.talkLoginRedirectUri,\r\n        response_type: 'code',\r\n        state: stateToken,\r\n        ka: KAKAO_AGENT,\r\n        origin: origin,\r\n        prompt: 'none'\r\n      });\r\n      var loginUrl = makeAuthUrl(params);\r\n      loginThroughTalk(settings, stateToken, loginUrl);\r\n    } else {\r\n      runAuthCallback(settings, {\r\n        error: 'auto_login',\r\n        error_description: 'Kakao.Auth.autoLogin is only supported by KakaoTalk InAppBrowser',\r\n        error_code: '400',\r\n        status: 'error'\r\n      });\r\n    }\r\n    eventObserver.dispatch('LOGIN_START');\r\n  }\r\n  var popupForTalk = null;\r\n  var closePopup = function closePopup() {\r\n    popupForTalk && popupForTalk.close && popupForTalk.close();\r\n    popupForTalk = null;\r\n  };\r\n  var proxyForTalk = null;\r\n  var prevCode = null;\r\n  function loginThroughTalk(settings, stateToken, talkLoginUrl) {\r\n    if (!proxyForTalk) {\r\n      proxyForTalk = getProxy({}, function (response) {\r\n        if (response.status === 'error' && response.error_code && response.error_code !== '300') {\r\n          poller$1.stop();\r\n          if (response.error_code === '700') {\r\n            location.href = \"\".concat(URL.authDomain, \"/error/network\");\r\n          }\r\n          handleAuthResponse(settings, {\r\n            error: response.error,\r\n            error_description: response.error_description\r\n          });\r\n        }\r\n        if (response.status) {\r\n          if (response.status === 'ok') {\r\n            poller$1.stop();\r\n            if (prevCode === response.code) {\r\n              return;\r\n            } else {\r\n              prevCode = response.code;\r\n            }\r\n            proxyForTalk.getAccessToken(response.code, getAppKey$1(), UA.os.ios && !talkLoginUrl ? URL.redirectUri : URL.talkLoginRedirectUri, settings.approvalType);\r\n            closePopup();\r\n          } else {\r\n            if (UA.os.ios && popupForTalk.location.href === 'about:blank') {\r\n              closePopup();\r\n            }\r\n          }\r\n        } else {\r\n          handleAuthResponse(settings, response);\r\n        }\r\n      });\r\n      cleanups$6.push(function () {\r\n        proxyForTalk.destroy();\r\n        proxyForTalk = null;\r\n      });\r\n    }\r\n    var fallbackUrl = '';\r\n    if (talkLoginUrl) {\r\n      if (settings.redirectUri) {\r\n        location.href = talkLoginUrl;\r\n      } else {\r\n        openLoginPopup(talkLoginUrl);\r\n      }\r\n    } else {\r\n      fallbackUrl = settings.redirectUri ? redirectLoginThroughWeb(settings) : loginThroughWeb(settings, stateToken, UA.os.ios ? URL.redirectUri : URL.talkLoginRedirectUri);\r\n      var params = assignIn({}, makeAuthParams(settings), makeAuthExtraParams(settings));\r\n      setTimeout(function () {\r\n        popupForTalk = kakaotalk.login(stateToken, fallbackUrl, params, settings.redirectUri);\r\n      }, 500);\r\n    }\r\n    poller$1.start(function () {\r\n      if (stateToken) {\r\n        proxyForTalk.getCode(stateToken, getAppKey$1(), KAKAO_AGENT);\r\n      }\r\n    }, function () {\r\n      handleAuthResponse(settings, {\r\n        error: 'timeout',\r\n        description: 'Account login timed out. Please login again.',\r\n        error_description: 'Account login timed out. Please login again.'\r\n      });\r\n      if (settings.redirectUri) {\r\n        location.href = fallbackUrl;\r\n      } else {\r\n        openLoginPopup(fallbackUrl);\r\n      }\r\n    });\r\n  }\r\n  var proxyForWeb = null;\r\n  var savedSettingsForWeb = {};\r\n  function loginThroughWeb(settings, stateToken, fallbackUrl) {\r\n    if (!proxyForWeb) {\r\n      proxyForWeb = getProxy({}, function (response) {\r\n        var savedSettings = getSavedSettingsWithResponseState(response, savedSettingsForWeb);\r\n        handleAuthResponse(savedSettings, response);\r\n      });\r\n      cleanups$6.push(function () {\r\n        proxyForWeb.destroy();\r\n        proxyForWeb = null;\r\n      });\r\n    }\r\n    savedSettingsForWeb[stateToken] = settings;\r\n    var redirectUri = settings.redirectUri ? settings.redirectUri : fallbackUrl ? fallbackUrl : RESERVED_REDIRECT_URI;\r\n    var params = assignIn({}, makeAuthParams(settings), makeAuthExtraParams(settings), {\r\n      redirect_uri: redirectUri,\r\n      response_type: 'code',\r\n      state: stateToken,\r\n      proxy: \"easyXDM_Kakao_\".concat(proxyForWeb.channel, \"_provider\"),\r\n      ka: KAKAO_AGENT,\r\n      origin: origin\r\n    });\r\n    return makeAuthUrl(params);\r\n  }\r\n  function redirectLoginThroughWeb(settings) {\r\n    var params = assignIn({}, makeAuthParams(settings), makeAuthExtraParams(settings), {\r\n      redirect_uri: settings.redirectUri,\r\n      response_type: 'code',\r\n      ka: KAKAO_AGENT,\r\n      origin: origin\r\n    });\r\n    return makeAuthUrl(params);\r\n  }\r\n  function getSavedSettingsWithResponseState(response, settings) {\r\n    if (!settings[response.stateToken]) {\r\n      throw new KakaoError('security error: #CST2');\r\n    }\r\n    var savedSettings = settings[response.stateToken];\r\n    delete settings[response.stateToken];\r\n    delete response.stateToken;\r\n    return savedSettings;\r\n  }\r\n  function handleAuthResponse(settings, resp) {\r\n    if (resp.error) {\r\n      if (resp.error !== 'access_denied') {\r\n        setAccessToken(null);\r\n      }\r\n    } else {\r\n      setAccessToken(resp.access_token, settings.persistAccessToken);\r\n      eventObserver.dispatch('LOGIN');\r\n    }\r\n    runAuthCallback(settings, resp);\r\n  }\r\n  function logout() {\r\n    var callback = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : emptyFunc;\r\n    validate(callback, isFunction, 'Auth.logout');\r\n    request$5({\r\n      url: '/v1/user/logout',\r\n      always: function always() {\r\n        setAccessToken(null);\r\n        eventObserver.dispatch('LOGOUT');\r\n        callback(true);\r\n      }\r\n    });\r\n  }\r\n  var proxyForAccessToken = null;\r\n  function issueAccessToken(settings) {\r\n    settings = processRules(settings, rules$8.issueAccessToken, 'Auth.issueAccessToken');\r\n    if (!proxyForAccessToken) {\r\n      proxyForAccessToken = getProxy({}, function (response) {\r\n        handleAuthResponse(settings, response);\r\n      });\r\n      cleanups$6.push(function () {\r\n        proxyForAccessToken.destroy();\r\n        proxyForAccessToken = null;\r\n      });\r\n    }\r\n    proxyForAccessToken.getAccessToken(settings.code, getAppKey$1(), settings.redirectUri);\r\n  }\r\n  var cleanups$6 = [];\r\n  function cleanup$7() {\r\n    emptyCleanups(cleanups$6);\r\n  }\r\n\r\n  var login$1 = /*#__PURE__*/Object.freeze({\r\n    __proto__: null,\r\n    createLoginButton: createLoginButton,\r\n    login: login,\r\n    loginForm: loginForm,\r\n    autoLogin: autoLogin,\r\n    logout: logout,\r\n    issueAccessToken: issueAccessToken,\r\n    cleanup: cleanup$7\r\n  });\r\n\r\n  function getStatusInfo(callback) {\r\n    validate(callback, isFunction, 'Auth.getStatusInfo');\r\n    if (!getAccessToken()) {\r\n      callback({\r\n        status: 'not_connected'\r\n      });\r\n    } else {\r\n      request$5({\r\n        url: '/v2/user/me',\r\n        success: function success(res) {\r\n          callback({\r\n            status: 'connected',\r\n            user: res\r\n          });\r\n        },\r\n        fail: function fail() {\r\n          callback({\r\n            status: 'not_connected'\r\n          });\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  var status = /*#__PURE__*/Object.freeze({\r\n    __proto__: null,\r\n    getStatusInfo: getStatusInfo\r\n  });\r\n\r\n  function selectShippingAddress(settings) {\r\n    settings = processRules(settings, rules$8.selectShippingAddress, 'Auth.selectShippingAddress');\r\n    requestShippingAddress(settings, '/user/address');\r\n  }\r\n  function createShippingAddress(settings) {\r\n    settings = processRules(settings, rules$8.createShippingAddress, 'Auth.createShippingAddress');\r\n    requestShippingAddress(settings, '/user/create/address');\r\n  }\r\n  function updateShippingAddress(settings) {\r\n    settings = processRules(settings, rules$8.updateShippingAddress, 'Auth.updateShippingAddress');\r\n    requestShippingAddress(settings, '/user/edit/address');\r\n  }\r\n  function requestShippingAddress(settings, subpath) {\r\n    cleanup$6();\r\n    var transId = generateTxId();\r\n    var params = _objectSpread2({\r\n      app_key: getAppKey$1(),\r\n      access_token: getAccessToken(),\r\n      ka: KAKAO_AGENT,\r\n      trans_id: transId\r\n    }, settings.addressId && {\r\n      address_id: settings.addressId\r\n    });\r\n    var url = URL.appsDomain + subpath;\r\n    if (settings.returnUrl) {\r\n      params.return_url = settings.returnUrl;\r\n      createAndSubmitForm(params, url);\r\n    } else {\r\n      createHiddenIframe(transId, \"\".concat(URL.appsDomain, \"/proxy?trans_id=\").concat(transId), cleanups$5);\r\n      addMessageEvent(settings, URL.appsDomain, cleanups$5);\r\n      addCloseEvent(settings);\r\n      openPopupAndSubmitForm(params, {\r\n        url: url,\r\n        popupName: 'shipping_address',\r\n        popupFeatures: \"location=no,resizable=no,status=no,scrollbars=no,width=460,height=608\"\r\n      });\r\n    }\r\n  }\r\n  function addCloseEvent(settings) {\r\n    var callback = function callback(_ref) {\r\n      var data = _ref.data,\r\n          origin = _ref.origin;\r\n      if ((origin === URL.appsDomain || origin === URL.accountDomain) && data === 'closed') {\r\n        settings.close();\r\n        removeEvent(window, 'message', callback);\r\n      }\r\n    };\r\n    addEvent(window, 'message', callback);\r\n  }\r\n  var cleanups$5 = [];\r\n  function cleanup$6() {\r\n    emptyCleanups(cleanups$5);\r\n  }\r\n\r\n  var shippingAddress = /*#__PURE__*/Object.freeze({\r\n    __proto__: null,\r\n    selectShippingAddress: selectShippingAddress,\r\n    createShippingAddress: createShippingAddress,\r\n    updateShippingAddress: updateShippingAddress,\r\n    cleanup: cleanup$6\r\n  });\r\n\r\n  var Auth = makeModule([oauth, login$1, secret, status, shippingAddress]);\r\n\r\n  var API = makeModule([request$6]);\r\n\r\n  function capitalize(str) {\r\n    return str.charAt(0).toUpperCase() + str.slice(1);\r\n  }\r\n  function camelToSnakeCase(str) {\r\n    return str.replace(/[A-Z]/g, function (letter) {\r\n      return \"_\".concat(letter.toLowerCase());\r\n    });\r\n  }\r\n  function stringifyLCBA(lcba) {\r\n    return isObject(lcba) ? JSON.stringify(lcba) : lcba;\r\n  }\r\n  function requestAPI(url, data) {\r\n    return request$5({\r\n      url: url,\r\n      data: data\r\n    });\r\n  }\r\n\r\n  function partialValidator(settings, rule, propName) {\r\n    processRules(settings, rule, \"parameter \\\"\".concat(propName, \"\\\" in Link\"));\r\n    return true;\r\n  }\r\n  function formatter(settings) {\r\n    return keys(settings).reduce(function (obj, k) {\r\n      obj[camelToSnakeCase(k)] = settings[k];\r\n      return obj;\r\n    }, {});\r\n  }\r\n  var linkRule = {\r\n    optional: {\r\n      webUrl: isString,\r\n      mobileWebUrl: isString,\r\n      androidExecutionParams: isString,\r\n      androidExecParams: isString,\r\n      iosExecutionParams: isString,\r\n      iosExecParams: isString\r\n    },\r\n    builder: makeLink\r\n  };\r\n  var itemRule = {\r\n    required: {\r\n      item: isString,\r\n      itemOp: isString\r\n    }\r\n  };\r\n  function makeLink(settings) {\r\n    var link = formatter(settings);\r\n    if (link.android_exec_params) {\r\n      link.android_execution_params = link.android_exec_params;\r\n      delete link.android_exec_params;\r\n    }\r\n    if (link.ios_exec_params) {\r\n      link.ios_execution_params = link.ios_exec_params;\r\n      delete link.ios_exec_params;\r\n    }\r\n    return link;\r\n  }\r\n  function makeButton(settings) {\r\n    return {\r\n      title: settings.title,\r\n      link: makeLink(settings.link)\r\n    };\r\n  }\r\n  function makeContent(settings) {\r\n    var content = formatter(settings);\r\n    content.link = makeLink(content.link);\r\n    return content;\r\n  }\r\n  function makeItemContent(settings) {\r\n    var itemContent = formatter(settings);\r\n    if (itemContent.items) {\r\n      itemContent.items = map(itemContent.items, function (e) {\r\n        return formatter(e);\r\n      });\r\n    }\r\n    return itemContent;\r\n  }\r\n  var rules$6 = {\r\n    headerLink: linkRule,\r\n    link: linkRule,\r\n    button: {\r\n      required: {\r\n        title: isString,\r\n        link: function link(e) {\r\n          partialValidator(e, linkRule, 'link');\r\n        }\r\n      },\r\n      builder: makeButton\r\n    },\r\n    buttons: {\r\n      optional: {\r\n        0: function _(e) {\r\n          partialValidator(e, rules$6.button, 'button');\r\n        },\r\n        1: function _(e) {\r\n          partialValidator(e, rules$6.button, 'button');\r\n        }\r\n      },\r\n      builder: function builder(arr) {\r\n        return map(arr, makeButton);\r\n      }\r\n    },\r\n    content: {\r\n      required: {\r\n        title: isString,\r\n        imageUrl: isString,\r\n        link: function link(e) {\r\n          partialValidator(e, linkRule, 'link');\r\n        }\r\n      },\r\n      optional: {\r\n        imageWidth: isInteger,\r\n        imageHeight: isInteger,\r\n        description: isString\r\n      },\r\n      builder: makeContent\r\n    },\r\n    contents: {\r\n      optional: {\r\n        0: function _(e) {\r\n          partialValidator(e, rules$6.content, 'content');\r\n        },\r\n        1: function _(e) {\r\n          partialValidator(e, rules$6.content, 'content');\r\n        },\r\n        2: function _(e) {\r\n          partialValidator(e, rules$6.content, 'content');\r\n        }\r\n      },\r\n      builder: function builder(arr) {\r\n        return map(arr, makeContent);\r\n      }\r\n    },\r\n    commerce: {\r\n      required: {\r\n        regularPrice: isInteger\r\n      },\r\n      optional: {\r\n        discountPrice: isInteger,\r\n        discountRate: isInteger,\r\n        fixedDiscountPrice: isInteger,\r\n        currencyUnit: isString,\r\n        currencyUnitPosition: isOneOf([0, 1]),\r\n        productName: isString\r\n      },\r\n      builder: formatter\r\n    },\r\n    social: {\r\n      optional: {\r\n        likeCount: isInteger,\r\n        commentCount: isInteger,\r\n        sharedCount: isInteger,\r\n        viewCount: isInteger,\r\n        subscriberCount: isInteger\r\n      },\r\n      builder: formatter\r\n    },\r\n    itemContent: {\r\n      optional: {\r\n        profileText: isString,\r\n        profileImageUrl: isString,\r\n        titleImageUrl: isString,\r\n        titleImageText: isString,\r\n        titleImageCategory: isString,\r\n        items: function items(arr) {\r\n          return isArray(arr) && arr.length < 6 && every(arr, function (e) {\r\n            return partialValidator(e, itemRule, 'items.item');\r\n          });\r\n        },\r\n        sum: isString,\r\n        sumOp: isString\r\n      },\r\n      builder: makeItemContent\r\n    }\r\n  };\r\n  function create(settings, key, callerMsg) {\r\n    var linkPropRule = rules$6[key];\r\n    if (linkPropRule) {\r\n      settings = processRules(settings, linkPropRule, \"parameter \\\"\".concat(key, \"\\\" in \").concat(callerMsg || 'Link'));\r\n      return linkPropRule.builder(settings);\r\n    }\r\n  }\r\n  var propGenerator = {\r\n    create: create\r\n  };\r\n\r\n  var LINK_VER = '4.0';\r\n  var KakaoLink = function KakaoLink(settings, validatedResp) {\r\n    _classCallCheck(this, KakaoLink);\r\n    this.appkey = getAppKey$1();\r\n    this.appver = '1.0';\r\n    this.linkver = LINK_VER;\r\n    this.extras = _objectSpread2(_objectSpread2({\r\n      KA: KAKAO_AGENT\r\n    }, settings.extras), settings.serverCallbackArgs && {\r\n      lcba: stringifyLCBA(settings.serverCallbackArgs)\r\n    });\r\n    this.template_json = validatedResp.template_msg;\r\n    this.template_args = validatedResp.template_args;\r\n    this.template_id = validatedResp.template_id;\r\n  };\r\n  function makeKakaoLink(settings, validatedResp) {\r\n    var kakaoLink = new KakaoLink(settings, validatedResp);\r\n    if (JSON.stringify(kakaoLink).length > 10000) {\r\n      throw new KakaoError('Failed to send message because it exceeds the message size limit. Please contact the app administrator.');\r\n    }\r\n    var linkScheme = UA.os.ios ? URL.talkLinkScheme : 'kakaolink://send';\r\n    return \"\".concat(linkScheme, \"?\").concat(buildQueryString(kakaoLink));\r\n  }\r\n  var DefaultLink = function DefaultLink(settings) {\r\n    var _this = this;\r\n    _classCallCheck(this, DefaultLink);\r\n    this.link_ver = LINK_VER;\r\n    this.template_object = _objectSpread2({\r\n      object_type: settings.objectType\r\n    }, settings.buttonTitle && {\r\n      button_title: settings.buttonTitle\r\n    });\r\n    forEach(settings, function (setting, key) {\r\n      var prop = propGenerator.create(setting, key, 'defaultObject');\r\n      if (prop) {\r\n        _this.template_object[camelToSnakeCase(key)] = prop;\r\n      }\r\n    });\r\n  };\r\n  var ListLink = function (_DefaultLink) {\r\n    _inherits(ListLink, _DefaultLink);\r\n    var _super = _createSuper(ListLink);\r\n    function ListLink(settings) {\r\n      var _this2;\r\n      _classCallCheck(this, ListLink);\r\n      _this2 = _super.call(this, settings);\r\n      _this2.template_object.header_title = settings.headerTitle;\r\n      if (console && (settings.headerImageUrl || settings.headerImageWidth || settings.headerImageHeight)) {\r\n        console.warn(\"KakaoWarning: The parameters (\".concat(['headerImageUrl', 'headerImageWidth', 'headerImageHeight'].join(', '), \") for header background image are deprecated.\"));\r\n      }\r\n      return _this2;\r\n    }\r\n    return ListLink;\r\n  }(DefaultLink);\r\n  var LocationLink = function (_DefaultLink2) {\r\n    _inherits(LocationLink, _DefaultLink2);\r\n    var _super2 = _createSuper(LocationLink);\r\n    function LocationLink(settings) {\r\n      var _this3;\r\n      _classCallCheck(this, LocationLink);\r\n      _this3 = _super2.call(this, settings);\r\n      var tpl = _this3.template_object;\r\n      tpl.address = settings.address || '';\r\n      tpl.address_title = settings.addressTitle || '';\r\n      return _this3;\r\n    }\r\n    return LocationLink;\r\n  }(DefaultLink);\r\n  var TextLink = function (_DefaultLink3) {\r\n    _inherits(TextLink, _DefaultLink3);\r\n    var _super3 = _createSuper(TextLink);\r\n    function TextLink(settings) {\r\n      var _this4;\r\n      _classCallCheck(this, TextLink);\r\n      _this4 = _super3.call(this, settings);\r\n      _this4.template_object.text = settings.text || '';\r\n      return _this4;\r\n    }\r\n    return TextLink;\r\n  }(DefaultLink);\r\n  var defaultLinks = {\r\n    FeedLink: DefaultLink,\r\n    CommerceLink: DefaultLink,\r\n    ListLink: ListLink,\r\n    LocationLink: LocationLink,\r\n    TextLink: TextLink\r\n  };\r\n  var ScrapLink = function ScrapLink(settings) {\r\n    _classCallCheck(this, ScrapLink);\r\n    this.link_ver = LINK_VER;\r\n    this.request_url = settings.requestUrl;\r\n    if (settings.templateId) {\r\n      this.template_id = settings.templateId;\r\n    }\r\n    if (settings.templateArgs) {\r\n      this.template_args = settings.templateArgs;\r\n    }\r\n  };\r\n  var CustomLink = function CustomLink(settings) {\r\n    _classCallCheck(this, CustomLink);\r\n    this.link_ver = LINK_VER;\r\n    this.template_id = settings.templateId;\r\n    this.template_args = settings.templateArgs;\r\n  };\r\n  function makeDefaultLink(settings) {\r\n    var clazz = defaultLinks[\"\".concat(capitalize(settings.objectType), \"Link\")];\r\n    return new clazz(settings);\r\n  }\r\n  function makeScrapLink(settings) {\r\n    return new ScrapLink(settings);\r\n  }\r\n  function makeCustomLink(settings) {\r\n    return new CustomLink(settings);\r\n  }\r\n\r\n  var LINK_POPUP_NAME = 'kakao_link_web_sharer';\r\n  var LINK_POPUP_FEATURES = 'location=no,resizable=no,status=no,scrollbars=no,width=460,height=608';\r\n  var LINK_URL_LIMIT = 2084;\r\n  function send$1(settings, linkType, linkObj) {\r\n    var webLinkParams = {\r\n      app_key: getAppKey$1(),\r\n      ka: KAKAO_AGENT,\r\n      validation_action: linkType,\r\n      validation_params: JSON.stringify(linkObj)\r\n    };\r\n    if (settings.serverCallbackArgs) {\r\n      webLinkParams.lcba = stringifyLCBA(settings.serverCallbackArgs);\r\n    }\r\n    var webLinkUrl = \"\".concat(URL.sharerDomain, \"/talk/friends/picker/easylink?\").concat(buildQueryString(webLinkParams));\r\n    var linkPopup = null;\r\n    if (!(UA.browser.msie || UA.browser.spartan) && webLinkUrl.length < LINK_URL_LIMIT) {\r\n      linkPopup = windowOpen(webLinkUrl, LINK_POPUP_NAME, LINK_POPUP_FEATURES);\r\n      linkPopup.focus();\r\n    } else {\r\n      var popupParams = {\r\n        url: \"\".concat(URL.sharerDomain, \"/talk/friends/picker/link\"),\r\n        popupName: LINK_POPUP_NAME,\r\n        popupFeatures: LINK_POPUP_FEATURES\r\n      };\r\n      linkPopup = openPopupAndSubmitForm(webLinkParams, popupParams);\r\n    }\r\n    if (settings.callback) {\r\n      handleCallback(linkPopup, settings.callback);\r\n    }\r\n  }\r\n  function handleCallback(popup, callback) {\r\n    if (UA.browser.msie) {\r\n      if (console) {\r\n        console.warn('KakaoWarning: The callback parameter does not support the IE browser.');\r\n      }\r\n      return;\r\n    }\r\n    var linkCallback = function linkCallback(e) {\r\n      if (e.data === 'sent' && e.origin === URL.sharerDomain) {\r\n        callback();\r\n      }\r\n    };\r\n    addEvent(window, 'message', linkCallback);\r\n    var interval = setInterval(function () {\r\n      if (popup.closed) {\r\n        clearInterval(interval);\r\n        removeEvent(window, 'message', linkCallback);\r\n      }\r\n    }, 1000);\r\n  }\r\n  var webSender = {\r\n    send: send$1\r\n  };\r\n\r\n  var web2app = function () {\r\n    var ua_parser$1 = ua_parser;\r\n    var TIMEOUT_IOS = 5 * 1000,\r\n        TIMEOUT_ANDROID = 3 * 100,\r\n        INTERVAL = 100,\r\n        ua = ua_parser$1(),\r\n        os = ua.os,\r\n        intentNotSupportedBrowserList = ['firefox', 'opr/'],\r\n        intentSupportCustomBrowserList = ['KAKAOTALK'\r\n    ];\r\n    function moveToStore(storeURL) {\r\n      window.top.location.replace(storeURL);\r\n    }\r\n    function web2app(context) {\r\n      var willInvokeApp = typeof context.willInvokeApp === 'function' ? context.willInvokeApp : function () {},\r\n          onAppMissing = typeof context.onAppMissing === 'function' ? context.onAppMissing : moveToStore,\r\n          onUnsupportedEnvironment = typeof context.onUnsupportedEnvironment === 'function' ? context.onUnsupportedEnvironment : function () {};\r\n      willInvokeApp();\r\n      if (os.android) {\r\n        if (isIntentSupportedBrowser() && context.intentURI && !context.useUrlScheme) {\r\n          web2appViaIntentURI(context.intentURI);\r\n        } else if (context.storeURL) {\r\n          web2appViaCustomUrlSchemeForAndroid(context.urlScheme, context.storeURL, onAppMissing);\r\n        }\r\n      } else if (os.ios && context.storeURL) {\r\n        web2appViaCustomUrlSchemeForIOS(context.urlScheme, context.storeURL, onAppMissing, context.universalLink);\r\n      } else {\r\n        setTimeout(function () {\r\n          onUnsupportedEnvironment();\r\n        }, 100);\r\n      }\r\n    }\r\n    function isIntentSupportedBrowser() {\r\n      var supportsIntent = ua.browser.chrome && +ua.browser.version.major >= 25;\r\n      var blackListRegexp = new RegExp(intentNotSupportedBrowserList.join('|'), \"i\");\r\n      var whiteListRegexp = new RegExp(intentSupportCustomBrowserList.join('|'), \"i\");\r\n      return supportsIntent && !blackListRegexp.test(ua.ua) || whiteListRegexp.test(ua.ua);\r\n    }\r\n    function web2appViaCustomUrlSchemeForAndroid(urlScheme, storeURL, fallback) {\r\n      deferFallback(TIMEOUT_ANDROID, storeURL, fallback);\r\n      launchAppViaHiddenIframe(urlScheme);\r\n    }\r\n    function deferFallback(timeout, storeURL, fallback) {\r\n      var clickedAt = new Date().getTime();\r\n      return setTimeout(function () {\r\n        var now = new Date().getTime();\r\n        if (isPageVisible() && now - clickedAt < timeout + INTERVAL) {\r\n          fallback(storeURL);\r\n        }\r\n      }, timeout);\r\n    }\r\n    function web2appViaIntentURI(launchURI) {\r\n      if (ua.browser.chrome) {\r\n        move();\r\n      } else {\r\n        setTimeout(move, 100);\r\n      }\r\n      function move() {\r\n        top.location.href = launchURI;\r\n      }\r\n    }\r\n    function web2appViaCustomUrlSchemeForIOS(urlScheme, storeURL, fallback, universalLink) {\r\n      var tid = deferFallback(TIMEOUT_IOS, storeURL, fallback);\r\n      if (parseInt(ua.os.version.major, 10) < 8) {\r\n        bindPagehideEvent(tid);\r\n      } else {\r\n        bindVisibilityChangeEvent(tid);\r\n      }\r\n      if (isSupportUniversalLinks()) {\r\n        if (universalLink === undefined) {\r\n          universalLink = urlScheme;\r\n        } else {\r\n          clearTimeout(tid);\r\n        }\r\n        launchAppViaChangingLocation(universalLink);\r\n      } else {\r\n        launchAppViaHiddenIframe(urlScheme);\r\n      }\r\n    }\r\n    function bindPagehideEvent(tid) {\r\n      window.addEventListener('pagehide', function clear() {\r\n        if (isPageVisible()) {\r\n          clearTimeout(tid);\r\n          window.removeEventListener('pagehide', clear);\r\n        }\r\n      });\r\n    }\r\n    function bindVisibilityChangeEvent(tid) {\r\n      document.addEventListener('visibilitychange', function clear() {\r\n        if (isPageVisible()) {\r\n          clearTimeout(tid);\r\n          document.removeEventListener('visibilitychange', clear);\r\n        }\r\n      });\r\n    }\r\n    function isPageVisible() {\r\n      var attrNames = ['hidden', 'webkitHidden'];\r\n      for (var i = 0, len = attrNames.length; i < len; i++) {\r\n        if (typeof document[attrNames[i]] !== 'undefined') {\r\n          return !document[attrNames[i]];\r\n        }\r\n      }\r\n      return true;\r\n    }\r\n    function launchAppViaChangingLocation(urlScheme) {\r\n      window.top.location.replace(urlScheme);\r\n    }\r\n    function launchAppViaHiddenIframe(urlScheme) {\r\n      setTimeout(function () {\r\n        var iframe = createHiddenIframe('appLauncher');\r\n        iframe.src = urlScheme;\r\n      }, 100);\r\n    }\r\n    function createHiddenIframe(id) {\r\n      var iframe = document.createElement('iframe');\r\n      iframe.id = id;\r\n      iframe.style.border = 'none';\r\n      iframe.style.width = '0';\r\n      iframe.style.height = '0';\r\n      iframe.style.display = 'none';\r\n      iframe.style.overflow = 'hidden';\r\n      document.body.appendChild(iframe);\r\n      return iframe;\r\n    }\r\n    function isSupportUniversalLinks() {\r\n      return parseInt(ua.os.version.major, 10) > 8 && ua.os.ios;\r\n    }\r\n    return web2app;\r\n  }();\r\n\r\n  var poller = new Poller(100, 100);\r\n  var KAKAOTALK_IOS_APP_ID = '362057947';\r\n  function send(settings, requestUrl, linkObj) {\r\n    var onResponse = null;\r\n    if (UA.browser.iphone && /version/.test(UA.ua.toLowerCase())) {\r\n      var response = null;\r\n      onResponse = function onResponse(res) {\r\n        response = res;\r\n      };\r\n      poller.start(function () {\r\n        if (response !== null) {\r\n          poller.stop();\r\n          handleValidatedResp(response, settings);\r\n        }\r\n      }, function () {\r\n        var error = {\r\n          error: 'timeout',\r\n          error_description: 'LINK_TIMEOUT'\r\n        };\r\n        settings.fail(error);\r\n        settings.always(error);\r\n      });\r\n    } else {\r\n      onResponse = handleValidatedResp;\r\n    }\r\n    return requestAPI(requestUrl, linkObj).then(function (validatedResp) {\r\n      onResponse(validatedResp, settings);\r\n    }, function (error) {\r\n      settings.fail(error);\r\n      settings.always(error);\r\n    });\r\n  }\r\n  function handleValidatedResp(validatedResp, settings) {\r\n    var linkScheme = makeKakaoLink(settings, validatedResp);\r\n    callWeb2app$1(linkScheme, settings.fail, settings.installTalk);\r\n    var msg = {\r\n      template_msg: validatedResp.template_msg || {},\r\n      warning_msg: validatedResp.warning_msg || {},\r\n      argument_msg: validatedResp.argument_msg || {}\r\n    };\r\n    settings.success(msg);\r\n    settings.always(msg);\r\n  }\r\n  function callWeb2app$1(linkScheme, unsupportedCallback, shouldInstallTalk) {\r\n    var androidIntent = [\"intent:\".concat(linkScheme, \"#Intent\"), 'launchFlags=0x14008000', \"\".concat(shouldInstallTalk === true ? \"package=\".concat(URL.talkAndroidPackage, \";\") : '', \"end;\")].join(';');\r\n    var web2appOptions = {\r\n      urlScheme: linkScheme,\r\n      intentURI: androidIntent,\r\n      appName: 'KakaoTalk',\r\n      storeURL: getInstallUrl(URL.talkAndroidPackage, KAKAOTALK_IOS_APP_ID),\r\n      onUnsupportedEnvironment: function onUnsupportedEnvironment() {\r\n        unsupportedCallback(linkScheme);\r\n      }\r\n    };\r\n    if (!shouldInstallTalk || isIOSKakaoTalkWebView() || isAndroidWebView()) {\r\n      web2appOptions.onAppMissing = emptyFunc;\r\n    }\r\n    if (isIOSKakaoTalkWebView()) {\r\n      web2appOptions.universalLink = undefined;\r\n    }\r\n    try {\r\n      web2app(web2appOptions);\r\n    } catch (error) {\r\n    }\r\n  }\r\n  var talkSender = {\r\n    send: send\r\n  };\r\n\r\n  var commonLinkOptional = {\r\n    success: isFunction,\r\n    fail: isFunction,\r\n    always: isFunction,\r\n    callback: isFunction,\r\n    installTalk: isBoolean,\r\n    throughTalk: isBoolean,\r\n    extras: isObject,\r\n    serverCallbackArgs: passesOneOf([isJSONString, isObject])\r\n  };\r\n  var commonLinkDefaults = {\r\n    success: emptyFunc,\r\n    fail: emptyFunc,\r\n    always: emptyFunc,\r\n    installTalk: false,\r\n    throughTalk: true\r\n  };\r\n  function buttonsValidator(e) {\r\n    if (!isArray(e)) {\r\n      return false;\r\n    } else if (e.length > 2) {\r\n      throw new KakaoError('Illegal argument for \"buttons\" in Link: size of buttons should be up to 2');\r\n    }\r\n    return true;\r\n  }\r\n  var sendFeed = {\r\n    required: {\r\n      objectType: function objectType(type) {\r\n        return type === 'feed';\r\n      },\r\n      content: isObject\r\n    },\r\n    optional: assignIn({\r\n      itemContent: isObject,\r\n      social: isObject,\r\n      buttonTitle: isString,\r\n      buttons: buttonsValidator\r\n    }, commonLinkOptional),\r\n    defaults: commonLinkDefaults\r\n  };\r\n  var sendList = {\r\n    required: {\r\n      objectType: function objectType(type) {\r\n        return type === 'list';\r\n      },\r\n      headerTitle: isString,\r\n      headerLink: isObject,\r\n      contents: function contents(e) {\r\n        if (!isArray(e)) {\r\n          return false;\r\n        } else if (e.length < 2 || e.length > 3) {\r\n          throw new KakaoError('Illegal argument for \"contents\" in Link: size of contents should be more than 1 and up to 3');\r\n        }\r\n        return true;\r\n      }\r\n    },\r\n    optional: assignIn({\r\n      buttonTitle: isString,\r\n      buttons: buttonsValidator,\r\n      headerImageUrl: isString,\r\n      headerImageWidth: isInteger,\r\n      headerImageHeight: isInteger\r\n    }, commonLinkOptional),\r\n    defaults: commonLinkDefaults\r\n  };\r\n  var sendCommerce = {\r\n    required: {\r\n      objectType: function objectType(type) {\r\n        return type === 'commerce';\r\n      },\r\n      content: isObject,\r\n      commerce: isObject\r\n    },\r\n    optional: assignIn({\r\n      buttonTitle: isString,\r\n      buttons: buttonsValidator\r\n    }, commonLinkOptional),\r\n    defaults: commonLinkDefaults\r\n  };\r\n  var sendLocation = {\r\n    required: {\r\n      objectType: function objectType(type) {\r\n        return type === 'location';\r\n      },\r\n      content: isObject,\r\n      address: isString\r\n    },\r\n    optional: assignIn({\r\n      addressTitle: isString,\r\n      social: isObject,\r\n      buttonTitle: isString,\r\n      buttons: buttonsValidator\r\n    }, commonLinkOptional),\r\n    defaults: commonLinkDefaults\r\n  };\r\n  var sendText = {\r\n    required: {\r\n      objectType: function objectType(type) {\r\n        return type === 'text';\r\n      },\r\n      text: isString,\r\n      link: isObject\r\n    },\r\n    optional: assignIn({\r\n      buttonTitle: isString,\r\n      buttons: buttonsValidator\r\n    }, commonLinkOptional),\r\n    defaults: commonLinkDefaults\r\n  };\r\n  var sendScrap$1 = {\r\n    required: {\r\n      requestUrl: isString\r\n    },\r\n    optional: assignIn({\r\n      templateId: isInteger,\r\n      templateArgs: isObject\r\n    }, commonLinkOptional),\r\n    defaults: assignIn({\r\n      templateArgs: {}\r\n    }, commonLinkDefaults)\r\n  };\r\n  var sendCustom$1 = {\r\n    required: {\r\n      templateId: isInteger\r\n    },\r\n    optional: assignIn({\r\n      templateArgs: isObject\r\n    }, commonLinkOptional),\r\n    defaults: assignIn({\r\n      templateArgs: {}\r\n    }, commonLinkDefaults)\r\n  };\r\n  function extendRuleForContainer(rule) {\r\n    return defaults({\r\n      required: assignIn({\r\n        container: passesOneOf([isElement, isString])\r\n      }, rule.required)\r\n    }, rule);\r\n  }\r\n  var rules$5 = {\r\n    defaultObjectTypes: ['feed', 'list', 'commerce', 'location', 'text'],\r\n    sendFeed: sendFeed,\r\n    createFeedButton: extendRuleForContainer(sendFeed),\r\n    sendList: sendList,\r\n    createListButton: extendRuleForContainer(sendList),\r\n    sendCommerce: sendCommerce,\r\n    createCommerceButton: extendRuleForContainer(sendCommerce),\r\n    sendLocation: sendLocation,\r\n    createLocationButton: extendRuleForContainer(sendLocation),\r\n    sendText: sendText,\r\n    createTextButton: extendRuleForContainer(sendText),\r\n    sendScrap: sendScrap$1,\r\n    createScrapButton: extendRuleForContainer(sendScrap$1),\r\n    sendCustom: sendCustom$1,\r\n    createCustomButton: extendRuleForContainer(sendCustom$1),\r\n    uploadImage: {\r\n      required: {\r\n        file: isObject\r\n      }\r\n    },\r\n    deleteImage: {\r\n      required: {\r\n        imageUrl: isString\r\n      }\r\n    },\r\n    scrapImage: {\r\n      required: {\r\n        imageUrl: isString\r\n      }\r\n    }\r\n  };\r\n\r\n  function createDefaultButton(settings) {\r\n    if (!settings.objectType || !isOneOf(rules$5.defaultObjectTypes)(settings.objectType)) {\r\n      throw new KakaoError(\"objectType should be one of (\".concat(rules$5.defaultObjectTypes.join(', '), \")\"));\r\n    }\r\n    var rule = rules$5[\"create\".concat(capitalize(settings.objectType), \"Button\")];\r\n    settings = processRules(settings, rule, 'Link.createDefaultButton');\r\n    addClickEvent(settings, 'default');\r\n  }\r\n  function sendDefault(settings) {\r\n    if (!settings.objectType || !isOneOf(rules$5.defaultObjectTypes)(settings.objectType)) {\r\n      throw new KakaoError(\"objectType should be one of (\".concat(rules$5.defaultObjectTypes.join(', '), \")\"));\r\n    }\r\n    var rule = rules$5[\"send\".concat(capitalize(settings.objectType))];\r\n    settings = processRules(settings, rule, 'Link.sendDefault');\r\n    doSend(settings, 'default');\r\n  }\r\n  function createScrapButton(settings) {\r\n    settings = processRules(settings, rules$5.createScrapButton, 'Link.createScrapButton');\r\n    addClickEvent(settings, 'scrap');\r\n  }\r\n  function sendScrap(settings) {\r\n    settings = processRules(settings, rules$5.sendScrap, 'Link.sendScrap');\r\n    doSend(settings, 'scrap');\r\n  }\r\n  function createCustomButton(settings) {\r\n    settings = processRules(settings, rules$5.createCustomButton, 'Link.createCustomButton');\r\n    addClickEvent(settings, 'custom');\r\n  }\r\n  function sendCustom(settings) {\r\n    settings = processRules(settings, rules$5.sendCustom, 'Link.sendCustom');\r\n    doSend(settings, 'custom');\r\n  }\r\n  function addClickEvent(settings, linkType) {\r\n    var container$ = getElement(settings.container);\r\n    if (!container$) {\r\n      throw new KakaoError('container is required for KakaoTalk Link: pass in element or id');\r\n    }\r\n    var clickHandler = function clickHandler(e) {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n      doSend(settings, linkType);\r\n    };\r\n    addEvent(container$, 'click', clickHandler);\r\n    cleanups$4.push(function () {\r\n      removeEvent(container$, 'click', clickHandler);\r\n    });\r\n  }\r\n  var linkTypeMapper = {\r\n    \"default\": {\r\n      makeLinkFunc: makeDefaultLink,\r\n      requestUrl: '/v2/api/kakaolink/talk/template/default'\r\n    },\r\n    scrap: {\r\n      makeLinkFunc: makeScrapLink,\r\n      requestUrl: '/v2/api/kakaolink/talk/template/scrap'\r\n    },\r\n    custom: {\r\n      makeLinkFunc: makeCustomLink,\r\n      requestUrl: '/v2/api/kakaolink/talk/template/validate'\r\n    }\r\n  };\r\n  function doSend(settings, linkType) {\r\n    var _linkTypeMapper$linkT = linkTypeMapper[linkType],\r\n        makeLinkFunc = _linkTypeMapper$linkT.makeLinkFunc,\r\n        requestUrl = _linkTypeMapper$linkT.requestUrl;\r\n    var linkObj = makeLinkFunc(settings);\r\n    var isIpad = UA.os.ios && UA.platform === 'tablet';\r\n    if (isTalkWebview || settings.throughTalk && (UA.platform === 'mobile' || isIpad)) {\r\n      talkSender.send(settings, requestUrl, linkObj);\r\n    } else {\r\n      webSender.send(settings, linkType, linkObj);\r\n    }\r\n  }\r\n  var cleanups$4 = [];\r\n  function cleanup$5() {\r\n    emptyCleanups(cleanups$4);\r\n  }\r\n\r\n  var linker = /*#__PURE__*/Object.freeze({\r\n    __proto__: null,\r\n    createDefaultButton: createDefaultButton,\r\n    sendDefault: sendDefault,\r\n    createScrapButton: createScrapButton,\r\n    sendScrap: sendScrap,\r\n    createCustomButton: createCustomButton,\r\n    sendCustom: sendCustom,\r\n    cleanup: cleanup$5\r\n  });\r\n\r\n  function uploadImage(settings) {\r\n    settings = processRules(settings, rules$5.uploadImage, 'Link.uploadImage');\r\n    return requestAPI('/v2/api/talk/message/image/upload', {\r\n      file: settings.file\r\n    });\r\n  }\r\n  function deleteImage(settings) {\r\n    settings = processRules(settings, rules$5.deleteImage, 'Link.deleteImage');\r\n    return requestAPI('/v2/api/talk/message/image/delete', {\r\n      image_url: settings.imageUrl\r\n    });\r\n  }\r\n  function scrapImage(settings) {\r\n    settings = processRules(settings, rules$5.scrapImage, 'Link.scrapImage');\r\n    return requestAPI('/v2/api/talk/message/image/scrap', {\r\n      image_url: settings.imageUrl\r\n    });\r\n  }\r\n\r\n  var imageAPI = /*#__PURE__*/Object.freeze({\r\n    __proto__: null,\r\n    uploadImage: uploadImage,\r\n    deleteImage: deleteImage,\r\n    scrapImage: scrapImage\r\n  });\r\n\r\n  var Link = makeModule([linker, imageAPI]);\r\n\r\n  var POPUP_FEATURES = 'width=350, height=510';\r\n  function createAnchorImage$1(settings, imgSrc, imgTitle) {\r\n    var a$ = document.createElement('a');\r\n    a$.setAttribute('href', '#');\r\n    var img$ = document.createElement('img');\r\n    img$.setAttribute('src', imgSrc);\r\n    img$.setAttribute('title', imgTitle);\r\n    img$.setAttribute('alt', imgTitle);\r\n    if (settings.supportMultipleDensities) {\r\n      img$.setAttribute('srcset', [imgSrc.replace('.png', '_2X.png 2x'), imgSrc.replace('.png', '_3X.png 3x')].join(', '));\r\n    }\r\n    a$.appendChild(img$);\r\n    return a$;\r\n  }\r\n  function makeChannelParams(apiVer) {\r\n    return buildQueryString({\r\n      api_ver: apiVer,\r\n      kakao_agent: KAKAO_AGENT,\r\n      app_key: getAppKey$1(),\r\n      referer: origin + location.pathname + location.search\r\n    });\r\n  }\r\n\r\n  var sizes = ['small', 'large'];\r\n  var colors = ['yellow', 'mono'];\r\n  var shapes = ['pc', 'mobile'];\r\n  var titles = ['consult', 'question'];\r\n  var rules$4 = {\r\n    createAddChannelButton: {\r\n      required: {\r\n        container: passesOneOf([isElement, isString]),\r\n        channelPublicId: isString\r\n      },\r\n      optional: {\r\n        size: isOneOf(sizes),\r\n        supportMultipleDensities: isBoolean\r\n      },\r\n      defaults: {\r\n        size: sizes[0],\r\n        supportMultipleDensities: false\r\n      }\r\n    },\r\n    addChannel: {\r\n      required: {\r\n        channelPublicId: isString\r\n      }\r\n    },\r\n    createChatButton: {\r\n      required: {\r\n        container: passesOneOf([isElement, isString]),\r\n        channelPublicId: isString\r\n      },\r\n      optional: {\r\n        size: isOneOf(sizes),\r\n        color: isOneOf(colors),\r\n        shape: isOneOf(shapes),\r\n        title: isOneOf(titles),\r\n        supportMultipleDensities: isBoolean\r\n      },\r\n      defaults: {\r\n        size: sizes[0],\r\n        color: colors[0],\r\n        shape: shapes[0],\r\n        title: titles[0],\r\n        supportMultipleDensities: false\r\n      }\r\n    },\r\n    chat: {\r\n      required: {\r\n        channelPublicId: isString\r\n      }\r\n    }\r\n  };\r\n\r\n  var API_VER$1 = '1.1';\r\n  var ADD_CHANNEL_POPUP_NAME = 'channel_add_social_plugin';\r\n  var CHAT_POPUP_NAME$1 = 'channel_chat_social_plugin';\r\n  function createAddChannelButton(settings) {\r\n    var container$ = getElement(settings.container);\r\n    if (!container$) {\r\n      throw new KakaoError('container is required for Channel.createAddChannelButton: pass in element or id');\r\n    } else {\r\n      applyAttributes(settings, container$, {\r\n        channelPublicId: 'data-channel-public-id',\r\n        size: 'data-size',\r\n        supportMultipleDensities: 'data-support-multiple-densities'\r\n      });\r\n    }\r\n    settings = processRules(settings, rules$4.createAddChannelButton, 'Channel.createAddChannelButton');\r\n    var imgSrc = getAddChannelImgSrc(settings);\r\n    var anchor$ = createAnchorImage$1(settings, imgSrc, '카카오톡 채널 추가 버튼');\r\n    container$.appendChild(anchor$);\r\n    var clickHandler = function clickHandler(e) {\r\n      e.preventDefault();\r\n      openAddChannelPopup(settings);\r\n    };\r\n    addEvent(anchor$, 'click', clickHandler);\r\n    cleanups$3.push(function () {\r\n      removeEvent(anchor$, 'click', clickHandler);\r\n      container$.removeChild(anchor$);\r\n    });\r\n  }\r\n  function addChannel(settings) {\r\n    settings = processRules(settings, rules$4.addChannel, 'Channel.addChannel');\r\n    openAddChannelPopup(settings);\r\n  }\r\n  function getAddChannelImgSrc(settings) {\r\n    var filename = \"friendadd_\".concat(settings.size, \"_yellow_rect.png\");\r\n    return \"\".concat(URL.channelIcon, \"/channel/\").concat(filename);\r\n  }\r\n  function openAddChannelPopup(settings) {\r\n    var addChannelUrl = \"\".concat(URL.channel, \"/\").concat(settings.channelPublicId, \"/friend\");\r\n    if (getAppKey$1() !== null) {\r\n      addChannelUrl += \"?\".concat(makeChannelParams(API_VER$1));\r\n    }\r\n    windowOpen(addChannelUrl, ADD_CHANNEL_POPUP_NAME, POPUP_FEATURES);\r\n  }\r\n  function createChatButton$1(settings) {\r\n    var container$ = getElement(settings.container);\r\n    if (!container$) {\r\n      throw new KakaoError('container is required for Channel.createChatButton: pass in element or id');\r\n    } else {\r\n      applyAttributes(settings, container$, {\r\n        channelPublicId: 'data-channel-public-id',\r\n        size: 'data-size',\r\n        color: 'data-color',\r\n        shape: 'data-shape',\r\n        title: 'data-title',\r\n        supportMultipleDensities: 'data-support-multiple-densities'\r\n      });\r\n    }\r\n    settings = processRules(settings, rules$4.createChatButton, 'Channel.createChatButton');\r\n    var imgSrc = getChatImgSrc$1(settings);\r\n    var anchor$ = createAnchorImage$1(settings, imgSrc, '카카오톡 채널 1:1 채팅 버튼');\r\n    container$.appendChild(anchor$);\r\n    var clickHandler = function clickHandler(e) {\r\n      e.preventDefault();\r\n      openChatPopup$1(settings);\r\n    };\r\n    addEvent(anchor$, 'click', clickHandler);\r\n    cleanups$3.push(function () {\r\n      removeEvent(anchor$, 'click', clickHandler);\r\n      container$.removeChild(anchor$);\r\n    });\r\n  }\r\n  function chat$1(settings) {\r\n    settings = processRules(settings, rules$4.chat, 'Channel.chat');\r\n    openChatPopup$1(settings);\r\n  }\r\n  function getChatImgSrc$1(settings) {\r\n    var filename = \"\".concat(settings.title, \"_\").concat(settings.size, \"_\").concat(settings.color, \"_\").concat(settings.shape, \".png\");\r\n    return \"\".concat(URL.channelIcon, \"/channel/\").concat(filename);\r\n  }\r\n  function openChatPopup$1(settings) {\r\n    var chatUrl = \"\".concat(URL.channel, \"/\").concat(settings.channelPublicId, \"/chat\");\r\n    if (getAppKey$1() !== null) {\r\n      chatUrl += \"?\".concat(makeChannelParams(API_VER$1));\r\n    }\r\n    windowOpen(chatUrl, CHAT_POPUP_NAME$1, POPUP_FEATURES);\r\n  }\r\n  var cleanups$3 = [];\r\n  function cleanup$4() {\r\n    emptyCleanups(cleanups$3);\r\n  }\r\n\r\n  var request$4 = /*#__PURE__*/Object.freeze({\r\n    __proto__: null,\r\n    createAddChannelButton: createAddChannelButton,\r\n    addChannel: addChannel,\r\n    createChatButton: createChatButton$1,\r\n    chat: chat$1,\r\n    cleanup: cleanup$4\r\n  });\r\n\r\n  var Channel = makeModule([request$4]);\r\n\r\n  var rules$3 = {\r\n    createAddFriendButton: {\r\n      required: {\r\n        container: passesOneOf([isElement, isString]),\r\n        plusFriendId: isString\r\n      },\r\n      optional: {\r\n        size: isOneOf(['small', 'large']),\r\n        color: isOneOf(['yellow', 'black']),\r\n        shape: isOneOf(['rect', 'round']),\r\n        supportMultipleDensities: isBoolean\r\n      },\r\n      defaults: {\r\n        size: 'small',\r\n        color: 'yellow',\r\n        shape: 'rect',\r\n        supportMultipleDensities: false\r\n      }\r\n    },\r\n    addFriend: {\r\n      required: {\r\n        plusFriendId: isString\r\n      }\r\n    },\r\n    createChatButton: {\r\n      required: {\r\n        container: passesOneOf([isElement, isString]),\r\n        plusFriendId: isString\r\n      },\r\n      optional: {\r\n        size: isOneOf(['small', 'large']),\r\n        color: isOneOf(['yellow', 'mono']),\r\n        shape: isOneOf(['pc', 'mobile']),\r\n        title: isOneOf(['consult', 'question']),\r\n        supportMultipleDensities: isBoolean\r\n      },\r\n      defaults: {\r\n        size: 'small',\r\n        color: 'yellow',\r\n        shape: 'pc',\r\n        title: 'consult',\r\n        supportMultipleDensities: false\r\n      }\r\n    },\r\n    chat: {\r\n      required: {\r\n        plusFriendId: isString\r\n      }\r\n    }\r\n  };\r\n\r\n  var API_VER = '1.0';\r\n  var ADD_FRIEND_POPUP_NAME = 'plus_friend_add_social_plugin';\r\n  var CHAT_POPUP_NAME = 'plus_friend_chat_social_plugin';\r\n  function warnDeprecation() {\r\n    if (console) {\r\n      console.warn('KakaoWarning: Kakao.PlusFriend is deprecated. Please use Kakao.Channel instead.');\r\n    }\r\n  }\r\n  function createAddFriendButton(settings) {\r\n    warnDeprecation();\r\n    var container$ = getElement(settings.container);\r\n    if (!container$) {\r\n      throw new KakaoError('container is required for PlusFriend.createAddFriendButton: pass in element or id');\r\n    } else {\r\n      applyAttributes(settings, container$, {\r\n        plusFriendId: 'data-plusfriend-id',\r\n        size: 'data-size',\r\n        color: 'data-color',\r\n        shape: 'data-shape',\r\n        supportMultipleDensities: 'data-support-multiple-densities'\r\n      });\r\n    }\r\n    settings = processRules(settings, rules$3.createAddFriendButton, 'PlusFriend.createAddFriendButton');\r\n    var imgSrc = getAddFriendImgSrc(settings);\r\n    var anchor$ = createAnchorImage$1(settings, imgSrc, '플러스친구 친구 추가 버튼');\r\n    container$.appendChild(anchor$);\r\n    var clickHandler = function clickHandler(e) {\r\n      e.preventDefault();\r\n      openAddFriendPopup(settings);\r\n    };\r\n    addEvent(anchor$, 'click', clickHandler);\r\n    cleanups$2.push(function () {\r\n      removeEvent(anchor$, 'click', clickHandler);\r\n      container$.removeChild(anchor$);\r\n    });\r\n  }\r\n  function addFriend(settings) {\r\n    warnDeprecation();\r\n    settings = processRules(settings, rules$3.addFriend, 'PlusFriend.addFriend');\r\n    openAddFriendPopup(settings);\r\n  }\r\n  function getAddFriendImgSrc(settings) {\r\n    var filename = \"friendadd_\".concat(settings.size, \"_\").concat(settings.color, \"_\").concat(settings.shape, \".png\");\r\n    return \"\".concat(URL.channelIcon, \"/plusfriend/\").concat(filename);\r\n  }\r\n  function openAddFriendPopup(settings) {\r\n    var addFriendUrl = \"\".concat(URL.channel, \"/\").concat(settings.plusFriendId, \"/friend\");\r\n    if (getAppKey$1() !== null) {\r\n      addFriendUrl += \"?\".concat(makeChannelParams(API_VER));\r\n    }\r\n    windowOpen(addFriendUrl, ADD_FRIEND_POPUP_NAME, POPUP_FEATURES);\r\n  }\r\n  function createChatButton(settings) {\r\n    warnDeprecation();\r\n    var container$ = getElement(settings.container);\r\n    if (!container$) {\r\n      throw new KakaoError('container is required for PlusFriend.createChatButton: pass in element or id');\r\n    } else {\r\n      applyAttributes(settings, container$, {\r\n        plusFriendId: 'data-plusfriend-id',\r\n        size: 'data-size',\r\n        color: 'data-color',\r\n        shape: 'data-shape',\r\n        title: 'data-title',\r\n        supportMultipleDensities: 'data-support-multiple-densities'\r\n      });\r\n    }\r\n    settings = processRules(settings, rules$3.createChatButton, 'PlusFriend.createChatButton');\r\n    var imgSrc = getChatImgSrc(settings);\r\n    var anchor$ = createAnchorImage$1(settings, imgSrc, '플러스친구 1:1 채팅 버튼');\r\n    container$.appendChild(anchor$);\r\n    var clickHandler = function clickHandler(e) {\r\n      e.preventDefault();\r\n      openChatPopup(settings);\r\n    };\r\n    addEvent(anchor$, 'click', clickHandler);\r\n    cleanups$2.push(function () {\r\n      removeEvent(anchor$, 'click', clickHandler);\r\n      container$.removeChild(anchor$);\r\n    });\r\n  }\r\n  function chat(settings) {\r\n    warnDeprecation();\r\n    settings = processRules(settings, rules$3.chat, 'PlusFriend.chat');\r\n    openChatPopup(settings);\r\n  }\r\n  function getChatImgSrc(settings) {\r\n    var filename = \"\".concat(settings.title, \"_\").concat(settings.size, \"_\").concat(settings.color, \"_\").concat(settings.shape, \".png\");\r\n    return \"\".concat(URL.channelIcon, \"/plusfriend/\").concat(filename);\r\n  }\r\n  function openChatPopup(settings) {\r\n    var chatUrl = \"\".concat(URL.channel, \"/\").concat(settings.plusFriendId, \"/chat\");\r\n    if (getAppKey$1() !== null) {\r\n      chatUrl += \"?\".concat(makeChannelParams(API_VER));\r\n    }\r\n    windowOpen(chatUrl, CHAT_POPUP_NAME, POPUP_FEATURES);\r\n  }\r\n  var cleanups$2 = [];\r\n  function cleanup$3() {\r\n    emptyCleanups(cleanups$2);\r\n  }\r\n\r\n  var request$3 = /*#__PURE__*/Object.freeze({\r\n    __proto__: null,\r\n    createAddFriendButton: createAddFriendButton,\r\n    addFriend: addFriend,\r\n    createChatButton: createChatButton,\r\n    chat: chat,\r\n    cleanup: cleanup$3\r\n  });\r\n\r\n  var PlusFriend = makeModule([request$3]);\r\n\r\n  var urlInfoRule = {\r\n    required: {\r\n      title: isString\r\n    },\r\n    optional: {\r\n      desc: isString,\r\n      name: isString,\r\n      images: isArray,\r\n      type: isString\r\n    },\r\n    defaults: {\r\n      type: 'website'\r\n    },\r\n    after: function after(settings) {\r\n      if (settings.images) {\r\n        settings.imageurl = settings.images;\r\n        delete settings.images;\r\n      }\r\n    }\r\n  };\r\n  var rules$2 = {\r\n    createShareButton: {\r\n      required: {\r\n        container: passesOneOf([isElement, isString])\r\n      },\r\n      optional: {\r\n        url: isString,\r\n        text: isString\r\n      },\r\n      defaults: {\r\n        url: location.href\r\n      }\r\n    },\r\n    share: {\r\n      optional: {\r\n        url: isString,\r\n        text: isString\r\n      },\r\n      defaults: {\r\n        url: location.href\r\n      }\r\n    },\r\n    open: {\r\n      optional: {\r\n        url: isString,\r\n        text: isString,\r\n        urlInfo: function urlInfo(obj) {\r\n          return isObject(obj) && !!processRules(obj, urlInfoRule, 'Story.open');\r\n        },\r\n        install: isBoolean\r\n      },\r\n      defaults: {\r\n        url: location.href,\r\n        install: false\r\n      }\r\n    },\r\n    createFollowButton: {\r\n      required: {\r\n        container: passesOneOf([isElement, isString]),\r\n        id: isString\r\n      },\r\n      optional: {\r\n        showFollowerCount: isBoolean,\r\n        type: isOneOf(['horizontal', 'vertical'])\r\n      },\r\n      defaults: {\r\n        showFollowerCount: true,\r\n        type: 'horizontal'\r\n      },\r\n      after: function after(settings) {\r\n        if (settings.id[0] !== '@') {\r\n          settings.id = \"@\".concat(settings.id);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  function createShareButton(settings) {\r\n    var container$ = getElement(settings.container);\r\n    if (!container$) {\r\n      throw new KakaoError('container is required for Story.createShareButton: pass in element or id');\r\n    } else {\r\n      applyAttributes(settings, container$, {\r\n        url: 'data-url'\r\n      });\r\n    }\r\n    settings = processRules(settings, rules$2.createShareButton, 'Story.createShareButton');\r\n    var anchor$ = createAnchorImage(URL.storyIcon, '카카오스토리 웹 공유 버튼');\r\n    container$.appendChild(anchor$);\r\n    var clickHandler = function clickHandler(e) {\r\n      e.preventDefault();\r\n      openSharePopup(settings);\r\n    };\r\n    addEvent(anchor$, 'click', clickHandler);\r\n    cleanups$1.push(function () {\r\n      removeEvent(anchor$, 'click', clickHandler);\r\n      container$.removeChild(anchor$);\r\n    });\r\n  }\r\n  function createAnchorImage(imgSrc, imgTitle) {\r\n    var a$ = document.createElement('a');\r\n    a$.setAttribute('href', '#');\r\n    var img$ = document.createElement('img');\r\n    img$.setAttribute('src', imgSrc);\r\n    img$.setAttribute('title', imgTitle);\r\n    img$.setAttribute('alt', imgTitle);\r\n    a$.appendChild(img$);\r\n    return a$;\r\n  }\r\n  function share$1(settings) {\r\n    settings = processRules(settings, rules$2.share, 'Story.share');\r\n    openSharePopup(settings);\r\n  }\r\n  function openSharePopup(settings) {\r\n    var params = assignIn({\r\n      url: settings.url\r\n    }, makeStoryParams());\r\n    if (settings.text) {\r\n      params.text = settings.text;\r\n    }\r\n    windowOpen(\"\".concat(URL.storyShare, \"?\").concat(buildQueryString(params)), 'kakaostory_social_plugin', 'width=670, height=800, scrollbars=yes');\r\n  }\r\n  function open(settings) {\r\n    settings = processRules(settings, rules$2.open, 'Story.open');\r\n    var storyPostScheme = makeStoryPostScheme(settings);\r\n    var androidIntent = [\"intent:\".concat(storyPostScheme, \"#Intent\"), \"\".concat(settings.install ? 'package=com.kakao.story;' : '', \"end;\")].join(';');\r\n    var web2appOptions = {\r\n      urlScheme: storyPostScheme,\r\n      intentURI: androidIntent,\r\n      appName: 'KakaoStory',\r\n      storeURL: getInstallUrl('com.kakao.story', '486244601'),\r\n      onUnsupportedEnvironment: function onUnsupportedEnvironment() {\r\n        settings.fail && settings.fail();\r\n      }\r\n    };\r\n    try {\r\n      web2app(web2appOptions);\r\n    } catch (error) {\r\n    }\r\n  }\r\n  function makeStoryPostScheme(settings) {\r\n    var domain = location.hostname || '';\r\n    var params = assignIn({\r\n      apiver: '1.0',\r\n      appver: VERSION,\r\n      appid: domain,\r\n      appname: domain,\r\n      post: settings.text ? \"\".concat(settings.text, \"\\n\").concat(settings.url) : settings.url\r\n    }, makeStoryParams());\r\n    if (settings.urlInfo) {\r\n      params.urlinfo = JSON.stringify(settings.urlInfo);\r\n      params.appname = settings.urlInfo.name || params.appname;\r\n    }\r\n    return \"\".concat(URL.storyPostScheme, \"?\").concat(buildQueryString(params));\r\n  }\r\n  function createFollowButton(settings) {\r\n    var container$ = getElement(settings.container);\r\n    if (!container$) {\r\n      throw new KakaoError('container is required for Story.createFollowButton: pass in element or id');\r\n    } else {\r\n      applyAttributes(settings, container$, {\r\n        id: 'data-id',\r\n        showFollowerCount: 'data-show-follower-count',\r\n        type: 'data-type'\r\n      });\r\n    }\r\n    settings = processRules(settings, rules$2.createFollowButton, 'Story.createFollowButton');\r\n    var _createStoryFollowIfr = createStoryFollowIframe(settings),\r\n        iframe$ = _createStoryFollowIfr.iframe$,\r\n        messageHandler = _createStoryFollowIfr.messageHandler;\r\n    container$.appendChild(iframe$);\r\n    addEvent(window, 'message', messageHandler);\r\n    cleanups$1.push(function () {\r\n      removeEvent(window, 'message', messageHandler);\r\n      container$.removeChild(iframe$);\r\n    });\r\n  }\r\n  var _storyFollowIframeId = 0;\r\n  function createStoryFollowIframe(settings) {\r\n    var iframeId = _storyFollowIframeId++;\r\n    var iframeWidth = settings.showFollowerCount && settings.type === 'horizontal' ? 85 : 59;\r\n    var iframeHeight = settings.showFollowerCount && settings.type === 'vertical' ? 46 : 20;\r\n    var iframe$ = document.createElement('iframe');\r\n    iframe$.src = makeStoryFollowUrl(settings, iframeId);\r\n    iframe$.setAttribute('frameborder', '0');\r\n    iframe$.setAttribute('marginwidth', '0');\r\n    iframe$.setAttribute('marginheight', '0');\r\n    iframe$.setAttribute('scrolling', 'no');\r\n    iframe$.setAttribute('style', \"width:\".concat(iframeWidth, \"px; height:\").concat(iframeHeight, \"px;\"));\r\n    var messageHandler = function messageHandler(e) {\r\n      if (e.data && /\\.kakao\\.com$/.test(e.origin) && typeof e.data === 'string') {\r\n        var _map = map(e.data.split(','), function (e) {\r\n          return parseInt(e, 10);\r\n        }),\r\n            _map2 = _slicedToArray(_map, 3),\r\n            originIframeId = _map2[0],\r\n            afterWidth = _map2[1],\r\n            afterHeight = _map2[2];\r\n        if (originIframeId === iframeId) {\r\n          if (iframeWidth !== afterWidth) {\r\n            iframe$.style.width = \"\".concat(afterWidth, \"px\");\r\n          }\r\n          if (iframeHeight !== afterHeight) {\r\n            iframe$.style.height = \"\".concat(afterHeight, \"px\");\r\n          }\r\n        }\r\n      }\r\n    };\r\n    return {\r\n      iframe$: iframe$,\r\n      messageHandler: messageHandler\r\n    };\r\n  }\r\n  function makeStoryFollowUrl(settings, iframeId) {\r\n    var params = assignIn({\r\n      id: settings.id,\r\n      type: settings.type,\r\n      hideFollower: !settings.showFollowerCount,\r\n      frameId: iframeId\r\n    }, makeStoryParams());\r\n    return \"\".concat(URL.storyChannelFollow, \"?\").concat(buildQueryString(params));\r\n  }\r\n  function makeStoryParams() {\r\n    var params = {\r\n      kakao_agent: KAKAO_AGENT\r\n    };\r\n    if (getAppKey$1() !== null) {\r\n      params.app_key = getAppKey$1();\r\n    }\r\n    return params;\r\n  }\r\n  var cleanups$1 = [];\r\n  function cleanup$2() {\r\n    emptyCleanups(cleanups$1);\r\n  }\r\n\r\n  var request$2 = /*#__PURE__*/Object.freeze({\r\n    __proto__: null,\r\n    createShareButton: createShareButton,\r\n    share: share$1,\r\n    open: open,\r\n    createFollowButton: createFollowButton,\r\n    cleanup: cleanup$2\r\n  });\r\n\r\n  var Story = makeModule([request$2]);\r\n\r\n  var coordTypes = ['wgs84', 'katec'];\r\n  var vehicleTypes = [1, 2, 3, 4, 5, 6, 7];\r\n  var rpOptions = [1, 2, 3, 4, 5, 6, 8, 100];\r\n  var viaPointRule = {\r\n    required: {\r\n      name: isString,\r\n      x: isNumber,\r\n      y: isNumber\r\n    },\r\n    optional: {\r\n      rpflag: isString,\r\n      cid: isString\r\n    }\r\n  };\r\n  var rules$1 = {\r\n    start: {\r\n      required: {\r\n        name: isString,\r\n        x: isNumber,\r\n        y: isNumber\r\n      },\r\n      optional: {\r\n        coordType: isOneOf(coordTypes),\r\n        vehicleType: isOneOf(vehicleTypes),\r\n        rpOption: isOneOf(rpOptions),\r\n        routeInfo: isBoolean,\r\n        sX: isNumber,\r\n        sY: isNumber,\r\n        sAngle: isNumber,\r\n        returnUri: isString,\r\n        rpflag: isString,\r\n        cid: isString,\r\n        guideId: isNumber,\r\n        viaPoints: function viaPoints(points) {\r\n          if (!isArray(points)) {\r\n            return false;\r\n          } else if (points.length > 3) {\r\n            throw new KakaoError('Invalid parameter keys: via points should not be exceed 3. at Navi.start');\r\n          } else {\r\n            forEach(points, function (point) {\r\n              return processRules(point, viaPointRule, 'Navi.start');\r\n            });\r\n            return true;\r\n          }\r\n        }\r\n      },\r\n      defaults: {\r\n        coordType: 'katec',\r\n        vehicleType: 1,\r\n        rpOption: 100,\r\n        routeInfo: false\r\n      }\r\n    },\r\n    share: {\r\n      required: {\r\n        name: isString,\r\n        x: isNumber,\r\n        y: isNumber\r\n      },\r\n      optional: {\r\n        coordType: isOneOf(coordTypes),\r\n        rpflag: isString,\r\n        cid: isString,\r\n        guideId: isNumber\r\n      },\r\n      defaults: {\r\n        coordType: 'katec'\r\n      }\r\n    }\r\n  };\r\n\r\n  function start(settings) {\r\n    settings = processRules(settings, rules$1.start, 'Navi.start');\r\n    var naviStartParams = buildQueryString(makeNaviStartParams(settings));\r\n    var naviScheme = \"\".concat(URL.naviStartScheme, \"?\").concat(naviStartParams);\r\n    var fallbackUrl = \"\".concat(URL.naviWeb, \"?\").concat(naviStartParams);\r\n    callWeb2app(naviScheme, fallbackUrl);\r\n  }\r\n  function makeNaviStartParams(settings) {\r\n    var destination = {\r\n      name: settings.name,\r\n      x: settings.x,\r\n      y: settings.y,\r\n      rpflag: settings.rpflag,\r\n      cid: settings.cid,\r\n      guide_id: settings.guideId\r\n    };\r\n    var option = {\r\n      coord_type: settings.coordType,\r\n      vehicle_type: settings.vehicleType,\r\n      rpoption: settings.rpOption,\r\n      route_info: settings.routeInfo,\r\n      s_x: settings.sX,\r\n      s_y: settings.sY,\r\n      s_angle: settings.sAngle,\r\n      return_uri: settings.returnUri\r\n    };\r\n    var params = makeNaviParams();\r\n    params.param = {\r\n      destination: destination,\r\n      option: option,\r\n      via_list: settings.viaPoints\r\n    };\r\n    return params;\r\n  }\r\n  function share(settings) {\r\n    settings = processRules(settings, rules$1.share, 'Navi.share');\r\n    var naviShareParams = buildQueryString(makeNaviShareParams(settings));\r\n    var naviScheme = \"\".concat(URL.naviShareScheme, \"?\").concat(naviShareParams);\r\n    var fallbackUrl = \"\".concat(URL.naviWeb, \"?\").concat(naviShareParams);\r\n    callWeb2app(naviScheme, fallbackUrl);\r\n  }\r\n  function makeNaviShareParams(settings) {\r\n    var destination = {\r\n      name: settings.name,\r\n      x: settings.x,\r\n      y: settings.y,\r\n      rpflag: settings.rpflag,\r\n      cid: settings.cid,\r\n      guide_id: settings.guideId\r\n    };\r\n    var option = {\r\n      coord_type: settings.coordType\r\n    };\r\n    var params = makeNaviParams();\r\n    params.param = {\r\n      destination: destination,\r\n      option: option\r\n    };\r\n    params.scheme_type = 'sharePoi';\r\n    return params;\r\n  }\r\n  function makeNaviParams() {\r\n    return {\r\n      appkey: getAppKey$1(),\r\n      apiver: '1.0',\r\n      extras: {\r\n        KA: KAKAO_AGENT\r\n      }\r\n    };\r\n  }\r\n  function callWeb2app(naviScheme, fallbackUrl) {\r\n    var androidIntent = [\"intent:\".concat(naviScheme, \"#Intent\"), 'package=com.locnall.KimGiSa', \"S.browser_fallback_url=\".concat(encodeURIComponent(fallbackUrl)), 'end;'].join(';');\r\n    var web2appOptions = {\r\n      urlScheme: naviScheme,\r\n      intentURI: androidIntent,\r\n      storeURL: fallbackUrl,\r\n      universalLink: fallbackUrl\r\n    };\r\n    try {\r\n      web2app(web2appOptions);\r\n    } catch (error) {\r\n    }\r\n  }\r\n\r\n  var request$1 = /*#__PURE__*/Object.freeze({\r\n    __proto__: null,\r\n    start: start,\r\n    share: share\r\n  });\r\n\r\n  var Navi = makeModule([request$1]);\r\n\r\n  function pickableCountValidator(n) {\r\n    return isInteger(n) && n > 0 && n < 101;\r\n  }\r\n  function checkPickableCounts(settings) {\r\n    if (settings.maxPickableCount < settings.minPickableCount) {\r\n      throw new KakaoError('\"minPickableCount\" should not larger than \"maxPickableCount\"');\r\n    }\r\n  }\r\n  function disableSelectOptionsValidator(arr) {\r\n    var disableSelectOptionRule = {\r\n      required: {\r\n        reason: isOneOf(['msgBlocked', 'registered', 'unregistered', 'notFriend', 'custom'])\r\n      },\r\n      optional: {\r\n        message: isString,\r\n        uuids: isArray\r\n      },\r\n      after: function after(settings) {\r\n        if (settings.reason === 'custom' && (!settings.message || !settings.uuids)) {\r\n          throw new KakaoError('\"message\" and \"uuids\" must be set for \"custom\" option in disableSelectOption');\r\n        }\r\n      }\r\n    };\r\n    return isArray(arr) && every(arr, function (e) {\r\n      return isObject(e) && !!processRules(e, disableSelectOptionRule, 'disableSelectOption');\r\n    });\r\n  }\r\n  function checkPickerChatFilters(settings) {\r\n    if (settings.selectionType === 'chatMember') {\r\n      var f = settings.chatFilters;\r\n      if (f.indexOf('open') > -1) {\r\n        throw new KakaoError('\"open\" is not allowed in \"chatFilters\"');\r\n      }\r\n      if ((f.indexOf('direct') > -1 || f.indexOf('multi') > -1) && f.indexOf('regular') === -1) {\r\n        throw new KakaoError('\"regular\" should be included in \"chatFilters\"');\r\n      }\r\n    }\r\n  }\r\n  var friendFilters = ['none', 'invitable', 'registered'];\r\n  var serviceTypeFilters = ['talk', 'story', 'talkstory'];\r\n  var friendOrders = ['age'];\r\n  var selectionTypes = ['chat', 'chatMember'];\r\n  var _chatFilters = ['regular', 'direct', 'multi', 'open'];\r\n  var osFilters = ['all', 'ios', 'android'];\r\n  var friendPickerOptional = {\r\n    returnUrl: isString,\r\n    success: isFunction,\r\n    fail: isFunction,\r\n    always: isFunction,\r\n    friendFilter: isOneOf(friendFilters),\r\n    serviceTypeFilter: isOneOf(serviceTypeFilters),\r\n    friendOrder: isOneOf(friendOrders),\r\n    title: isString,\r\n    enableSearch: isBoolean,\r\n    countryCodeFilters: isArray,\r\n    usingOsFilter: isOneOf(osFilters),\r\n    showMyProfile: isBoolean,\r\n    showFavorite: isBoolean,\r\n    disableSelectOptions: disableSelectOptionsValidator,\r\n    displayAllProfile: isBoolean,\r\n    enableBackButton: isBoolean\r\n  };\r\n  var friendPickerDefault = {\r\n    success: emptyFunc,\r\n    fail: emptyFunc,\r\n    always: emptyFunc,\r\n    friendFilter: friendFilters[0],\r\n    serviceTypeFilter: serviceTypeFilters[0]\r\n  };\r\n  var friendsParamsRule = {\r\n    optional: {\r\n      friendFilter: isOneOf(friendFilters),\r\n      serviceTypeFilter: isOneOf(serviceTypeFilters),\r\n      friendOrder: isOneOf(friendOrders),\r\n      countryCodeFilters: isArray,\r\n      usingOsFilter: isOneOf(osFilters),\r\n      showMyProfile: isBoolean,\r\n      showFavorite: isBoolean,\r\n      showPickedFriend: isBoolean\r\n    },\r\n    defaults: {\r\n      friendFilter: friendFilters[0],\r\n      serviceTypeFilter: serviceTypeFilters[0]\r\n    }\r\n  };\r\n  var chatParamsRule = {\r\n    optional: {\r\n      selectionType: isOneOf(selectionTypes),\r\n      chatFilters: function chatFilters(arr) {\r\n        return isArray(arr) && every(arr, function (e) {\r\n          return isOneOf(_chatFilters)(e);\r\n        });\r\n      }\r\n    },\r\n    defaults: {\r\n      selectionType: selectionTypes[0],\r\n      chatFilters: [_chatFilters[0]]\r\n    },\r\n    after: checkPickerChatFilters\r\n  };\r\n  var rules = {\r\n    selectFriend: {\r\n      optional: friendPickerOptional,\r\n      defaults: friendPickerDefault\r\n    },\r\n    selectFriends: {\r\n      optional: _objectSpread2(_objectSpread2({}, friendPickerOptional), {}, {\r\n        showPickedFriend: isBoolean,\r\n        maxPickableCount: pickableCountValidator,\r\n        minPickableCount: pickableCountValidator\r\n      }),\r\n      defaults: friendPickerDefault,\r\n      after: checkPickableCounts\r\n    },\r\n    selectChat: {\r\n      optional: {\r\n        returnUrl: isString,\r\n        success: isFunction,\r\n        fail: isFunction,\r\n        always: isFunction,\r\n        selectionType: isOneOf(selectionTypes),\r\n        chatFilters: function chatFilters(arr) {\r\n          return isArray(arr) && every(arr, function (e) {\r\n            return isOneOf(_chatFilters)(e);\r\n          });\r\n        },\r\n        title: isString,\r\n        enableSearch: isBoolean,\r\n        disableSelectOptions: disableSelectOptionsValidator,\r\n        displayAllProfile: isBoolean,\r\n        maxPickableCount: pickableCountValidator,\r\n        minPickableCount: pickableCountValidator,\r\n        enableBackButton: isBoolean\r\n      },\r\n      defaults: {\r\n        success: emptyFunc,\r\n        fail: emptyFunc,\r\n        always: emptyFunc,\r\n        selectionType: selectionTypes[0],\r\n        chatFilters: [_chatFilters[0]]\r\n      },\r\n      after: function after(settings) {\r\n        checkPickableCounts(settings);\r\n        checkPickerChatFilters(settings);\r\n      }\r\n    },\r\n    select: {\r\n      optional: {\r\n        returnUrl: isString,\r\n        success: isFunction,\r\n        fail: isFunction,\r\n        always: isFunction,\r\n        title: isString,\r\n        enableSearch: isBoolean,\r\n        disableSelectOptions: disableSelectOptionsValidator,\r\n        displayAllProfile: isBoolean,\r\n        maxPickableCount: pickableCountValidator,\r\n        minPickableCount: pickableCountValidator,\r\n        enableBackButton: isBoolean,\r\n        friendsParams: function friendsParams(obj) {\r\n          return isObject(obj) && !!processRules(obj, friendsParamsRule, 'Picker.select');\r\n        },\r\n        chatParams: function chatParams(obj) {\r\n          return isObject(obj) && !!processRules(obj, chatParamsRule, 'Picker.select');\r\n        }\r\n      },\r\n      defaults: {\r\n        success: emptyFunc,\r\n        fail: emptyFunc,\r\n        always: emptyFunc\r\n      },\r\n      after: checkPickableCounts\r\n    }\r\n  };\r\n\r\n  function selectFriends(settings) {\r\n    settings = processRules(settings, rules.selectFriends, 'Picker.selectFriends');\r\n    requestPicker(settings, pruneNeedlessParams(settings), '/select/multiple');\r\n  }\r\n  function selectFriend(settings) {\r\n    settings = processRules(settings, rules.selectFriend, 'Picker.selectFriend');\r\n    requestPicker(settings, pruneNeedlessParams(settings), '/select/single');\r\n  }\r\n  function selectChat(settings) {\r\n    settings = processRules(settings, rules.selectChat, 'Picker.selectChat');\r\n    requestPicker(settings, pruneNeedlessParams(settings), '/chat/select');\r\n  }\r\n  function select(settings) {\r\n    settings = processRules(settings, rules.select, 'Picker.select');\r\n    var params = _objectSpread2(_objectSpread2(_objectSpread2({}, pruneNeedlessParams(settings)), settings.friendsParams), settings.chatParams);\r\n    requestPicker(settings, params, '/tab/select');\r\n  }\r\n  function requestPicker(settings, params, subpath) {\r\n    cleanup$1();\r\n    var transId = generateTxId();\r\n    var pickerParams = _objectSpread2(_objectSpread2({\r\n      transId: transId,\r\n      appKey: getAppKey$1(),\r\n      ka: KAKAO_AGENT\r\n    }, getAccessToken() && {\r\n      token: getAccessToken()\r\n    }), formatParams(params));\r\n    var url = URL.pickerDomain + subpath;\r\n    if (settings.returnUrl) {\r\n      pickerParams.returnUrl = settings.returnUrl;\r\n      createAndSubmitForm(pickerParams, url);\r\n    } else {\r\n      createHiddenIframe(transId, \"\".concat(URL.pickerDomain, \"/proxy?transId=\").concat(transId), cleanups);\r\n      addMessageEvent(settings, URL.pickerDomain, cleanups);\r\n      openPopupAndSubmitForm(pickerParams, {\r\n        url: url,\r\n        popupName: 'friend_picker',\r\n        popupFeatures: \"location=no,resizable=no,status=no,scrollbars=no,width=460,height=608\"\r\n      });\r\n    }\r\n  }\r\n  function pruneNeedlessParams(settings) {\r\n    var cloned = _objectSpread2({}, settings);\r\n    var keysNeedPrune = ['returnUrl', 'success', 'fail', 'always', 'friendsParams', 'chatParams'];\r\n    keysNeedPrune.forEach(function (key) {\r\n      if (cloned[key]) {\r\n        delete cloned[key];\r\n      }\r\n    });\r\n    return cloned;\r\n  }\r\n  function formatParams(params) {\r\n    var keysNeedConvertToCSV = ['countryCodeFilters', 'chatFilters'];\r\n    keysNeedConvertToCSV.forEach(function (key) {\r\n      if (params[key] !== undefined) {\r\n        params[key] = params[key].join(',');\r\n      }\r\n    });\r\n    if (params.disableSelectOptions) {\r\n      params.disableSelectOptions = JSON.stringify(params.disableSelectOptions);\r\n    }\r\n    return params;\r\n  }\r\n  var cleanups = [];\r\n  function cleanup$1() {\r\n    emptyCleanups(cleanups);\r\n  }\r\n\r\n  var request = /*#__PURE__*/Object.freeze({\r\n    __proto__: null,\r\n    selectFriends: selectFriends,\r\n    selectFriend: selectFriend,\r\n    selectChat: selectChat,\r\n    select: select,\r\n    cleanup: cleanup$1\r\n  });\r\n\r\n  var Picker = makeModule([request]);\r\n\r\n  if (true) {\r\n    window.Kakao = exports;\r\n  }\r\n  if (typeof window.kakaoAsyncInit === 'function') {\r\n    setTimeout(function () {\r\n      window.kakaoAsyncInit();\r\n    }, 0);\r\n  }\r\n  function init(appKey) {\r\n    if (UA.browser.msie && UA.browser.version.major < 9) {\r\n      throw new KakaoError('Kakao.init: Unsupported browser');\r\n    }\r\n    if (isInitialized()) {\r\n      throw new KakaoError('Kakao.init: Already initialized');\r\n    }\r\n    if (!isString(appKey)) {\r\n      throw new KakaoError('Kakao.init: App key must be provided');\r\n    }\r\n    setAppKey(appKey);\r\n    {\r\n      this.Auth = Auth;\r\n      this.API = API;\r\n      this.Link = Link;\r\n      this.Channel = Channel;\r\n      this.PlusFriend = PlusFriend;\r\n      this.Story = Story;\r\n      this.Navi = Navi;\r\n      this.Picker = Picker;\r\n    }\r\n  }\r\n  function isInitialized() {\r\n    return getAppKey$1() !== null;\r\n  }\r\n  function cleanup() {\r\n    var _this = this;\r\n    forEach(['Auth', 'API', 'Link', 'Channel', 'PlusFriend', 'Story', 'Navi', 'Picker'], function (e) {\r\n      return _this[e] && _this[e].cleanup();\r\n    });\r\n    setAppKey(null);\r\n  }\r\n\r\n  exports.VERSION = VERSION;\r\n  exports.cleanup = cleanup;\r\n  exports.init = init;\r\n  exports.isInitialized = isInitialized;\r\n\r\n  Object.defineProperty(exports, '__esModule', { value: true });\r\n\r\n})));\r\n\n\n//# sourceURL=webpack://web-p2p/./src/public/js/kakao/kakao.js?");

/***/ }),

/***/ "./src/public/js/qrious.js":
/*!*********************************!*\
  !*** ./src/public/js/qrious.js ***!
  \*********************************/
/***/ (function(module) {

eval("/*\r\n * QRious v4.0.2\r\n * Copyright (C) 2017 Alasdair Mercer\r\n * Copyright (C) 2010 Tom Zerucha\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU General Public License as published by\r\n * the Free Software Foundation, either version 3 of the License, or\r\n * (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU General Public License\r\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\r\n */\r\n(function (global, factory) {\r\n   true ? module.exports = factory() :\r\n  0;\r\n}(this, (function () { 'use strict';\r\n\r\n  /*\r\n   * Copyright (C) 2017 Alasdair Mercer, !ninja\r\n   *\r\n   * Permission is hereby granted, free of charge, to any person obtaining a copy\r\n   * of this software and associated documentation files (the \"Software\"), to deal\r\n   * in the Software without restriction, including without limitation the rights\r\n   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n   * copies of the Software, and to permit persons to whom the Software is\r\n   * furnished to do so, subject to the following conditions:\r\n   *\r\n   * The above copyright notice and this permission notice shall be included in all\r\n   * copies or substantial portions of the Software.\r\n   *\r\n   * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\n   * SOFTWARE.\r\n   */\r\n\r\n  /**\r\n   * A bare-bones constructor for surrogate prototype swapping.\r\n   *\r\n   * @private\r\n   * @constructor\r\n   */\r\n  var Constructor = /* istanbul ignore next */ function() {};\r\n  /**\r\n   * A reference to <code>Object.prototype.hasOwnProperty</code>.\r\n   *\r\n   * @private\r\n   * @type {Function}\r\n   */\r\n  var hasOwnProperty = Object.prototype.hasOwnProperty;\r\n  /**\r\n   * A reference to <code>Array.prototype.slice</code>.\r\n   *\r\n   * @private\r\n   * @type {Function}\r\n   */\r\n  var slice = Array.prototype.slice;\r\n\r\n  /**\r\n   * Creates an object which inherits the given <code>prototype</code>.\r\n   *\r\n   * Optionally, the created object can be extended further with the specified <code>properties</code>.\r\n   *\r\n   * @param {Object} prototype - the prototype to be inherited by the created object\r\n   * @param {Object} [properties] - the optional properties to be extended by the created object\r\n   * @return {Object} The newly created object.\r\n   * @private\r\n   */\r\n  function createObject(prototype, properties) {\r\n    var result;\r\n    /* istanbul ignore next */\r\n    if (typeof Object.create === 'function') {\r\n      result = Object.create(prototype);\r\n    } else {\r\n      Constructor.prototype = prototype;\r\n      result = new Constructor();\r\n      Constructor.prototype = null;\r\n    }\r\n\r\n    if (properties) {\r\n      extendObject(true, result, properties);\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Extends the constructor to which this method is associated with the <code>prototype</code> and/or\r\n   * <code>statics</code> provided.\r\n   *\r\n   * If <code>name</code> is provided, it will be used as the class name and can be accessed via a special\r\n   * <code>class_</code> property on the child constructor, otherwise the class name of the super constructor will be used\r\n   * instead. The class name may also be used string representation for instances of the child constructor (via\r\n   * <code>toString</code>), but this is not applicable to the <i>lite</i> version of Nevis.\r\n   *\r\n   * If <code>constructor</code> is provided, it will be used as the constructor for the child, otherwise a simple\r\n   * constructor which only calls the super constructor will be used instead.\r\n   *\r\n   * The super constructor can be accessed via a special <code>super_</code> property on the child constructor.\r\n   *\r\n   * @param {string} [name=this.class_] - the class name to be used for the child constructor\r\n   * @param {Function} [constructor] - the constructor for the child\r\n   * @param {Object} [prototype] - the prototype properties to be defined for the child\r\n   * @param {Object} [statics] - the static properties to be defined for the child\r\n   * @return {Function} The child <code>constructor</code> provided or the one created if none was given.\r\n   * @public\r\n   */\r\n  function extend(name, constructor, prototype, statics) {\r\n    var superConstructor = this;\r\n\r\n    if (typeof name !== 'string') {\r\n      statics = prototype;\r\n      prototype = constructor;\r\n      constructor = name;\r\n      name = null;\r\n    }\r\n\r\n    if (typeof constructor !== 'function') {\r\n      statics = prototype;\r\n      prototype = constructor;\r\n      constructor = function() {\r\n        return superConstructor.apply(this, arguments);\r\n      };\r\n    }\r\n\r\n    extendObject(false, constructor, superConstructor, statics);\r\n\r\n    constructor.prototype = createObject(superConstructor.prototype, prototype);\r\n    constructor.prototype.constructor = constructor;\r\n\r\n    constructor.class_ = name || superConstructor.class_;\r\n    constructor.super_ = superConstructor;\r\n\r\n    return constructor;\r\n  }\r\n\r\n  /**\r\n   * Extends the specified <code>target</code> object with the properties in each of the <code>sources</code> provided.\r\n   *\r\n   * if any source is <code>null</code> it will be ignored.\r\n   *\r\n   * @param {boolean} own - <code>true</code> to only copy <b>own</b> properties from <code>sources</code> onto\r\n   * <code>target</code>; otherwise <code>false</code>\r\n   * @param {Object} target - the target object which should be extended\r\n   * @param {...Object} [sources] - the source objects whose properties are to be copied onto <code>target</code>\r\n   * @return {void}\r\n   * @private\r\n   */\r\n  function extendObject(own, target, sources) {\r\n    sources = slice.call(arguments, 2);\r\n\r\n    var property;\r\n    var source;\r\n\r\n    for (var i = 0, length = sources.length; i < length; i++) {\r\n      source = sources[i];\r\n\r\n      for (property in source) {\r\n        if (!own || hasOwnProperty.call(source, property)) {\r\n          target[property] = source[property];\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  var extend_1 = extend;\r\n\r\n  /**\r\n   * The base class from which all others should extend.\r\n   *\r\n   * @public\r\n   * @constructor\r\n   */\r\n  function Nevis() {}\r\n  Nevis.class_ = 'Nevis';\r\n  Nevis.super_ = Object;\r\n\r\n  /**\r\n   * Extends the constructor to which this method is associated with the <code>prototype</code> and/or\r\n   * <code>statics</code> provided.\r\n   *\r\n   * If <code>name</code> is provided, it will be used as the class name and can be accessed via a special\r\n   * <code>class_</code> property on the child constructor, otherwise the class name of the super constructor will be used\r\n   * instead. The class name may also be used string representation for instances of the child constructor (via\r\n   * <code>toString</code>), but this is not applicable to the <i>lite</i> version of Nevis.\r\n   *\r\n   * If <code>constructor</code> is provided, it will be used as the constructor for the child, otherwise a simple\r\n   * constructor which only calls the super constructor will be used instead.\r\n   *\r\n   * The super constructor can be accessed via a special <code>super_</code> property on the child constructor.\r\n   *\r\n   * @param {string} [name=this.class_] - the class name to be used for the child constructor\r\n   * @param {Function} [constructor] - the constructor for the child\r\n   * @param {Object} [prototype] - the prototype properties to be defined for the child\r\n   * @param {Object} [statics] - the static properties to be defined for the child\r\n   * @return {Function} The child <code>constructor</code> provided or the one created if none was given.\r\n   * @public\r\n   * @static\r\n   * @memberof Nevis\r\n   */\r\n  Nevis.extend = extend_1;\r\n\r\n  var nevis = Nevis;\r\n\r\n  var lite = nevis;\r\n\r\n  /**\r\n   * Responsible for rendering a QR code {@link Frame} on a specific type of element.\r\n   *\r\n   * A renderer may be dependant on the rendering of another element, so the ordering of their execution is important.\r\n   *\r\n   * The rendering of a element can be deferred by disabling the renderer initially, however, any attempt get the element\r\n   * from the renderer will result in it being immediately enabled and the element being rendered.\r\n   *\r\n   * @param {QRious} qrious - the {@link QRious} instance to be used\r\n   * @param {*} element - the element onto which the QR code is to be rendered\r\n   * @param {boolean} [enabled] - <code>true</code> this {@link Renderer} is enabled; otherwise <code>false</code>.\r\n   * @public\r\n   * @class\r\n   * @extends Nevis\r\n   */\r\n  var Renderer = lite.extend(function(qrious, element, enabled) {\r\n    /**\r\n     * The {@link QRious} instance.\r\n     *\r\n     * @protected\r\n     * @type {QRious}\r\n     * @memberof Renderer#\r\n     */\r\n    this.qrious = qrious;\r\n\r\n    /**\r\n     * The element onto which this {@link Renderer} is rendering the QR code.\r\n     *\r\n     * @protected\r\n     * @type {*}\r\n     * @memberof Renderer#\r\n     */\r\n    this.element = element;\r\n    this.element.qrious = qrious;\r\n\r\n    /**\r\n     * Whether this {@link Renderer} is enabled.\r\n     *\r\n     * @protected\r\n     * @type {boolean}\r\n     * @memberof Renderer#\r\n     */\r\n    this.enabled = Boolean(enabled);\r\n  }, {\r\n\r\n    /**\r\n     * Draws the specified QR code <code>frame</code> on the underlying element.\r\n     *\r\n     * Implementations of {@link Renderer} <b>must</b> override this method with their own specific logic.\r\n     *\r\n     * @param {Frame} frame - the {@link Frame} to be drawn\r\n     * @return {void}\r\n     * @protected\r\n     * @abstract\r\n     * @memberof Renderer#\r\n     */\r\n    draw: function(frame) {},\r\n\r\n    /**\r\n     * Returns the element onto which this {@link Renderer} is rendering the QR code.\r\n     *\r\n     * If this method is called while this {@link Renderer} is disabled, it will be immediately enabled and rendered\r\n     * before the element is returned.\r\n     *\r\n     * @return {*} The element.\r\n     * @public\r\n     * @memberof Renderer#\r\n     */\r\n    getElement: function() {\r\n      if (!this.enabled) {\r\n        this.enabled = true;\r\n        this.render();\r\n      }\r\n\r\n      return this.element;\r\n    },\r\n\r\n    /**\r\n     * Calculates the size (in pixel units) to represent an individual module within the QR code based on the\r\n     * <code>frame</code> provided.\r\n     *\r\n     * Any configured padding will be excluded from the returned size.\r\n     *\r\n     * The returned value will be at least one, even in cases where the size of the QR code does not fit its contents.\r\n     * This is done so that the inevitable clipping is handled more gracefully since this way at least something is\r\n     * displayed instead of just a blank space filled by the background color.\r\n     *\r\n     * @param {Frame} frame - the {@link Frame} from which the module size is to be derived\r\n     * @return {number} The pixel size for each module in the QR code which will be no less than one.\r\n     * @protected\r\n     * @memberof Renderer#\r\n     */\r\n    getModuleSize: function(frame) {\r\n      var qrious = this.qrious;\r\n      var padding = qrious.padding || 0;\r\n      var pixels = Math.floor((qrious.size - (padding * 2)) / frame.width);\r\n\r\n      return Math.max(1, pixels);\r\n    },\r\n\r\n    /**\r\n     * Calculates the offset/padding (in pixel units) to be inserted before the QR code based on the <code>frame</code>\r\n     * provided.\r\n     *\r\n     * The returned value will be zero if there is no available offset or if the size of the QR code does not fit its\r\n     * contents. It will never be a negative value. This is done so that the inevitable clipping appears more naturally\r\n     * and it is not clipped from all directions.\r\n     *\r\n     * @param {Frame} frame - the {@link Frame} from which the offset is to be derived\r\n     * @return {number} The pixel offset for the QR code which will be no less than zero.\r\n     * @protected\r\n     * @memberof Renderer#\r\n     */\r\n    getOffset: function(frame) {\r\n      var qrious = this.qrious;\r\n      var padding = qrious.padding;\r\n\r\n      if (padding != null) {\r\n        return padding;\r\n      }\r\n\r\n      var moduleSize = this.getModuleSize(frame);\r\n      var offset = Math.floor((qrious.size - (moduleSize * frame.width)) / 2);\r\n\r\n      return Math.max(0, offset);\r\n    },\r\n\r\n    /**\r\n     * Renders a QR code on the underlying element based on the <code>frame</code> provided.\r\n     *\r\n     * @param {Frame} frame - the {@link Frame} to be rendered\r\n     * @return {void}\r\n     * @public\r\n     * @memberof Renderer#\r\n     */\r\n    render: function(frame) {\r\n      if (this.enabled) {\r\n        this.resize();\r\n        this.reset();\r\n        this.draw(frame);\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Resets the underlying element, effectively clearing any previously rendered QR code.\r\n     *\r\n     * Implementations of {@link Renderer} <b>must</b> override this method with their own specific logic.\r\n     *\r\n     * @return {void}\r\n     * @protected\r\n     * @abstract\r\n     * @memberof Renderer#\r\n     */\r\n    reset: function() {},\r\n\r\n    /**\r\n     * Ensures that the size of the underlying element matches that defined on the associated {@link QRious} instance.\r\n     *\r\n     * Implementations of {@link Renderer} <b>must</b> override this method with their own specific logic.\r\n     *\r\n     * @return {void}\r\n     * @protected\r\n     * @abstract\r\n     * @memberof Renderer#\r\n     */\r\n    resize: function() {}\r\n\r\n  });\r\n\r\n  var Renderer_1 = Renderer;\r\n\r\n  /**\r\n   * An implementation of {@link Renderer} for working with <code>canvas</code> elements.\r\n   *\r\n   * @public\r\n   * @class\r\n   * @extends Renderer\r\n   */\r\n  var CanvasRenderer = Renderer_1.extend({\r\n\r\n    /**\r\n     * @override\r\n     */\r\n    draw: function(frame) {\r\n      var i, j;\r\n      var qrious = this.qrious;\r\n      var moduleSize = this.getModuleSize(frame);\r\n      var offset = this.getOffset(frame);\r\n      var context = this.element.getContext('2d');\r\n\r\n      context.fillStyle = qrious.foreground;\r\n      context.globalAlpha = qrious.foregroundAlpha;\r\n\r\n      for (i = 0; i < frame.width; i++) {\r\n        for (j = 0; j < frame.width; j++) {\r\n          if (frame.buffer[(j * frame.width) + i]) {\r\n            context.fillRect((moduleSize * i) + offset, (moduleSize * j) + offset, moduleSize, moduleSize);\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    /**\r\n     * @override\r\n     */\r\n    reset: function() {\r\n      var qrious = this.qrious;\r\n      var context = this.element.getContext('2d');\r\n      var size = qrious.size;\r\n\r\n      context.lineWidth = 1;\r\n      context.clearRect(0, 0, size, size);\r\n      context.fillStyle = qrious.background;\r\n      context.globalAlpha = qrious.backgroundAlpha;\r\n      context.fillRect(0, 0, size, size);\r\n    },\r\n\r\n    /**\r\n     * @override\r\n     */\r\n    resize: function() {\r\n      var element = this.element;\r\n\r\n      element.width = element.height = this.qrious.size;\r\n    }\r\n\r\n  });\r\n\r\n  var CanvasRenderer_1 = CanvasRenderer;\r\n\r\n  /* eslint no-multi-spaces: \"off\" */\r\n\r\n\r\n\r\n  /**\r\n   * Contains alignment pattern information.\r\n   *\r\n   * @public\r\n   * @class\r\n   * @extends Nevis\r\n   */\r\n  var Alignment = lite.extend(null, {\r\n\r\n    /**\r\n     * The alignment pattern block.\r\n     *\r\n     * @public\r\n     * @static\r\n     * @type {number[]}\r\n     * @memberof Alignment\r\n     */\r\n    BLOCK: [\r\n      0,  11, 15, 19, 23, 27, 31,\r\n      16, 18, 20, 22, 24, 26, 28, 20, 22, 24, 24, 26, 28, 28, 22, 24, 24,\r\n      26, 26, 28, 28, 24, 24, 26, 26, 26, 28, 28, 24, 26, 26, 26, 28, 28\r\n    ]\r\n\r\n  });\r\n\r\n  var Alignment_1 = Alignment;\r\n\r\n  /* eslint no-multi-spaces: \"off\" */\r\n\r\n\r\n\r\n  /**\r\n   * Contains error correction information.\r\n   *\r\n   * @public\r\n   * @class\r\n   * @extends Nevis\r\n   */\r\n  var ErrorCorrection = lite.extend(null, {\r\n\r\n    /**\r\n     * The error correction blocks.\r\n     *\r\n     * There are four elements per version. The first two indicate the number of blocks, then the data width, and finally\r\n     * the ECC width.\r\n     *\r\n     * @public\r\n     * @static\r\n     * @type {number[]}\r\n     * @memberof ErrorCorrection\r\n     */\r\n    BLOCKS: [\r\n      1,  0,  19,  7,     1,  0,  16,  10,    1,  0,  13,  13,    1,  0,  9,   17,\r\n      1,  0,  34,  10,    1,  0,  28,  16,    1,  0,  22,  22,    1,  0,  16,  28,\r\n      1,  0,  55,  15,    1,  0,  44,  26,    2,  0,  17,  18,    2,  0,  13,  22,\r\n      1,  0,  80,  20,    2,  0,  32,  18,    2,  0,  24,  26,    4,  0,  9,   16,\r\n      1,  0,  108, 26,    2,  0,  43,  24,    2,  2,  15,  18,    2,  2,  11,  22,\r\n      2,  0,  68,  18,    4,  0,  27,  16,    4,  0,  19,  24,    4,  0,  15,  28,\r\n      2,  0,  78,  20,    4,  0,  31,  18,    2,  4,  14,  18,    4,  1,  13,  26,\r\n      2,  0,  97,  24,    2,  2,  38,  22,    4,  2,  18,  22,    4,  2,  14,  26,\r\n      2,  0,  116, 30,    3,  2,  36,  22,    4,  4,  16,  20,    4,  4,  12,  24,\r\n      2,  2,  68,  18,    4,  1,  43,  26,    6,  2,  19,  24,    6,  2,  15,  28,\r\n      4,  0,  81,  20,    1,  4,  50,  30,    4,  4,  22,  28,    3,  8,  12,  24,\r\n      2,  2,  92,  24,    6,  2,  36,  22,    4,  6,  20,  26,    7,  4,  14,  28,\r\n      4,  0,  107, 26,    8,  1,  37,  22,    8,  4,  20,  24,    12, 4,  11,  22,\r\n      3,  1,  115, 30,    4,  5,  40,  24,    11, 5,  16,  20,    11, 5,  12,  24,\r\n      5,  1,  87,  22,    5,  5,  41,  24,    5,  7,  24,  30,    11, 7,  12,  24,\r\n      5,  1,  98,  24,    7,  3,  45,  28,    15, 2,  19,  24,    3,  13, 15,  30,\r\n      1,  5,  107, 28,    10, 1,  46,  28,    1,  15, 22,  28,    2,  17, 14,  28,\r\n      5,  1,  120, 30,    9,  4,  43,  26,    17, 1,  22,  28,    2,  19, 14,  28,\r\n      3,  4,  113, 28,    3,  11, 44,  26,    17, 4,  21,  26,    9,  16, 13,  26,\r\n      3,  5,  107, 28,    3,  13, 41,  26,    15, 5,  24,  30,    15, 10, 15,  28,\r\n      4,  4,  116, 28,    17, 0,  42,  26,    17, 6,  22,  28,    19, 6,  16,  30,\r\n      2,  7,  111, 28,    17, 0,  46,  28,    7,  16, 24,  30,    34, 0,  13,  24,\r\n      4,  5,  121, 30,    4,  14, 47,  28,    11, 14, 24,  30,    16, 14, 15,  30,\r\n      6,  4,  117, 30,    6,  14, 45,  28,    11, 16, 24,  30,    30, 2,  16,  30,\r\n      8,  4,  106, 26,    8,  13, 47,  28,    7,  22, 24,  30,    22, 13, 15,  30,\r\n      10, 2,  114, 28,    19, 4,  46,  28,    28, 6,  22,  28,    33, 4,  16,  30,\r\n      8,  4,  122, 30,    22, 3,  45,  28,    8,  26, 23,  30,    12, 28, 15,  30,\r\n      3,  10, 117, 30,    3,  23, 45,  28,    4,  31, 24,  30,    11, 31, 15,  30,\r\n      7,  7,  116, 30,    21, 7,  45,  28,    1,  37, 23,  30,    19, 26, 15,  30,\r\n      5,  10, 115, 30,    19, 10, 47,  28,    15, 25, 24,  30,    23, 25, 15,  30,\r\n      13, 3,  115, 30,    2,  29, 46,  28,    42, 1,  24,  30,    23, 28, 15,  30,\r\n      17, 0,  115, 30,    10, 23, 46,  28,    10, 35, 24,  30,    19, 35, 15,  30,\r\n      17, 1,  115, 30,    14, 21, 46,  28,    29, 19, 24,  30,    11, 46, 15,  30,\r\n      13, 6,  115, 30,    14, 23, 46,  28,    44, 7,  24,  30,    59, 1,  16,  30,\r\n      12, 7,  121, 30,    12, 26, 47,  28,    39, 14, 24,  30,    22, 41, 15,  30,\r\n      6,  14, 121, 30,    6,  34, 47,  28,    46, 10, 24,  30,    2,  64, 15,  30,\r\n      17, 4,  122, 30,    29, 14, 46,  28,    49, 10, 24,  30,    24, 46, 15,  30,\r\n      4,  18, 122, 30,    13, 32, 46,  28,    48, 14, 24,  30,    42, 32, 15,  30,\r\n      20, 4,  117, 30,    40, 7,  47,  28,    43, 22, 24,  30,    10, 67, 15,  30,\r\n      19, 6,  118, 30,    18, 31, 47,  28,    34, 34, 24,  30,    20, 61, 15,  30\r\n    ],\r\n\r\n    /**\r\n     * The final format bits with mask (level << 3 | mask).\r\n     *\r\n     * @public\r\n     * @static\r\n     * @type {number[]}\r\n     * @memberof ErrorCorrection\r\n     */\r\n    FINAL_FORMAT: [\r\n      // L\r\n      0x77c4, 0x72f3, 0x7daa, 0x789d, 0x662f, 0x6318, 0x6c41, 0x6976,\r\n      // M\r\n      0x5412, 0x5125, 0x5e7c, 0x5b4b, 0x45f9, 0x40ce, 0x4f97, 0x4aa0,\r\n      // Q\r\n      0x355f, 0x3068, 0x3f31, 0x3a06, 0x24b4, 0x2183, 0x2eda, 0x2bed,\r\n      // H\r\n      0x1689, 0x13be, 0x1ce7, 0x19d0, 0x0762, 0x0255, 0x0d0c, 0x083b\r\n    ],\r\n\r\n    /**\r\n     * A map of human-readable ECC levels.\r\n     *\r\n     * @public\r\n     * @static\r\n     * @type {Object.<string, number>}\r\n     * @memberof ErrorCorrection\r\n     */\r\n    LEVELS: {\r\n      L: 1,\r\n      M: 2,\r\n      Q: 3,\r\n      H: 4\r\n    }\r\n\r\n  });\r\n\r\n  var ErrorCorrection_1 = ErrorCorrection;\r\n\r\n  /**\r\n   * Contains Galois field information.\r\n   *\r\n   * @public\r\n   * @class\r\n   * @extends Nevis\r\n   */\r\n  var Galois = lite.extend(null, {\r\n\r\n    /**\r\n     * The Galois field exponent table.\r\n     *\r\n     * @public\r\n     * @static\r\n     * @type {number[]}\r\n     * @memberof Galois\r\n     */\r\n    EXPONENT: [\r\n      0x01, 0x02, 0x04, 0x08, 0x10, 0x20, 0x40, 0x80, 0x1d, 0x3a, 0x74, 0xe8, 0xcd, 0x87, 0x13, 0x26,\r\n      0x4c, 0x98, 0x2d, 0x5a, 0xb4, 0x75, 0xea, 0xc9, 0x8f, 0x03, 0x06, 0x0c, 0x18, 0x30, 0x60, 0xc0,\r\n      0x9d, 0x27, 0x4e, 0x9c, 0x25, 0x4a, 0x94, 0x35, 0x6a, 0xd4, 0xb5, 0x77, 0xee, 0xc1, 0x9f, 0x23,\r\n      0x46, 0x8c, 0x05, 0x0a, 0x14, 0x28, 0x50, 0xa0, 0x5d, 0xba, 0x69, 0xd2, 0xb9, 0x6f, 0xde, 0xa1,\r\n      0x5f, 0xbe, 0x61, 0xc2, 0x99, 0x2f, 0x5e, 0xbc, 0x65, 0xca, 0x89, 0x0f, 0x1e, 0x3c, 0x78, 0xf0,\r\n      0xfd, 0xe7, 0xd3, 0xbb, 0x6b, 0xd6, 0xb1, 0x7f, 0xfe, 0xe1, 0xdf, 0xa3, 0x5b, 0xb6, 0x71, 0xe2,\r\n      0xd9, 0xaf, 0x43, 0x86, 0x11, 0x22, 0x44, 0x88, 0x0d, 0x1a, 0x34, 0x68, 0xd0, 0xbd, 0x67, 0xce,\r\n      0x81, 0x1f, 0x3e, 0x7c, 0xf8, 0xed, 0xc7, 0x93, 0x3b, 0x76, 0xec, 0xc5, 0x97, 0x33, 0x66, 0xcc,\r\n      0x85, 0x17, 0x2e, 0x5c, 0xb8, 0x6d, 0xda, 0xa9, 0x4f, 0x9e, 0x21, 0x42, 0x84, 0x15, 0x2a, 0x54,\r\n      0xa8, 0x4d, 0x9a, 0x29, 0x52, 0xa4, 0x55, 0xaa, 0x49, 0x92, 0x39, 0x72, 0xe4, 0xd5, 0xb7, 0x73,\r\n      0xe6, 0xd1, 0xbf, 0x63, 0xc6, 0x91, 0x3f, 0x7e, 0xfc, 0xe5, 0xd7, 0xb3, 0x7b, 0xf6, 0xf1, 0xff,\r\n      0xe3, 0xdb, 0xab, 0x4b, 0x96, 0x31, 0x62, 0xc4, 0x95, 0x37, 0x6e, 0xdc, 0xa5, 0x57, 0xae, 0x41,\r\n      0x82, 0x19, 0x32, 0x64, 0xc8, 0x8d, 0x07, 0x0e, 0x1c, 0x38, 0x70, 0xe0, 0xdd, 0xa7, 0x53, 0xa6,\r\n      0x51, 0xa2, 0x59, 0xb2, 0x79, 0xf2, 0xf9, 0xef, 0xc3, 0x9b, 0x2b, 0x56, 0xac, 0x45, 0x8a, 0x09,\r\n      0x12, 0x24, 0x48, 0x90, 0x3d, 0x7a, 0xf4, 0xf5, 0xf7, 0xf3, 0xfb, 0xeb, 0xcb, 0x8b, 0x0b, 0x16,\r\n      0x2c, 0x58, 0xb0, 0x7d, 0xfa, 0xe9, 0xcf, 0x83, 0x1b, 0x36, 0x6c, 0xd8, 0xad, 0x47, 0x8e, 0x00\r\n    ],\r\n\r\n    /**\r\n     * The Galois field log table.\r\n     *\r\n     * @public\r\n     * @static\r\n     * @type {number[]}\r\n     * @memberof Galois\r\n     */\r\n    LOG: [\r\n      0xff, 0x00, 0x01, 0x19, 0x02, 0x32, 0x1a, 0xc6, 0x03, 0xdf, 0x33, 0xee, 0x1b, 0x68, 0xc7, 0x4b,\r\n      0x04, 0x64, 0xe0, 0x0e, 0x34, 0x8d, 0xef, 0x81, 0x1c, 0xc1, 0x69, 0xf8, 0xc8, 0x08, 0x4c, 0x71,\r\n      0x05, 0x8a, 0x65, 0x2f, 0xe1, 0x24, 0x0f, 0x21, 0x35, 0x93, 0x8e, 0xda, 0xf0, 0x12, 0x82, 0x45,\r\n      0x1d, 0xb5, 0xc2, 0x7d, 0x6a, 0x27, 0xf9, 0xb9, 0xc9, 0x9a, 0x09, 0x78, 0x4d, 0xe4, 0x72, 0xa6,\r\n      0x06, 0xbf, 0x8b, 0x62, 0x66, 0xdd, 0x30, 0xfd, 0xe2, 0x98, 0x25, 0xb3, 0x10, 0x91, 0x22, 0x88,\r\n      0x36, 0xd0, 0x94, 0xce, 0x8f, 0x96, 0xdb, 0xbd, 0xf1, 0xd2, 0x13, 0x5c, 0x83, 0x38, 0x46, 0x40,\r\n      0x1e, 0x42, 0xb6, 0xa3, 0xc3, 0x48, 0x7e, 0x6e, 0x6b, 0x3a, 0x28, 0x54, 0xfa, 0x85, 0xba, 0x3d,\r\n      0xca, 0x5e, 0x9b, 0x9f, 0x0a, 0x15, 0x79, 0x2b, 0x4e, 0xd4, 0xe5, 0xac, 0x73, 0xf3, 0xa7, 0x57,\r\n      0x07, 0x70, 0xc0, 0xf7, 0x8c, 0x80, 0x63, 0x0d, 0x67, 0x4a, 0xde, 0xed, 0x31, 0xc5, 0xfe, 0x18,\r\n      0xe3, 0xa5, 0x99, 0x77, 0x26, 0xb8, 0xb4, 0x7c, 0x11, 0x44, 0x92, 0xd9, 0x23, 0x20, 0x89, 0x2e,\r\n      0x37, 0x3f, 0xd1, 0x5b, 0x95, 0xbc, 0xcf, 0xcd, 0x90, 0x87, 0x97, 0xb2, 0xdc, 0xfc, 0xbe, 0x61,\r\n      0xf2, 0x56, 0xd3, 0xab, 0x14, 0x2a, 0x5d, 0x9e, 0x84, 0x3c, 0x39, 0x53, 0x47, 0x6d, 0x41, 0xa2,\r\n      0x1f, 0x2d, 0x43, 0xd8, 0xb7, 0x7b, 0xa4, 0x76, 0xc4, 0x17, 0x49, 0xec, 0x7f, 0x0c, 0x6f, 0xf6,\r\n      0x6c, 0xa1, 0x3b, 0x52, 0x29, 0x9d, 0x55, 0xaa, 0xfb, 0x60, 0x86, 0xb1, 0xbb, 0xcc, 0x3e, 0x5a,\r\n      0xcb, 0x59, 0x5f, 0xb0, 0x9c, 0xa9, 0xa0, 0x51, 0x0b, 0xf5, 0x16, 0xeb, 0x7a, 0x75, 0x2c, 0xd7,\r\n      0x4f, 0xae, 0xd5, 0xe9, 0xe6, 0xe7, 0xad, 0xe8, 0x74, 0xd6, 0xf4, 0xea, 0xa8, 0x50, 0x58, 0xaf\r\n    ]\r\n\r\n  });\r\n\r\n  var Galois_1 = Galois;\r\n\r\n  /**\r\n   * Contains version pattern information.\r\n   *\r\n   * @public\r\n   * @class\r\n   * @extends Nevis\r\n   */\r\n  var Version = lite.extend(null, {\r\n\r\n    /**\r\n     * The version pattern block.\r\n     *\r\n     * @public\r\n     * @static\r\n     * @type {number[]}\r\n     * @memberof Version\r\n     */\r\n    BLOCK: [\r\n      0xc94, 0x5bc, 0xa99, 0x4d3, 0xbf6, 0x762, 0x847, 0x60d, 0x928, 0xb78, 0x45d, 0xa17, 0x532,\r\n      0x9a6, 0x683, 0x8c9, 0x7ec, 0xec4, 0x1e1, 0xfab, 0x08e, 0xc1a, 0x33f, 0xd75, 0x250, 0x9d5,\r\n      0x6f0, 0x8ba, 0x79f, 0xb0b, 0x42e, 0xa64, 0x541, 0xc69\r\n    ]\r\n\r\n  });\r\n\r\n  var Version_1 = Version;\r\n\r\n  /**\r\n   * Generates information for a QR code frame based on a specific value to be encoded.\r\n   *\r\n   * @param {Frame~Options} options - the options to be used\r\n   * @public\r\n   * @class\r\n   * @extends Nevis\r\n   */\r\n  var Frame = lite.extend(function(options) {\r\n    var dataBlock, eccBlock, index, neccBlock1, neccBlock2;\r\n    var valueLength = options.value.length;\r\n\r\n    this._badness = [];\r\n    this._level = ErrorCorrection_1.LEVELS[options.level];\r\n    this._polynomial = [];\r\n    this._value = options.value;\r\n    this._version = 0;\r\n    this._stringBuffer = [];\r\n\r\n    while (this._version < 40) {\r\n      this._version++;\r\n\r\n      index = ((this._level - 1) * 4) + ((this._version - 1) * 16);\r\n\r\n      neccBlock1 = ErrorCorrection_1.BLOCKS[index++];\r\n      neccBlock2 = ErrorCorrection_1.BLOCKS[index++];\r\n      dataBlock = ErrorCorrection_1.BLOCKS[index++];\r\n      eccBlock = ErrorCorrection_1.BLOCKS[index];\r\n\r\n      index = (dataBlock * (neccBlock1 + neccBlock2)) + neccBlock2 - 3 + (this._version <= 9);\r\n\r\n      if (valueLength <= index) {\r\n        break;\r\n      }\r\n    }\r\n\r\n    this._dataBlock = dataBlock;\r\n    this._eccBlock = eccBlock;\r\n    this._neccBlock1 = neccBlock1;\r\n    this._neccBlock2 = neccBlock2;\r\n\r\n    /**\r\n     * The data width is based on version.\r\n     *\r\n     * @public\r\n     * @type {number}\r\n     * @memberof Frame#\r\n     */\r\n    // FIXME: Ensure that it fits instead of being truncated.\r\n    var width = this.width = 17 + (4 * this._version);\r\n\r\n    /**\r\n     * The image buffer.\r\n     *\r\n     * @public\r\n     * @type {number[]}\r\n     * @memberof Frame#\r\n     */\r\n    this.buffer = Frame._createArray(width * width);\r\n\r\n    this._ecc = Frame._createArray(dataBlock + ((dataBlock + eccBlock) * (neccBlock1 + neccBlock2)) + neccBlock2);\r\n    this._mask = Frame._createArray(((width * (width + 1)) + 1) / 2);\r\n\r\n    this._insertFinders();\r\n    this._insertAlignments();\r\n\r\n    // Insert single foreground cell.\r\n    this.buffer[8 + (width * (width - 8))] = 1;\r\n\r\n    this._insertTimingGap();\r\n    this._reverseMask();\r\n    this._insertTimingRowAndColumn();\r\n    this._insertVersion();\r\n    this._syncMask();\r\n    this._convertBitStream(valueLength);\r\n    this._calculatePolynomial();\r\n    this._appendEccToData();\r\n    this._interleaveBlocks();\r\n    this._pack();\r\n    this._finish();\r\n  }, {\r\n\r\n    _addAlignment: function(x, y) {\r\n      var i;\r\n      var buffer = this.buffer;\r\n      var width = this.width;\r\n\r\n      buffer[x + (width * y)] = 1;\r\n\r\n      for (i = -2; i < 2; i++) {\r\n        buffer[x + i + (width * (y - 2))] = 1;\r\n        buffer[x - 2 + (width * (y + i + 1))] = 1;\r\n        buffer[x + 2 + (width * (y + i))] = 1;\r\n        buffer[x + i + 1 + (width * (y + 2))] = 1;\r\n      }\r\n\r\n      for (i = 0; i < 2; i++) {\r\n        this._setMask(x - 1, y + i);\r\n        this._setMask(x + 1, y - i);\r\n        this._setMask(x - i, y - 1);\r\n        this._setMask(x + i, y + 1);\r\n      }\r\n    },\r\n\r\n    _appendData: function(data, dataLength, ecc, eccLength) {\r\n      var bit, i, j;\r\n      var polynomial = this._polynomial;\r\n      var stringBuffer = this._stringBuffer;\r\n\r\n      for (i = 0; i < eccLength; i++) {\r\n        stringBuffer[ecc + i] = 0;\r\n      }\r\n\r\n      for (i = 0; i < dataLength; i++) {\r\n        bit = Galois_1.LOG[stringBuffer[data + i] ^ stringBuffer[ecc]];\r\n\r\n        if (bit !== 255) {\r\n          for (j = 1; j < eccLength; j++) {\r\n            stringBuffer[ecc + j - 1] = stringBuffer[ecc + j] ^\r\n              Galois_1.EXPONENT[Frame._modN(bit + polynomial[eccLength - j])];\r\n          }\r\n        } else {\r\n          for (j = ecc; j < ecc + eccLength; j++) {\r\n            stringBuffer[j] = stringBuffer[j + 1];\r\n          }\r\n        }\r\n\r\n        stringBuffer[ecc + eccLength - 1] = bit === 255 ? 0 : Galois_1.EXPONENT[Frame._modN(bit + polynomial[0])];\r\n      }\r\n    },\r\n\r\n    _appendEccToData: function() {\r\n      var i;\r\n      var data = 0;\r\n      var dataBlock = this._dataBlock;\r\n      var ecc = this._calculateMaxLength();\r\n      var eccBlock = this._eccBlock;\r\n\r\n      for (i = 0; i < this._neccBlock1; i++) {\r\n        this._appendData(data, dataBlock, ecc, eccBlock);\r\n\r\n        data += dataBlock;\r\n        ecc += eccBlock;\r\n      }\r\n\r\n      for (i = 0; i < this._neccBlock2; i++) {\r\n        this._appendData(data, dataBlock + 1, ecc, eccBlock);\r\n\r\n        data += dataBlock + 1;\r\n        ecc += eccBlock;\r\n      }\r\n    },\r\n\r\n    _applyMask: function(mask) {\r\n      var r3x, r3y, x, y;\r\n      var buffer = this.buffer;\r\n      var width = this.width;\r\n\r\n      switch (mask) {\r\n      case 0:\r\n        for (y = 0; y < width; y++) {\r\n          for (x = 0; x < width; x++) {\r\n            if (!((x + y) & 1) && !this._isMasked(x, y)) {\r\n              buffer[x + (y * width)] ^= 1;\r\n            }\r\n          }\r\n        }\r\n\r\n        break;\r\n      case 1:\r\n        for (y = 0; y < width; y++) {\r\n          for (x = 0; x < width; x++) {\r\n            if (!(y & 1) && !this._isMasked(x, y)) {\r\n              buffer[x + (y * width)] ^= 1;\r\n            }\r\n          }\r\n        }\r\n\r\n        break;\r\n      case 2:\r\n        for (y = 0; y < width; y++) {\r\n          for (r3x = 0, x = 0; x < width; x++, r3x++) {\r\n            if (r3x === 3) {\r\n              r3x = 0;\r\n            }\r\n\r\n            if (!r3x && !this._isMasked(x, y)) {\r\n              buffer[x + (y * width)] ^= 1;\r\n            }\r\n          }\r\n        }\r\n\r\n        break;\r\n      case 3:\r\n        for (r3y = 0, y = 0; y < width; y++, r3y++) {\r\n          if (r3y === 3) {\r\n            r3y = 0;\r\n          }\r\n\r\n          for (r3x = r3y, x = 0; x < width; x++, r3x++) {\r\n            if (r3x === 3) {\r\n              r3x = 0;\r\n            }\r\n\r\n            if (!r3x && !this._isMasked(x, y)) {\r\n              buffer[x + (y * width)] ^= 1;\r\n            }\r\n          }\r\n        }\r\n\r\n        break;\r\n      case 4:\r\n        for (y = 0; y < width; y++) {\r\n          for (r3x = 0, r3y = (y >> 1) & 1, x = 0; x < width; x++, r3x++) {\r\n            if (r3x === 3) {\r\n              r3x = 0;\r\n              r3y = !r3y;\r\n            }\r\n\r\n            if (!r3y && !this._isMasked(x, y)) {\r\n              buffer[x + (y * width)] ^= 1;\r\n            }\r\n          }\r\n        }\r\n\r\n        break;\r\n      case 5:\r\n        for (r3y = 0, y = 0; y < width; y++, r3y++) {\r\n          if (r3y === 3) {\r\n            r3y = 0;\r\n          }\r\n\r\n          for (r3x = 0, x = 0; x < width; x++, r3x++) {\r\n            if (r3x === 3) {\r\n              r3x = 0;\r\n            }\r\n\r\n            if (!((x & y & 1) + !(!r3x | !r3y)) && !this._isMasked(x, y)) {\r\n              buffer[x + (y * width)] ^= 1;\r\n            }\r\n          }\r\n        }\r\n\r\n        break;\r\n      case 6:\r\n        for (r3y = 0, y = 0; y < width; y++, r3y++) {\r\n          if (r3y === 3) {\r\n            r3y = 0;\r\n          }\r\n\r\n          for (r3x = 0, x = 0; x < width; x++, r3x++) {\r\n            if (r3x === 3) {\r\n              r3x = 0;\r\n            }\r\n\r\n            if (!((x & y & 1) + (r3x && r3x === r3y) & 1) && !this._isMasked(x, y)) {\r\n              buffer[x + (y * width)] ^= 1;\r\n            }\r\n          }\r\n        }\r\n\r\n        break;\r\n      case 7:\r\n        for (r3y = 0, y = 0; y < width; y++, r3y++) {\r\n          if (r3y === 3) {\r\n            r3y = 0;\r\n          }\r\n\r\n          for (r3x = 0, x = 0; x < width; x++, r3x++) {\r\n            if (r3x === 3) {\r\n              r3x = 0;\r\n            }\r\n\r\n            if (!((r3x && r3x === r3y) + (x + y & 1) & 1) && !this._isMasked(x, y)) {\r\n              buffer[x + (y * width)] ^= 1;\r\n            }\r\n          }\r\n        }\r\n\r\n        break;\r\n      }\r\n    },\r\n\r\n    _calculateMaxLength: function() {\r\n      return (this._dataBlock * (this._neccBlock1 + this._neccBlock2)) + this._neccBlock2;\r\n    },\r\n\r\n    _calculatePolynomial: function() {\r\n      var i, j;\r\n      var eccBlock = this._eccBlock;\r\n      var polynomial = this._polynomial;\r\n\r\n      polynomial[0] = 1;\r\n\r\n      for (i = 0; i < eccBlock; i++) {\r\n        polynomial[i + 1] = 1;\r\n\r\n        for (j = i; j > 0; j--) {\r\n          polynomial[j] = polynomial[j] ? polynomial[j - 1] ^\r\n            Galois_1.EXPONENT[Frame._modN(Galois_1.LOG[polynomial[j]] + i)] : polynomial[j - 1];\r\n        }\r\n\r\n        polynomial[0] = Galois_1.EXPONENT[Frame._modN(Galois_1.LOG[polynomial[0]] + i)];\r\n      }\r\n\r\n      // Use logs for generator polynomial to save calculation step.\r\n      for (i = 0; i <= eccBlock; i++) {\r\n        polynomial[i] = Galois_1.LOG[polynomial[i]];\r\n      }\r\n    },\r\n\r\n    _checkBadness: function() {\r\n      var b, b1, h, x, y;\r\n      var bad = 0;\r\n      var badness = this._badness;\r\n      var buffer = this.buffer;\r\n      var width = this.width;\r\n\r\n      // Blocks of same colour.\r\n      for (y = 0; y < width - 1; y++) {\r\n        for (x = 0; x < width - 1; x++) {\r\n          // All foreground colour.\r\n          if ((buffer[x + (width * y)] &&\r\n            buffer[x + 1 + (width * y)] &&\r\n            buffer[x + (width * (y + 1))] &&\r\n            buffer[x + 1 + (width * (y + 1))]) ||\r\n            // All background colour.\r\n            !(buffer[x + (width * y)] ||\r\n            buffer[x + 1 + (width * y)] ||\r\n            buffer[x + (width * (y + 1))] ||\r\n            buffer[x + 1 + (width * (y + 1))])) {\r\n            bad += Frame.N2;\r\n          }\r\n        }\r\n      }\r\n\r\n      var bw = 0;\r\n\r\n      // X runs.\r\n      for (y = 0; y < width; y++) {\r\n        h = 0;\r\n\r\n        badness[0] = 0;\r\n\r\n        for (b = 0, x = 0; x < width; x++) {\r\n          b1 = buffer[x + (width * y)];\r\n\r\n          if (b === b1) {\r\n            badness[h]++;\r\n          } else {\r\n            badness[++h] = 1;\r\n          }\r\n\r\n          b = b1;\r\n          bw += b ? 1 : -1;\r\n        }\r\n\r\n        bad += this._getBadness(h);\r\n      }\r\n\r\n      if (bw < 0) {\r\n        bw = -bw;\r\n      }\r\n\r\n      var count = 0;\r\n      var big = bw;\r\n      big += big << 2;\r\n      big <<= 1;\r\n\r\n      while (big > width * width) {\r\n        big -= width * width;\r\n        count++;\r\n      }\r\n\r\n      bad += count * Frame.N4;\r\n\r\n      // Y runs.\r\n      for (x = 0; x < width; x++) {\r\n        h = 0;\r\n\r\n        badness[0] = 0;\r\n\r\n        for (b = 0, y = 0; y < width; y++) {\r\n          b1 = buffer[x + (width * y)];\r\n\r\n          if (b === b1) {\r\n            badness[h]++;\r\n          } else {\r\n            badness[++h] = 1;\r\n          }\r\n\r\n          b = b1;\r\n        }\r\n\r\n        bad += this._getBadness(h);\r\n      }\r\n\r\n      return bad;\r\n    },\r\n\r\n    _convertBitStream: function(length) {\r\n      var bit, i;\r\n      var ecc = this._ecc;\r\n      var version = this._version;\r\n\r\n      // Convert string to bit stream. 8-bit data to QR-coded 8-bit data (numeric, alphanumeric, or kanji not supported).\r\n      for (i = 0; i < length; i++) {\r\n        ecc[i] = this._value.charCodeAt(i);\r\n      }\r\n\r\n      var stringBuffer = this._stringBuffer = ecc.slice();\r\n      var maxLength = this._calculateMaxLength();\r\n\r\n      if (length >= maxLength - 2) {\r\n        length = maxLength - 2;\r\n\r\n        if (version > 9) {\r\n          length--;\r\n        }\r\n      }\r\n\r\n      // Shift and re-pack to insert length prefix.\r\n      var index = length;\r\n\r\n      if (version > 9) {\r\n        stringBuffer[index + 2] = 0;\r\n        stringBuffer[index + 3] = 0;\r\n\r\n        while (index--) {\r\n          bit = stringBuffer[index];\r\n\r\n          stringBuffer[index + 3] |= 255 & (bit << 4);\r\n          stringBuffer[index + 2] = bit >> 4;\r\n        }\r\n\r\n        stringBuffer[2] |= 255 & (length << 4);\r\n        stringBuffer[1] = length >> 4;\r\n        stringBuffer[0] = 0x40 | (length >> 12);\r\n      } else {\r\n        stringBuffer[index + 1] = 0;\r\n        stringBuffer[index + 2] = 0;\r\n\r\n        while (index--) {\r\n          bit = stringBuffer[index];\r\n\r\n          stringBuffer[index + 2] |= 255 & (bit << 4);\r\n          stringBuffer[index + 1] = bit >> 4;\r\n        }\r\n\r\n        stringBuffer[1] |= 255 & (length << 4);\r\n        stringBuffer[0] = 0x40 | (length >> 4);\r\n      }\r\n\r\n      // Fill to end with pad pattern.\r\n      index = length + 3 - (version < 10);\r\n\r\n      while (index < maxLength) {\r\n        stringBuffer[index++] = 0xec;\r\n        stringBuffer[index++] = 0x11;\r\n      }\r\n    },\r\n\r\n    _getBadness: function(length) {\r\n      var i;\r\n      var badRuns = 0;\r\n      var badness = this._badness;\r\n\r\n      for (i = 0; i <= length; i++) {\r\n        if (badness[i] >= 5) {\r\n          badRuns += Frame.N1 + badness[i] - 5;\r\n        }\r\n      }\r\n\r\n      // FBFFFBF as in finder.\r\n      for (i = 3; i < length - 1; i += 2) {\r\n        if (badness[i - 2] === badness[i + 2] &&\r\n          badness[i + 2] === badness[i - 1] &&\r\n          badness[i - 1] === badness[i + 1] &&\r\n          badness[i - 1] * 3 === badness[i] &&\r\n          // Background around the foreground pattern? Not part of the specs.\r\n          (badness[i - 3] === 0 || i + 3 > length ||\r\n          badness[i - 3] * 3 >= badness[i] * 4 ||\r\n          badness[i + 3] * 3 >= badness[i] * 4)) {\r\n          badRuns += Frame.N3;\r\n        }\r\n      }\r\n\r\n      return badRuns;\r\n    },\r\n\r\n    _finish: function() {\r\n      // Save pre-mask copy of frame.\r\n      this._stringBuffer = this.buffer.slice();\r\n\r\n      var currentMask, i;\r\n      var bit = 0;\r\n      var mask = 30000;\r\n\r\n      /*\r\n       * Using for instead of while since in original Arduino code if an early mask was \"good enough\" it wouldn't try for\r\n       * a better one since they get more complex and take longer.\r\n       */\r\n      for (i = 0; i < 8; i++) {\r\n        // Returns foreground-background imbalance.\r\n        this._applyMask(i);\r\n\r\n        currentMask = this._checkBadness();\r\n\r\n        // Is current mask better than previous best?\r\n        if (currentMask < mask) {\r\n          mask = currentMask;\r\n          bit = i;\r\n        }\r\n\r\n        // Don't increment \"i\" to a void redoing mask.\r\n        if (bit === 7) {\r\n          break;\r\n        }\r\n\r\n        // Reset for next pass.\r\n        this.buffer = this._stringBuffer.slice();\r\n      }\r\n\r\n      // Redo best mask as none were \"good enough\" (i.e. last wasn't bit).\r\n      if (bit !== i) {\r\n        this._applyMask(bit);\r\n      }\r\n\r\n      // Add in final mask/ECC level bytes.\r\n      mask = ErrorCorrection_1.FINAL_FORMAT[bit + (this._level - 1 << 3)];\r\n\r\n      var buffer = this.buffer;\r\n      var width = this.width;\r\n\r\n      // Low byte.\r\n      for (i = 0; i < 8; i++, mask >>= 1) {\r\n        if (mask & 1) {\r\n          buffer[width - 1 - i + (width * 8)] = 1;\r\n\r\n          if (i < 6) {\r\n            buffer[8 + (width * i)] = 1;\r\n          } else {\r\n            buffer[8 + (width * (i + 1))] = 1;\r\n          }\r\n        }\r\n      }\r\n\r\n      // High byte.\r\n      for (i = 0; i < 7; i++, mask >>= 1) {\r\n        if (mask & 1) {\r\n          buffer[8 + (width * (width - 7 + i))] = 1;\r\n\r\n          if (i) {\r\n            buffer[6 - i + (width * 8)] = 1;\r\n          } else {\r\n            buffer[7 + (width * 8)] = 1;\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    _interleaveBlocks: function() {\r\n      var i, j;\r\n      var dataBlock = this._dataBlock;\r\n      var ecc = this._ecc;\r\n      var eccBlock = this._eccBlock;\r\n      var k = 0;\r\n      var maxLength = this._calculateMaxLength();\r\n      var neccBlock1 = this._neccBlock1;\r\n      var neccBlock2 = this._neccBlock2;\r\n      var stringBuffer = this._stringBuffer;\r\n\r\n      for (i = 0; i < dataBlock; i++) {\r\n        for (j = 0; j < neccBlock1; j++) {\r\n          ecc[k++] = stringBuffer[i + (j * dataBlock)];\r\n        }\r\n\r\n        for (j = 0; j < neccBlock2; j++) {\r\n          ecc[k++] = stringBuffer[(neccBlock1 * dataBlock) + i + (j * (dataBlock + 1))];\r\n        }\r\n      }\r\n\r\n      for (j = 0; j < neccBlock2; j++) {\r\n        ecc[k++] = stringBuffer[(neccBlock1 * dataBlock) + i + (j * (dataBlock + 1))];\r\n      }\r\n\r\n      for (i = 0; i < eccBlock; i++) {\r\n        for (j = 0; j < neccBlock1 + neccBlock2; j++) {\r\n          ecc[k++] = stringBuffer[maxLength + i + (j * eccBlock)];\r\n        }\r\n      }\r\n\r\n      this._stringBuffer = ecc;\r\n    },\r\n\r\n    _insertAlignments: function() {\r\n      var i, x, y;\r\n      var version = this._version;\r\n      var width = this.width;\r\n\r\n      if (version > 1) {\r\n        i = Alignment_1.BLOCK[version];\r\n        y = width - 7;\r\n\r\n        for (;;) {\r\n          x = width - 7;\r\n\r\n          while (x > i - 3) {\r\n            this._addAlignment(x, y);\r\n\r\n            if (x < i) {\r\n              break;\r\n            }\r\n\r\n            x -= i;\r\n          }\r\n\r\n          if (y <= i + 9) {\r\n            break;\r\n          }\r\n\r\n          y -= i;\r\n\r\n          this._addAlignment(6, y);\r\n          this._addAlignment(y, 6);\r\n        }\r\n      }\r\n    },\r\n\r\n    _insertFinders: function() {\r\n      var i, j, x, y;\r\n      var buffer = this.buffer;\r\n      var width = this.width;\r\n\r\n      for (i = 0; i < 3; i++) {\r\n        j = 0;\r\n        y = 0;\r\n\r\n        if (i === 1) {\r\n          j = width - 7;\r\n        }\r\n        if (i === 2) {\r\n          y = width - 7;\r\n        }\r\n\r\n        buffer[y + 3 + (width * (j + 3))] = 1;\r\n\r\n        for (x = 0; x < 6; x++) {\r\n          buffer[y + x + (width * j)] = 1;\r\n          buffer[y + (width * (j + x + 1))] = 1;\r\n          buffer[y + 6 + (width * (j + x))] = 1;\r\n          buffer[y + x + 1 + (width * (j + 6))] = 1;\r\n        }\r\n\r\n        for (x = 1; x < 5; x++) {\r\n          this._setMask(y + x, j + 1);\r\n          this._setMask(y + 1, j + x + 1);\r\n          this._setMask(y + 5, j + x);\r\n          this._setMask(y + x + 1, j + 5);\r\n        }\r\n\r\n        for (x = 2; x < 4; x++) {\r\n          buffer[y + x + (width * (j + 2))] = 1;\r\n          buffer[y + 2 + (width * (j + x + 1))] = 1;\r\n          buffer[y + 4 + (width * (j + x))] = 1;\r\n          buffer[y + x + 1 + (width * (j + 4))] = 1;\r\n        }\r\n      }\r\n    },\r\n\r\n    _insertTimingGap: function() {\r\n      var x, y;\r\n      var width = this.width;\r\n\r\n      for (y = 0; y < 7; y++) {\r\n        this._setMask(7, y);\r\n        this._setMask(width - 8, y);\r\n        this._setMask(7, y + width - 7);\r\n      }\r\n\r\n      for (x = 0; x < 8; x++) {\r\n        this._setMask(x, 7);\r\n        this._setMask(x + width - 8, 7);\r\n        this._setMask(x, width - 8);\r\n      }\r\n    },\r\n\r\n    _insertTimingRowAndColumn: function() {\r\n      var x;\r\n      var buffer = this.buffer;\r\n      var width = this.width;\r\n\r\n      for (x = 0; x < width - 14; x++) {\r\n        if (x & 1) {\r\n          this._setMask(8 + x, 6);\r\n          this._setMask(6, 8 + x);\r\n        } else {\r\n          buffer[8 + x + (width * 6)] = 1;\r\n          buffer[6 + (width * (8 + x))] = 1;\r\n        }\r\n      }\r\n    },\r\n\r\n    _insertVersion: function() {\r\n      var i, j, x, y;\r\n      var buffer = this.buffer;\r\n      var version = this._version;\r\n      var width = this.width;\r\n\r\n      if (version > 6) {\r\n        i = Version_1.BLOCK[version - 7];\r\n        j = 17;\r\n\r\n        for (x = 0; x < 6; x++) {\r\n          for (y = 0; y < 3; y++, j--) {\r\n            if (1 & (j > 11 ? version >> j - 12 : i >> j)) {\r\n              buffer[5 - x + (width * (2 - y + width - 11))] = 1;\r\n              buffer[2 - y + width - 11 + (width * (5 - x))] = 1;\r\n            } else {\r\n              this._setMask(5 - x, 2 - y + width - 11);\r\n              this._setMask(2 - y + width - 11, 5 - x);\r\n            }\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    _isMasked: function(x, y) {\r\n      var bit = Frame._getMaskBit(x, y);\r\n\r\n      return this._mask[bit] === 1;\r\n    },\r\n\r\n    _pack: function() {\r\n      var bit, i, j;\r\n      var k = 1;\r\n      var v = 1;\r\n      var width = this.width;\r\n      var x = width - 1;\r\n      var y = width - 1;\r\n\r\n      // Interleaved data and ECC codes.\r\n      var length = ((this._dataBlock + this._eccBlock) * (this._neccBlock1 + this._neccBlock2)) + this._neccBlock2;\r\n\r\n      for (i = 0; i < length; i++) {\r\n        bit = this._stringBuffer[i];\r\n\r\n        for (j = 0; j < 8; j++, bit <<= 1) {\r\n          if (0x80 & bit) {\r\n            this.buffer[x + (width * y)] = 1;\r\n          }\r\n\r\n          // Find next fill position.\r\n          do {\r\n            if (v) {\r\n              x--;\r\n            } else {\r\n              x++;\r\n\r\n              if (k) {\r\n                if (y !== 0) {\r\n                  y--;\r\n                } else {\r\n                  x -= 2;\r\n                  k = !k;\r\n\r\n                  if (x === 6) {\r\n                    x--;\r\n                    y = 9;\r\n                  }\r\n                }\r\n              } else if (y !== width - 1) {\r\n                y++;\r\n              } else {\r\n                x -= 2;\r\n                k = !k;\r\n\r\n                if (x === 6) {\r\n                  x--;\r\n                  y -= 8;\r\n                }\r\n              }\r\n            }\r\n\r\n            v = !v;\r\n          } while (this._isMasked(x, y));\r\n        }\r\n      }\r\n    },\r\n\r\n    _reverseMask: function() {\r\n      var x, y;\r\n      var width = this.width;\r\n\r\n      for (x = 0; x < 9; x++) {\r\n        this._setMask(x, 8);\r\n      }\r\n\r\n      for (x = 0; x < 8; x++) {\r\n        this._setMask(x + width - 8, 8);\r\n        this._setMask(8, x);\r\n      }\r\n\r\n      for (y = 0; y < 7; y++) {\r\n        this._setMask(8, y + width - 7);\r\n      }\r\n    },\r\n\r\n    _setMask: function(x, y) {\r\n      var bit = Frame._getMaskBit(x, y);\r\n\r\n      this._mask[bit] = 1;\r\n    },\r\n\r\n    _syncMask: function() {\r\n      var x, y;\r\n      var width = this.width;\r\n\r\n      for (y = 0; y < width; y++) {\r\n        for (x = 0; x <= y; x++) {\r\n          if (this.buffer[x + (width * y)]) {\r\n            this._setMask(x, y);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n  }, {\r\n\r\n    _createArray: function(length) {\r\n      var i;\r\n      var array = [];\r\n\r\n      for (i = 0; i < length; i++) {\r\n        array[i] = 0;\r\n      }\r\n\r\n      return array;\r\n    },\r\n\r\n    _getMaskBit: function(x, y) {\r\n      var bit;\r\n\r\n      if (x > y) {\r\n        bit = x;\r\n        x = y;\r\n        y = bit;\r\n      }\r\n\r\n      bit = y;\r\n      bit += y * y;\r\n      bit >>= 1;\r\n      bit += x;\r\n\r\n      return bit;\r\n    },\r\n\r\n    _modN: function(x) {\r\n      while (x >= 255) {\r\n        x -= 255;\r\n        x = (x >> 8) + (x & 255);\r\n      }\r\n\r\n      return x;\r\n    },\r\n\r\n    // *Badness* coefficients.\r\n    N1: 3,\r\n    N2: 3,\r\n    N3: 40,\r\n    N4: 10\r\n\r\n  });\r\n\r\n  var Frame_1 = Frame;\r\n\r\n  /**\r\n   * The options used by {@link Frame}.\r\n   *\r\n   * @typedef {Object} Frame~Options\r\n   * @property {string} level - The ECC level to be used.\r\n   * @property {string} value - The value to be encoded.\r\n   */\r\n\r\n  /**\r\n   * An implementation of {@link Renderer} for working with <code>img</code> elements.\r\n   *\r\n   * This depends on {@link CanvasRenderer} being executed first as this implementation simply applies the data URL from\r\n   * the rendered <code>canvas</code> element as the <code>src</code> for the <code>img</code> element being rendered.\r\n   *\r\n   * @public\r\n   * @class\r\n   * @extends Renderer\r\n   */\r\n  var ImageRenderer = Renderer_1.extend({\r\n\r\n    /**\r\n     * @override\r\n     */\r\n    draw: function() {\r\n      this.element.src = this.qrious.toDataURL();\r\n    },\r\n\r\n    /**\r\n     * @override\r\n     */\r\n    reset: function() {\r\n      this.element.src = '';\r\n    },\r\n\r\n    /**\r\n     * @override\r\n     */\r\n    resize: function() {\r\n      var element = this.element;\r\n\r\n      element.width = element.height = this.qrious.size;\r\n    }\r\n\r\n  });\r\n\r\n  var ImageRenderer_1 = ImageRenderer;\r\n\r\n  /**\r\n   * Defines an available option while also configuring how values are applied to the target object.\r\n   *\r\n   * Optionally, a default value can be specified as well a value transformer for greater control over how the option\r\n   * value is applied.\r\n   *\r\n   * If no value transformer is specified, then any specified option will be applied directly. All values are maintained\r\n   * on the target object itself as a field using the option name prefixed with a single underscore.\r\n   *\r\n   * When an option is specified as modifiable, the {@link OptionManager} will be required to include a setter for the\r\n   * property that is defined on the target object that uses the option name.\r\n   *\r\n   * @param {string} name - the name to be used\r\n   * @param {boolean} [modifiable] - <code>true</code> if the property defined on target objects should include a setter;\r\n   * otherwise <code>false</code>\r\n   * @param {*} [defaultValue] - the default value to be used\r\n   * @param {Option~ValueTransformer} [valueTransformer] - the value transformer to be used\r\n   * @public\r\n   * @class\r\n   * @extends Nevis\r\n   */\r\n  var Option = lite.extend(function(name, modifiable, defaultValue, valueTransformer) {\r\n    /**\r\n     * The name for this {@link Option}.\r\n     *\r\n     * @public\r\n     * @type {string}\r\n     * @memberof Option#\r\n     */\r\n    this.name = name;\r\n\r\n    /**\r\n     * Whether a setter should be included on the property defined on target objects for this {@link Option}.\r\n     *\r\n     * @public\r\n     * @type {boolean}\r\n     * @memberof Option#\r\n     */\r\n    this.modifiable = Boolean(modifiable);\r\n\r\n    /**\r\n     * The default value for this {@link Option}.\r\n     *\r\n     * @public\r\n     * @type {*}\r\n     * @memberof Option#\r\n     */\r\n    this.defaultValue = defaultValue;\r\n\r\n    this._valueTransformer = valueTransformer;\r\n  }, {\r\n\r\n    /**\r\n     * Transforms the specified <code>value</code> so that it can be applied for this {@link Option}.\r\n     *\r\n     * If a value transformer has been specified for this {@link Option}, it will be called upon to transform\r\n     * <code>value</code>. Otherwise, <code>value</code> will be returned directly.\r\n     *\r\n     * @param {*} value - the value to be transformed\r\n     * @return {*} The transformed value or <code>value</code> if no value transformer is specified.\r\n     * @public\r\n     * @memberof Option#\r\n     */\r\n    transform: function(value) {\r\n      var transformer = this._valueTransformer;\r\n      if (typeof transformer === 'function') {\r\n        return transformer(value, this);\r\n      }\r\n\r\n      return value;\r\n    }\r\n\r\n  });\r\n\r\n  var Option_1 = Option;\r\n\r\n  /**\r\n   * Returns a transformed value for the specified <code>value</code> to be applied for the <code>option</code> provided.\r\n   *\r\n   * @callback Option~ValueTransformer\r\n   * @param {*} value - the value to be transformed\r\n   * @param {Option} option - the {@link Option} for which <code>value</code> is being transformed\r\n   * @return {*} The transform value.\r\n   */\r\n\r\n  /**\r\n   * Contains utility methods that are useful throughout the library.\r\n   *\r\n   * @public\r\n   * @class\r\n   * @extends Nevis\r\n   */\r\n  var Utilities = lite.extend(null, {\r\n\r\n    /**\r\n     * Returns the absolute value of a given number.\r\n     *\r\n     * This method is simply a convenient shorthand for <code>Math.abs</code> while ensuring that nulls are returned as\r\n     * <code>null</code> instead of zero.\r\n     *\r\n     * @param {number} value - the number whose absolute value is to be returned\r\n     * @return {number} The absolute value of <code>value</code> or <code>null</code> if <code>value</code> is\r\n     * <code>null</code>.\r\n     * @public\r\n     * @static\r\n     * @memberof Utilities\r\n     */\r\n    abs: function(value) {\r\n      return value != null ? Math.abs(value) : null;\r\n    },\r\n\r\n    /**\r\n     * Returns whether the specified <code>object</code> has a property with the specified <code>name</code> as an own\r\n     * (not inherited) property.\r\n     *\r\n     * @param {Object} object - the object on which the property is to be checked\r\n     * @param {string} name - the name of the property to be checked\r\n     * @return {boolean} <code>true</code> if <code>object</code> has an own property with <code>name</code>.\r\n     * @public\r\n     * @static\r\n     * @memberof Utilities\r\n     */\r\n    hasOwn: function(object, name) {\r\n      return Object.prototype.hasOwnProperty.call(object, name);\r\n    },\r\n\r\n    /**\r\n     * A non-operation method that does absolutely nothing.\r\n     *\r\n     * @return {void}\r\n     * @public\r\n     * @static\r\n     * @memberof Utilities\r\n     */\r\n    noop: function() {},\r\n\r\n    /**\r\n     * Transforms the specified <code>string</code> to upper case while remaining null-safe.\r\n     *\r\n     * @param {string} string - the string to be transformed to upper case\r\n     * @return {string} <code>string</code> transformed to upper case if <code>string</code> is not <code>null</code>.\r\n     * @public\r\n     * @static\r\n     * @memberof Utilities\r\n     */\r\n    toUpperCase: function(string) {\r\n      return string != null ? string.toUpperCase() : null;\r\n    }\r\n\r\n  });\r\n\r\n  var Utilities_1 = Utilities;\r\n\r\n  /**\r\n   * Manages multiple {@link Option} instances that are intended to be used by multiple implementations.\r\n   *\r\n   * Although the option definitions are shared between targets, the values are maintained on the targets themselves.\r\n   *\r\n   * @param {Option[]} options - the options to be used\r\n   * @public\r\n   * @class\r\n   * @extends Nevis\r\n   */\r\n  var OptionManager = lite.extend(function(options) {\r\n    /**\r\n     * The available options for this {@link OptionManager}.\r\n     *\r\n     * @public\r\n     * @type {Object.<string, Option>}\r\n     * @memberof OptionManager#\r\n     */\r\n    this.options = {};\r\n\r\n    options.forEach(function(option) {\r\n      this.options[option.name] = option;\r\n    }, this);\r\n  }, {\r\n\r\n    /**\r\n     * Returns whether an option with the specified <code>name</code> is available.\r\n     *\r\n     * @param {string} name - the name of the {@link Option} whose existence is to be checked\r\n     * @return {boolean} <code>true</code> if an {@link Option} exists with <code>name</code>; otherwise\r\n     * <code>false</code>.\r\n     * @public\r\n     * @memberof OptionManager#\r\n     */\r\n    exists: function(name) {\r\n      return this.options[name] != null;\r\n    },\r\n\r\n    /**\r\n     * Returns the value of the option with the specified <code>name</code> on the <code>target</code> object provided.\r\n     *\r\n     * @param {string} name - the name of the {@link Option} whose value on <code>target</code> is to be returned\r\n     * @param {Object} target - the object from which the value of the named {@link Option} is to be returned\r\n     * @return {*} The value of the {@link Option} with <code>name</code> on <code>target</code>.\r\n     * @public\r\n     * @memberof OptionManager#\r\n     */\r\n    get: function(name, target) {\r\n      return OptionManager._get(this.options[name], target);\r\n    },\r\n\r\n    /**\r\n     * Returns a copy of all of the available options on the <code>target</code> object provided.\r\n     *\r\n     * @param {Object} target - the object from which the option name/value pairs are to be returned\r\n     * @return {Object.<string, *>} A hash containing the name/value pairs of all options on <code>target</code>.\r\n     * @public\r\n     * @memberof OptionManager#\r\n     */\r\n    getAll: function(target) {\r\n      var name;\r\n      var options = this.options;\r\n      var result = {};\r\n\r\n      for (name in options) {\r\n        if (Utilities_1.hasOwn(options, name)) {\r\n          result[name] = OptionManager._get(options[name], target);\r\n        }\r\n      }\r\n\r\n      return result;\r\n    },\r\n\r\n    /**\r\n     * Initializes the available options for the <code>target</code> object provided and then applies the initial values\r\n     * within the speciifed <code>options</code>.\r\n     *\r\n     * This method will throw an error if any of the names within <code>options</code> does not match an available option.\r\n     *\r\n     * This involves setting the default values and defining properties for all of the available options on\r\n     * <code>target</code> before finally calling {@link OptionMananger#setAll} with <code>options</code> and\r\n     * <code>target</code>. Any options that are configured to be modifiable will have a setter included in their defined\r\n     * property that will allow its corresponding value to be modified.\r\n     *\r\n     * If a change handler is specified, it will be called whenever the value changes on <code>target</code> for a\r\n     * modifiable option, but only when done so via the defined property's setter.\r\n     *\r\n     * @param {Object.<string, *>} options - the name/value pairs of the initial options to be set\r\n     * @param {Object} target - the object on which the options are to be initialized\r\n     * @param {Function} [changeHandler] - the function to be called whenever the value of an modifiable option changes on\r\n     * <code>target</code>\r\n     * @return {void}\r\n     * @throws {Error} If <code>options</code> contains an invalid option name.\r\n     * @public\r\n     * @memberof OptionManager#\r\n     */\r\n    init: function(options, target, changeHandler) {\r\n      if (typeof changeHandler !== 'function') {\r\n        changeHandler = Utilities_1.noop;\r\n      }\r\n\r\n      var name, option;\r\n\r\n      for (name in this.options) {\r\n        if (Utilities_1.hasOwn(this.options, name)) {\r\n          option = this.options[name];\r\n\r\n          OptionManager._set(option, option.defaultValue, target);\r\n          OptionManager._createAccessor(option, target, changeHandler);\r\n        }\r\n      }\r\n\r\n      this._setAll(options, target, true);\r\n    },\r\n\r\n    /**\r\n     * Sets the value of the option with the specified <code>name</code> on the <code>target</code> object provided to\r\n     * <code>value</code>.\r\n     *\r\n     * This method will throw an error if <code>name</code> does not match an available option or matches an option that\r\n     * cannot be modified.\r\n     *\r\n     * If <code>value</code> is <code>null</code> and the {@link Option} has a default value configured, then that default\r\n     * value will be used instead. If the {@link Option} also has a value transformer configured, it will be used to\r\n     * transform whichever value was determined to be used.\r\n     *\r\n     * This method returns whether the value of the underlying field on <code>target</code> was changed as a result.\r\n     *\r\n     * @param {string} name - the name of the {@link Option} whose value is to be set\r\n     * @param {*} value - the value to be set for the named {@link Option} on <code>target</code>\r\n     * @param {Object} target - the object on which <code>value</code> is to be set for the named {@link Option}\r\n     * @return {boolean} <code>true</code> if the underlying field on <code>target</code> was changed; otherwise\r\n     * <code>false</code>.\r\n     * @throws {Error} If <code>name</code> is invalid or is for an option that cannot be modified.\r\n     * @public\r\n     * @memberof OptionManager#\r\n     */\r\n    set: function(name, value, target) {\r\n      return this._set(name, value, target);\r\n    },\r\n\r\n    /**\r\n     * Sets all of the specified <code>options</code> on the <code>target</code> object provided to their corresponding\r\n     * values.\r\n     *\r\n     * This method will throw an error if any of the names within <code>options</code> does not match an available option\r\n     * or matches an option that cannot be modified.\r\n     *\r\n     * If any value within <code>options</code> is <code>null</code> and the corresponding {@link Option} has a default\r\n     * value configured, then that default value will be used instead. If an {@link Option} also has a value transformer\r\n     * configured, it will be used to transform whichever value was determined to be used.\r\n     *\r\n     * This method returns whether the value for any of the underlying fields on <code>target</code> were changed as a\r\n     * result.\r\n     *\r\n     * @param {Object.<string, *>} options - the name/value pairs of options to be set\r\n     * @param {Object} target - the object on which the options are to be set\r\n     * @return {boolean} <code>true</code> if any of the underlying fields on <code>target</code> were changed; otherwise\r\n     * <code>false</code>.\r\n     * @throws {Error} If <code>options</code> contains an invalid option name or an option that cannot be modiifed.\r\n     * @public\r\n     * @memberof OptionManager#\r\n     */\r\n    setAll: function(options, target) {\r\n      return this._setAll(options, target);\r\n    },\r\n\r\n    _set: function(name, value, target, allowUnmodifiable) {\r\n      var option = this.options[name];\r\n      if (!option) {\r\n        throw new Error('Invalid option: ' + name);\r\n      }\r\n      if (!option.modifiable && !allowUnmodifiable) {\r\n        throw new Error('Option cannot be modified: ' + name);\r\n      }\r\n\r\n      return OptionManager._set(option, value, target);\r\n    },\r\n\r\n    _setAll: function(options, target, allowUnmodifiable) {\r\n      if (!options) {\r\n        return false;\r\n      }\r\n\r\n      var name;\r\n      var changed = false;\r\n\r\n      for (name in options) {\r\n        if (Utilities_1.hasOwn(options, name) && this._set(name, options[name], target, allowUnmodifiable)) {\r\n          changed = true;\r\n        }\r\n      }\r\n\r\n      return changed;\r\n    }\r\n\r\n  }, {\r\n\r\n    _createAccessor: function(option, target, changeHandler) {\r\n      var descriptor = {\r\n        get: function() {\r\n          return OptionManager._get(option, target);\r\n        }\r\n      };\r\n\r\n      if (option.modifiable) {\r\n        descriptor.set = function(value) {\r\n          if (OptionManager._set(option, value, target)) {\r\n            changeHandler(value, option);\r\n          }\r\n        };\r\n      }\r\n\r\n      Object.defineProperty(target, option.name, descriptor);\r\n    },\r\n\r\n    _get: function(option, target) {\r\n      return target['_' + option.name];\r\n    },\r\n\r\n    _set: function(option, value, target) {\r\n      var fieldName = '_' + option.name;\r\n      var oldValue = target[fieldName];\r\n      var newValue = option.transform(value != null ? value : option.defaultValue);\r\n\r\n      target[fieldName] = newValue;\r\n\r\n      return newValue !== oldValue;\r\n    }\r\n\r\n  });\r\n\r\n  var OptionManager_1 = OptionManager;\r\n\r\n  /**\r\n   * Called whenever the value of a modifiable {@link Option} is changed on a target object via the defined property's\r\n   * setter.\r\n   *\r\n   * @callback OptionManager~ChangeHandler\r\n   * @param {*} value - the new value for <code>option</code> on the target object\r\n   * @param {Option} option - the modifable {@link Option} whose value has changed on the target object.\r\n   * @return {void}\r\n   */\r\n\r\n  /**\r\n   * A basic manager for {@link Service} implementations that are mapped to simple names.\r\n   *\r\n   * @public\r\n   * @class\r\n   * @extends Nevis\r\n   */\r\n  var ServiceManager = lite.extend(function() {\r\n    this._services = {};\r\n  }, {\r\n\r\n    /**\r\n     * Returns the {@link Service} being managed with the specified <code>name</code>.\r\n     *\r\n     * @param {string} name - the name of the {@link Service} to be returned\r\n     * @return {Service} The {@link Service} is being managed with <code>name</code>.\r\n     * @throws {Error} If no {@link Service} is being managed with <code>name</code>.\r\n     * @public\r\n     * @memberof ServiceManager#\r\n     */\r\n    getService: function(name) {\r\n      var service = this._services[name];\r\n      if (!service) {\r\n        throw new Error('Service is not being managed with name: ' + name);\r\n      }\r\n\r\n      return service;\r\n    },\r\n\r\n    /**\r\n     * Sets the {@link Service} implementation to be managed for the specified <code>name</code> to the\r\n     * <code>service</code> provided.\r\n     *\r\n     * @param {string} name - the name of the {@link Service} to be managed with <code>name</code>\r\n     * @param {Service} service - the {@link Service} implementation to be managed\r\n     * @return {void}\r\n     * @throws {Error} If a {@link Service} is already being managed with the same <code>name</code>.\r\n     * @public\r\n     * @memberof ServiceManager#\r\n     */\r\n    setService: function(name, service) {\r\n      if (this._services[name]) {\r\n        throw new Error('Service is already managed with name: ' + name);\r\n      }\r\n\r\n      if (service) {\r\n        this._services[name] = service;\r\n      }\r\n    }\r\n\r\n  });\r\n\r\n  var ServiceManager_1 = ServiceManager;\r\n\r\n  var optionManager = new OptionManager_1([\r\n    new Option_1('background', true, 'white'),\r\n    new Option_1('backgroundAlpha', true, 1, Utilities_1.abs),\r\n    new Option_1('element'),\r\n    new Option_1('foreground', true, 'black'),\r\n    new Option_1('foregroundAlpha', true, 1, Utilities_1.abs),\r\n    new Option_1('level', true, 'L', Utilities_1.toUpperCase),\r\n    new Option_1('mime', true, 'image/png'),\r\n    new Option_1('padding', true, null, Utilities_1.abs),\r\n    new Option_1('size', true, 100, Utilities_1.abs),\r\n    new Option_1('value', true, '')\r\n  ]);\r\n  var serviceManager = new ServiceManager_1();\r\n\r\n  /**\r\n   * Enables configuration of a QR code generator which uses HTML5 <code>canvas</code> for rendering.\r\n   *\r\n   * @param {QRious~Options} [options] - the options to be used\r\n   * @throws {Error} If any <code>options</code> are invalid.\r\n   * @public\r\n   * @class\r\n   * @extends Nevis\r\n   */\r\n  var QRious = lite.extend(function(options) {\r\n    optionManager.init(options, this, this.update.bind(this));\r\n\r\n    var element = optionManager.get('element', this);\r\n    var elementService = serviceManager.getService('element');\r\n    var canvas = element && elementService.isCanvas(element) ? element : elementService.createCanvas();\r\n    var image = element && elementService.isImage(element) ? element : elementService.createImage();\r\n\r\n    this._canvasRenderer = new CanvasRenderer_1(this, canvas, true);\r\n    this._imageRenderer = new ImageRenderer_1(this, image, image === element);\r\n\r\n    this.update();\r\n  }, {\r\n\r\n    /**\r\n     * Returns all of the options configured for this {@link QRious}.\r\n     *\r\n     * Any changes made to the returned object will not be reflected in the options themselves or their corresponding\r\n     * underlying fields.\r\n     *\r\n     * @return {Object.<string, *>} A copy of the applied options.\r\n     * @public\r\n     * @memberof QRious#\r\n     */\r\n    get: function() {\r\n      return optionManager.getAll(this);\r\n    },\r\n\r\n    /**\r\n     * Sets all of the specified <code>options</code> and automatically updates this {@link QRious} if any of the\r\n     * underlying fields are changed as a result.\r\n     *\r\n     * This is the preferred method for updating multiple options at one time to avoid unnecessary updates between\r\n     * changes.\r\n     *\r\n     * @param {QRious~Options} options - the options to be set\r\n     * @return {void}\r\n     * @throws {Error} If any <code>options</code> are invalid or cannot be modified.\r\n     * @public\r\n     * @memberof QRious#\r\n     */\r\n    set: function(options) {\r\n      if (optionManager.setAll(options, this)) {\r\n        this.update();\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Returns the image data URI for the generated QR code using the <code>mime</code> provided.\r\n     *\r\n     * @param {string} [mime] - the MIME type for the image\r\n     * @return {string} The image data URI for the QR code.\r\n     * @public\r\n     * @memberof QRious#\r\n     */\r\n    toDataURL: function(mime) {\r\n      return this.canvas.toDataURL(mime || this.mime);\r\n    },\r\n\r\n    /**\r\n     * Updates this {@link QRious} by generating a new {@link Frame} and re-rendering the QR code.\r\n     *\r\n     * @return {void}\r\n     * @protected\r\n     * @memberof QRious#\r\n     */\r\n    update: function() {\r\n      var frame = new Frame_1({\r\n        level: this.level,\r\n        value: this.value\r\n      });\r\n\r\n      this._canvasRenderer.render(frame);\r\n      this._imageRenderer.render(frame);\r\n    }\r\n\r\n  }, {\r\n\r\n    /**\r\n     * Configures the <code>service</code> provided to be used by all {@link QRious} instances.\r\n     *\r\n     * @param {Service} service - the {@link Service} to be configured\r\n     * @return {void}\r\n     * @throws {Error} If a {@link Service} has already been configured with the same name.\r\n     * @public\r\n     * @static\r\n     * @memberof QRious\r\n     */\r\n    use: function(service) {\r\n      serviceManager.setService(service.getName(), service);\r\n    }\r\n\r\n  });\r\n\r\n  Object.defineProperties(QRious.prototype, {\r\n\r\n    canvas: {\r\n      /**\r\n       * Returns the <code>canvas</code> element being used to render the QR code for this {@link QRious}.\r\n       *\r\n       * @return {*} The <code>canvas</code> element.\r\n       * @public\r\n       * @memberof QRious#\r\n       * @alias canvas\r\n       */\r\n      get: function() {\r\n        return this._canvasRenderer.getElement();\r\n      }\r\n    },\r\n\r\n    image: {\r\n      /**\r\n       * Returns the <code>img</code> element being used to render the QR code for this {@link QRious}.\r\n       *\r\n       * @return {*} The <code>img</code> element.\r\n       * @public\r\n       * @memberof QRious#\r\n       * @alias image\r\n       */\r\n      get: function() {\r\n        return this._imageRenderer.getElement();\r\n      }\r\n    }\r\n\r\n  });\r\n\r\n  var QRious_1$2 = QRious;\r\n\r\n  /**\r\n   * The options used by {@link QRious}.\r\n   *\r\n   * @typedef {Object} QRious~Options\r\n   * @property {string} [background=\"white\"] - The background color to be applied to the QR code.\r\n   * @property {number} [backgroundAlpha=1] - The background alpha to be applied to the QR code.\r\n   * @property {*} [element] - The element to be used to render the QR code which may either be an <code>canvas</code> or\r\n   * <code>img</code>. The element(s) will be created if needed.\r\n   * @property {string} [foreground=\"black\"] - The foreground color to be applied to the QR code.\r\n   * @property {number} [foregroundAlpha=1] - The foreground alpha to be applied to the QR code.\r\n   * @property {string} [level=\"L\"] - The error correction level to be applied to the QR code.\r\n   * @property {string} [mime=\"image/png\"] - The MIME type to be used to render the image for the QR code.\r\n   * @property {number} [padding] - The padding for the QR code in pixels.\r\n   * @property {number} [size=100] - The size of the QR code in pixels.\r\n   * @property {string} [value=\"\"] - The value to be encoded within the QR code.\r\n   */\r\n\r\n  var index = QRious_1$2;\r\n\r\n  /**\r\n   * Defines a service contract that must be met by all implementations.\r\n   *\r\n   * @public\r\n   * @class\r\n   * @extends Nevis\r\n   */\r\n  var Service = lite.extend({\r\n\r\n    /**\r\n     * Returns the name of this {@link Service}.\r\n     *\r\n     * @return {string} The service name.\r\n     * @public\r\n     * @abstract\r\n     * @memberof Service#\r\n     */\r\n    getName: function() {}\r\n\r\n  });\r\n\r\n  var Service_1 = Service;\r\n\r\n  /**\r\n   * A service for working with elements.\r\n   *\r\n   * @public\r\n   * @class\r\n   * @extends Service\r\n   */\r\n  var ElementService = Service_1.extend({\r\n\r\n    /**\r\n     * Creates an instance of a canvas element.\r\n     *\r\n     * Implementations of {@link ElementService} <b>must</b> override this method with their own specific logic.\r\n     *\r\n     * @return {*} The newly created canvas element.\r\n     * @public\r\n     * @abstract\r\n     * @memberof ElementService#\r\n     */\r\n    createCanvas: function() {},\r\n\r\n    /**\r\n     * Creates an instance of a image element.\r\n     *\r\n     * Implementations of {@link ElementService} <b>must</b> override this method with their own specific logic.\r\n     *\r\n     * @return {*} The newly created image element.\r\n     * @public\r\n     * @abstract\r\n     * @memberof ElementService#\r\n     */\r\n    createImage: function() {},\r\n\r\n    /**\r\n     * @override\r\n     */\r\n    getName: function() {\r\n      return 'element';\r\n    },\r\n\r\n    /**\r\n     * Returns whether the specified <code>element</code> is a canvas.\r\n     *\r\n     * Implementations of {@link ElementService} <b>must</b> override this method with their own specific logic.\r\n     *\r\n     * @param {*} element - the element to be checked\r\n     * @return {boolean} <code>true</code> if <code>element</code> is a canvas; otherwise <code>false</code>.\r\n     * @public\r\n     * @abstract\r\n     * @memberof ElementService#\r\n     */\r\n    isCanvas: function(element) {},\r\n\r\n    /**\r\n     * Returns whether the specified <code>element</code> is an image.\r\n     *\r\n     * Implementations of {@link ElementService} <b>must</b> override this method with their own specific logic.\r\n     *\r\n     * @param {*} element - the element to be checked\r\n     * @return {boolean} <code>true</code> if <code>element</code> is an image; otherwise <code>false</code>.\r\n     * @public\r\n     * @abstract\r\n     * @memberof ElementService#\r\n     */\r\n    isImage: function(element) {}\r\n\r\n  });\r\n\r\n  var ElementService_1 = ElementService;\r\n\r\n  /**\r\n   * An implementation of {@link ElementService} intended for use within a browser environment.\r\n   *\r\n   * @public\r\n   * @class\r\n   * @extends ElementService\r\n   */\r\n  var BrowserElementService = ElementService_1.extend({\r\n\r\n    /**\r\n     * @override\r\n     */\r\n    createCanvas: function() {\r\n      return document.createElement('canvas');\r\n    },\r\n\r\n    /**\r\n     * @override\r\n     */\r\n    createImage: function() {\r\n      return document.createElement('img');\r\n    },\r\n\r\n    /**\r\n     * @override\r\n     */\r\n    isCanvas: function(element) {\r\n      return element instanceof HTMLCanvasElement;\r\n    },\r\n\r\n    /**\r\n     * @override\r\n     */\r\n    isImage: function(element) {\r\n      return element instanceof HTMLImageElement;\r\n    }\r\n\r\n  });\r\n\r\n  var BrowserElementService_1 = BrowserElementService;\r\n\r\n  index.use(new BrowserElementService_1());\r\n\r\n  var QRious_1 = index;\r\n\r\n  return QRious_1;\r\n\r\n})));\r\n\r\n//# sourceMappingURL=qrious.js.map\n\n//# sourceURL=webpack://web-p2p/./src/public/js/qrious.js?");

/***/ }),

/***/ "./src/public/js/sns.js":
/*!******************************!*\
  !*** ./src/public/js/sns.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _kakao_kakao__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./kakao/kakao */ \"./src/public/js/kakao/kakao.js\");\n/* harmony import */ var _kakao_kakao__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_kakao_kakao__WEBPACK_IMPORTED_MODULE_0__);\n\r\nfunction shareKakao(){\r\n    const url=location.href;\r\n    _kakao_kakao__WEBPACK_IMPORTED_MODULE_0__.Link.sendDefault({\r\n        objectType: 'feed',\r\n        content: {\r\n            title: \"p2p 공유\", // 보여질 제목\r\n            description: \"p2p 공유 링크\", // 보여질 설명\r\n            imageUrl: `${url}`, // 콘텐츠 URL\r\n            link: {\r\n                mobileWebUrl: `${url}`,\r\n                webUrl: `${url}`,\r\n                iosExecutionParams: `${url}`,\r\n                androidExecParams: `${url}`,\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\nfunction shareTelegram(){\r\n    const url=`https://telegram.me/share/url?url=${location.href}&text=파일 공유 링크`;\r\n    // const telegram_btn=document.querySelector(\"#telegram_btn\");\r\n    // telegram_btn.href=`https://telegram.me/share/url?url=${location.href}&text=파일 공유 링크`;\r\n    window.open(url,'텔레그램 공유','width=800, height=700, toolbar=no, menubar=no, scrollbars=no, resizable=yes');\r\n    return false;\r\n}\r\n\r\nfunction sharUrl(){\r\n    const url=location.href;\r\n    navigator.clipboard.writeText(url)\r\n    .then(() => {\r\n        console.log(\"클립보드에 url 저장\");\r\n        alert(\"초대장 복사 완료\");\r\n    }).catch(err => {\r\n        console.log('Something went wrong', err);\r\n    })\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({sharUrl,shareTelegram,shareKakao});\n\n//# sourceURL=webpack://web-p2p/./src/public/js/sns.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			id: moduleId,
/******/ 			loaded: false,
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/global */
/******/ 	(() => {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/node module decorator */
/******/ 	(() => {
/******/ 		__webpack_require__.nmd = (module) => {
/******/ 			module.paths = [];
/******/ 			if (!module.children) module.children = [];
/******/ 			return module;
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/public/js/app.js");
/******/ 	
/******/ })()
;